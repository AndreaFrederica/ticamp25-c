import{u as Vt,g as it,h as Mt,i as ut,j as Tt,k as $t,l as Ot,b as je,m as Pt,n as vt,o as Ge,p as It,q as yt,r as Ce,s as _t,t as Lt,Q as Et,e as ie,a as ue,c as Nt,f as H,_ as At}from"./_plugin-vue_export-helper-DUzDWfWX.js";import{d as xt,e as st,h as wt,f as Ft,g as Rt,i as Bt,b as Dt,j as jt,Q as ce}from"./QBtn-Lg77-TvW.js";import{c as ze,b as ct,h as L,T as Ut,g as He,r as B,a as b,w as de,K as zt,F as Ht,G as Jt,L as $e,M as Qt,N as Ze,O as Me,P as et,n as Xt,Q as Re,R as Ue,S as ft,U as tt,V as Kt,W as Yt,X as at,Y as we,s as kt,o as Ct,D as le,C as c,x as ae,m as ke,q as Wt,t as Gt,u as U,y as h,J as nt,z as pe,E as ge,H as ot,I as lt}from"./index-CNsPQhr2.js";import{C as Zt}from"./chart-xFARWQBw.js";import"./scroll-RRfiG8td.js";const ea=ze({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(a,{slots:v,emit:i}){let d=!1,e,s,p=null,x=null,$,g;function F(){e?.(),e=null,d=!1,p!==null&&(clearTimeout(p),p=null),x!==null&&(clearTimeout(x),x=null),s?.removeEventListener("transitionend",$),$=null}function A(n,f,m){f!==void 0&&(n.style.height=`${f}px`),n.style.transition=`height ${a.duration}ms cubic-bezier(.25, .8, .50, 1)`,d=!0,e=m}function y(n,f){n.style.overflowY=null,n.style.height=null,n.style.transition=null,F(),f!==g&&i(f)}function o(n,f){let m=0;s=n,d===!0?(F(),m=n.offsetHeight===n.scrollHeight?0:void 0):(g="hide",n.style.overflowY="hidden"),A(n,m,f),p=setTimeout(()=>{p=null,n.style.height=`${n.scrollHeight}px`,$=w=>{x=null,(Object(w)!==w||w.target===n)&&y(n,"show")},n.addEventListener("transitionend",$),x=setTimeout($,a.duration*1.1)},100)}function r(n,f){let m;s=n,d===!0?F():(g="show",n.style.overflowY="hidden",m=n.scrollHeight),A(n,m,f),p=setTimeout(()=>{p=null,n.style.height=0,$=w=>{x=null,(Object(w)!==w||w.target===n)&&y(n,"hide")},n.addEventListener("transitionend",$),x=setTimeout($,a.duration*1.1)},100)}return ct(()=>{d===!0&&F()}),()=>L(Ut,{css:!1,appear:a.appear,onEnter:o,onLeave:r},v.default)}}),_e=zt({}),ta=Object.keys(xt),he=ze({name:"QExpansionItem",props:{...xt,...Mt,...it,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...Vt,"click","afterShow","afterHide"],setup(a,{slots:v,emit:i}){const{proxy:{$q:d}}=He(),e=ut(a,d),s=B(a.modelValue!==null?a.modelValue:a.defaultOpened),p=B(null),x=Tt(),{show:$,hide:g,toggle:F}=$t({showing:s});let A,y;const o=b(()=>`q-expansion-item q-item-type q-expansion-item--${s.value===!0?"expanded":"collapsed"} q-expansion-item--${a.popup===!0?"popup":"standard"}`),r=b(()=>a.contentInsetLevel===void 0?null:{["padding"+(d.lang.rtl===!0?"Right":"Left")]:a.contentInsetLevel*56+"px"}),n=b(()=>a.disable!==!0&&(a.href!==void 0||a.to!==void 0&&a.to!==null&&a.to!=="")),f=b(()=>{const P={};return ta.forEach(J=>{P[J]=a[J]}),P}),m=b(()=>n.value===!0||a.expandIconToggle!==!0),w=b(()=>a.expandedIcon!==void 0&&s.value===!0?a.expandedIcon:a.expandIcon||d.iconSet.expansionItem[a.denseToggle===!0?"denseIcon":"icon"]),V=b(()=>a.disable!==!0&&(n.value===!0||a.expandIconToggle===!0)),S=b(()=>({expanded:s.value===!0,detailsId:x.value,toggle:F,show:$,hide:g})),M=b(()=>{const P=a.toggleAriaLabel!==void 0?a.toggleAriaLabel:d.lang.label[s.value===!0?"collapse":"expand"](a.label);return{role:"button","aria-expanded":s.value===!0?"true":"false","aria-controls":x.value,"aria-label":P}});de(()=>a.group,P=>{y?.(),P!==void 0&&K()});function T(P){n.value!==!0&&F(P),i("click",P)}function I(P){P.keyCode===13&&O(P,!0)}function O(P,J){J!==!0&&P.qAvoidFocus!==!0&&p.value?.focus(),F(P),$e(P)}function R(){i("afterShow")}function D(){i("afterHide")}function K(){A===void 0&&(A=Ot()),s.value===!0&&(_e[a.group]=A);const P=de(s,Z=>{Z===!0?_e[a.group]=A:_e[a.group]===A&&delete _e[a.group]}),J=de(()=>_e[a.group],(Z,ee)=>{ee===A&&Z!==void 0&&Z!==A&&g()});y=()=>{P(),J(),_e[a.group]===A&&delete _e[a.group],y=void 0}}function N(){const P={class:[`q-focusable relative-position cursor-pointer${a.denseToggle===!0&&a.switchToggleSide===!0?" items-end":""}`,a.expandIconClass],side:a.switchToggleSide!==!0,avatar:a.switchToggleSide},J=[L(st,{class:"q-expansion-item__toggle-icon"+(a.expandedIcon===void 0&&s.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:w.value})];return V.value===!0&&(Object.assign(P,{tabindex:0,...M.value,onClick:O,onKeyup:I}),J.unshift(L("div",{ref:p,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),L(Ge,P,()=>J)}function X(){let P;return v.header!==void 0?P=[].concat(v.header(S.value)):(P=[L(Ge,()=>[L(vt,{lines:a.labelLines},()=>a.label||""),a.caption?L(vt,{lines:a.captionLines,caption:!0},()=>a.caption):null])],a.icon&&P[a.switchToggleSide===!0?"push":"unshift"](L(Ge,{side:a.switchToggleSide===!0,avatar:a.switchToggleSide!==!0},()=>L(st,{name:a.icon})))),a.disable!==!0&&a.hideExpandIcon!==!0&&P[a.switchToggleSide===!0?"unshift":"push"](N()),P}function j(){const P={ref:"item",style:a.headerStyle,class:a.headerClass,dark:e.value,disable:a.disable,dense:a.dense,insetLevel:a.headerInsetLevel};return m.value===!0&&(P.clickable=!0,P.onClick=T,Object.assign(P,n.value===!0?f.value:M.value)),L(Pt,P,X)}function G(){return Ht(L("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:r.value,id:x.value},wt(v.default)),[[Jt,s.value]])}function me(){const P=[j(),L(ea,{duration:a.duration,onShow:R,onHide:D},G)];return a.expandSeparator===!0&&P.push(L(je,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:e.value}),L(je,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:e.value})),P}return a.group!==void 0&&K(),ct(()=>{y?.()}),()=>L("div",{class:o.value},[L("div",{class:"q-expansion-item__container relative-position"},me())])}}),dt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},aa=Object.keys(dt);dt.all=!0;function pt(a){const v={};for(const i of aa)a[i]===!0&&(v[i]=!0);return Object.keys(v).length===0?dt:(v.horizontal===!0?v.left=v.right=!0:v.left===!0&&v.right===!0&&(v.horizontal=!0),v.vertical===!0?v.up=v.down=!0:v.up===!0&&v.down===!0&&(v.vertical=!0),v.horizontal===!0&&v.vertical===!0&&(v.all=!0),v)}const na=["INPUT","TEXTAREA"];function gt(a,v){return v.event===void 0&&a.target!==void 0&&a.target.draggable!==!0&&typeof v.handler=="function"&&na.includes(a.target.nodeName.toUpperCase())===!1&&(a.qClonedBy===void 0||a.qClonedBy.indexOf(v.uid)===-1)}function rt(a,v,i){const d=Ue(a);let e,s=d.left-v.event.x,p=d.top-v.event.y,x=Math.abs(s),$=Math.abs(p);const g=v.direction;g.horizontal===!0&&g.vertical!==!0?e=s<0?"left":"right":g.horizontal!==!0&&g.vertical===!0?e=p<0?"up":"down":g.up===!0&&p<0?(e="up",x>$&&(g.left===!0&&s<0?e="left":g.right===!0&&s>0&&(e="right"))):g.down===!0&&p>0?(e="down",x>$&&(g.left===!0&&s<0?e="left":g.right===!0&&s>0&&(e="right"))):g.left===!0&&s<0?(e="left",x<$&&(g.up===!0&&p<0?e="up":g.down===!0&&p>0&&(e="down"))):g.right===!0&&s>0&&(e="right",x<$&&(g.up===!0&&p<0?e="up":g.down===!0&&p>0&&(e="down")));let F=!1;if(e===void 0&&i===!1){if(v.event.isFirst===!0||v.event.lastDir===void 0)return{};e=v.event.lastDir,F=!0,e==="left"||e==="right"?(d.left-=s,x=0,s=0):(d.top-=p,$=0,p=0)}return{synthetic:F,payload:{evt:a,touch:v.event.mouse!==!0,mouse:v.event.mouse===!0,position:d,direction:e,isFirst:v.event.isFirst,isFinal:i===!0,duration:Date.now()-v.event.time,distance:{x,y:$},offset:{x:s,y:p},delta:{x:d.left-v.event.lastX,y:d.top-v.event.lastY}}}}let oa=0;const la=Qt({name:"touch-pan",beforeMount(a,{value:v,modifiers:i}){if(i.mouse!==!0&&Me.has.touch!==!0)return;function d(s,p){i.mouse===!0&&p===!0?$e(s):(i.stop===!0&&tt(s),i.prevent===!0&&ft(s))}const e={uid:"qvtp_"+oa++,handler:v,modifiers:i,direction:pt(i),noop:Xt,mouseStart(s){gt(s,e)&&Kt(s)&&(Re(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(s,!0))},touchStart(s){if(gt(s,e)){const p=s.target;Re(e,"temp",[[p,"touchmove","move","notPassiveCapture"],[p,"touchcancel","end","passiveCapture"],[p,"touchend","end","passiveCapture"]]),e.start(s)}},start(s,p){if(Me.is.firefox===!0&&et(a,!0),e.lastEvt=s,p===!0||i.stop===!0){if(e.direction.all!==!0&&(p!==!0||e.modifiers.mouseAllDir!==!0&&e.modifiers.mousealldir!==!0)){const g=s.type.indexOf("mouse")!==-1?new MouseEvent(s.type,s):new TouchEvent(s.type,s);s.defaultPrevented===!0&&ft(g),s.cancelBubble===!0&&tt(g),Object.assign(g,{qKeyEvent:s.qKeyEvent,qClickOutside:s.qClickOutside,qAnchorHandled:s.qAnchorHandled,qClonedBy:s.qClonedBy===void 0?[e.uid]:s.qClonedBy.concat(e.uid)}),e.initialEvent={target:s.target,event:g}}tt(s)}const{left:x,top:$}=Ue(s);e.event={x,y:$,time:Date.now(),mouse:p===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:x,lastY:$}},move(s){if(e.event===void 0)return;const p=Ue(s),x=p.left-e.event.x,$=p.top-e.event.y;if(x===0&&$===0)return;e.lastEvt=s;const g=e.event.mouse===!0,F=()=>{d(s,g);let o;i.preserveCursor!==!0&&i.preservecursor!==!0&&(o=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),g===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),It(),e.styleCleanup=r=>{if(e.styleCleanup=void 0,o!==void 0&&(document.documentElement.style.cursor=o),document.body.classList.remove("non-selectable"),g===!0){const n=()=>{document.body.classList.remove("no-pointer-events--children")};r!==void 0?setTimeout(()=>{n(),r()},50):n()}else r!==void 0&&r()}};if(e.event.detected===!0){e.event.isFirst!==!0&&d(s,e.event.mouse);const{payload:o,synthetic:r}=rt(s,e,!1);o!==void 0&&(e.handler(o)===!1?e.end(s):(e.styleCleanup===void 0&&e.event.isFirst===!0&&F(),e.event.lastX=o.position.left,e.event.lastY=o.position.top,e.event.lastDir=r===!0?void 0:o.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||g===!0&&(e.modifiers.mouseAllDir===!0||e.modifiers.mousealldir===!0)){F(),e.event.detected=!0,e.move(s);return}const A=Math.abs(x),y=Math.abs($);A!==y&&(e.direction.horizontal===!0&&A>y||e.direction.vertical===!0&&A<y||e.direction.up===!0&&A<y&&$<0||e.direction.down===!0&&A<y&&$>0||e.direction.left===!0&&A>y&&x<0||e.direction.right===!0&&A>y&&x>0?(e.event.detected=!0,e.move(s)):e.end(s,!0))},end(s,p){if(e.event!==void 0){if(Ze(e,"temp"),Me.is.firefox===!0&&et(a,!1),p===!0)e.styleCleanup?.(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(rt(s===void 0?e.lastEvt:s,e).payload);const{payload:x}=rt(s===void 0?e.lastEvt:s,e,!0),$=()=>{e.handler(x)};e.styleCleanup!==void 0?e.styleCleanup($):$()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};if(a.__qtouchpan=e,i.mouse===!0){const s=i.mouseCapture===!0||i.mousecapture===!0?"Capture":"";Re(e,"main",[[a,"mousedown","mouseStart",`passive${s}`]])}Me.has.touch===!0&&Re(e,"main",[[a,"touchstart","touchStart",`passive${i.capture===!0?"Capture":""}`],[a,"touchmove","noop","notPassiveCapture"]])},updated(a,v){const i=a.__qtouchpan;i!==void 0&&(v.oldValue!==v.value&&(typeof value!="function"&&i.end(),i.handler=v.value),i.direction=pt(v.modifiers))},beforeUnmount(a){const v=a.__qtouchpan;v!==void 0&&(v.event!==void 0&&v.end(),Ze(v,"main"),Ze(v,"temp"),Me.is.firefox===!0&&et(a,!1),v.styleCleanup?.(),delete a.__qtouchpan)}}),ht="q-slider__marker-labels",ra=a=>({value:a}),sa=({marker:a})=>L("div",{key:a.value,style:a.style,class:a.classes},a.label),St=[34,37,40,33,39,38],ia={...it,...yt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:a=>a>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},ua=["pan","update:modelValue","change"];function ca({updateValue:a,updatePosition:v,getDragging:i,formAttrs:d}){const{props:e,emit:s,slots:p,proxy:{$q:x}}=He(),$=ut(e,x),g=_t(d),F=B(!1),A=B(!1),y=B(!1),o=B(!1),r=b(()=>e.vertical===!0?"--v":"--h"),n=b(()=>"-"+(e.switchLabelSide===!0?"switched":"standard")),f=b(()=>e.vertical===!0?e.reverse===!0:e.reverse!==(x.lang.rtl===!0)),m=b(()=>isNaN(e.innerMin)===!0||e.innerMin<e.min?e.min:e.innerMin),w=b(()=>isNaN(e.innerMax)===!0||e.innerMax>e.max?e.max:e.innerMax),V=b(()=>e.disable!==!0&&e.readonly!==!0&&m.value<w.value),S=b(()=>{if(e.step===0)return E=>E;const u=(String(e.step).trim().split(".")[1]||"").length;return E=>parseFloat(E.toFixed(u))}),M=b(()=>e.step===0?1:e.step),T=b(()=>V.value===!0?e.tabindex||0:-1),I=b(()=>e.max-e.min),O=b(()=>w.value-m.value),R=b(()=>qe(m.value)),D=b(()=>qe(w.value)),K=b(()=>e.vertical===!0?f.value===!0?"bottom":"top":f.value===!0?"right":"left"),N=b(()=>e.vertical===!0?"height":"width"),X=b(()=>e.vertical===!0?"width":"height"),j=b(()=>e.vertical===!0?"vertical":"horizontal"),G=b(()=>{const u={role:"slider","aria-valuemin":m.value,"aria-valuemax":w.value,"aria-orientation":j.value,"data-step":e.step};return e.disable===!0?u["aria-disabled"]="true":e.readonly===!0&&(u["aria-readonly"]="true"),u}),me=b(()=>`q-slider q-slider${r.value} q-slider--${F.value===!0?"":"in"}active inline no-wrap `+(e.vertical===!0?"row":"column")+(e.disable===!0?" disabled":" q-slider--enabled"+(V.value===!0?" q-slider--editable":""))+(y.value==="both"?" q-slider--focus":"")+(e.label||e.labelAlways===!0?" q-slider--label":"")+(e.labelAlways===!0?" q-slider--label-always":"")+($.value===!0?" q-slider--dark":"")+(e.dense===!0?" q-slider--dense q-slider--dense"+r.value:""));function P(u){const E="q-slider__"+u;return`${E} ${E}${r.value} ${E}${r.value}${n.value}`}function J(u){const E="q-slider__"+u;return`${E} ${E}${r.value}`}const Z=b(()=>{const u=e.selectionColor||e.color;return"q-slider__selection absolute"+(u!==void 0?` text-${u}`:"")}),ee=b(()=>J("markers")+" absolute overflow-hidden"),Oe=b(()=>J("track-container")),Pe=b(()=>P("pin")),Se=b(()=>P("label")),Ie=b(()=>P("text-container")),Le=b(()=>P("marker-labels-container")+(e.markerLabelsClass!==void 0?` ${e.markerLabelsClass}`:"")),te=b(()=>"q-slider__track relative-position no-outline"+(e.trackColor!==void 0?` bg-${e.trackColor}`:"")),ve=b(()=>{const u={[X.value]:e.trackSize};return e.trackImg!==void 0&&(u.backgroundImage=`url(${e.trackImg}) !important`),u}),ne=b(()=>"q-slider__inner absolute"+(e.innerTrackColor!==void 0?` bg-${e.innerTrackColor}`:"")),be=b(()=>{const u=D.value-R.value,E={[K.value]:`${100*R.value}%`,[N.value]:u===0?"2px":`${100*u}%`};return e.innerTrackImg!==void 0&&(E.backgroundImage=`url(${e.innerTrackImg}) !important`),E});function Ee(u){const{min:E,max:z,step:Q}=e;let Y=E+u*(z-E);if(Q>0){const fe=(Y-m.value)%Q;Y+=(Math.abs(fe)>=Q/2?(fe<0?-1:1)*Q:0)-fe}return Y=S.value(Y),Ce(Y,m.value,w.value)}function qe(u){return I.value===0?0:(u-e.min)/I.value}function Je(u,E){const z=Ue(u),Q=e.vertical===!0?Ce((z.top-E.top)/E.height,0,1):Ce((z.left-E.left)/E.width,0,1);return Ce(f.value===!0?1-Q:Q,R.value,D.value)}const Ne=b(()=>Yt(e.markers)===!0?e.markers:M.value),re=b(()=>{const u=[],E=Ne.value,z=e.max;let Q=e.min;do u.push(Q),Q+=E;while(Q<z);return u.push(z),u}),Ae=b(()=>{const u=` ${ht}${r.value}-`;return ht+`${u}${e.switchMarkerLabelsSide===!0?"switched":"standard"}${u}${f.value===!0?"rtl":"ltr"}`}),Ve=b(()=>e.markerLabels===!1?null:k(e.markerLabels).map((u,E)=>({index:E,value:u.value,label:u.label||u.value,classes:Ae.value+(u.classes!==void 0?" "+u.classes:""),style:{...t(u.value),...u.style||{}}}))),Fe=b(()=>({markerList:Ve.value,markerMap:l.value,classes:Ae.value,getStyle:t})),Qe=b(()=>{const u=O.value===0?"2px":100*Ne.value/O.value;return{...be.value,backgroundSize:e.vertical===!0?`2px ${u}%`:`${u}% 2px`}});function k(u){if(u===!1)return null;if(u===!0)return re.value.map(ra);if(typeof u=="function")return re.value.map(z=>{const Q=u(z);return at(Q)===!0?{...Q,value:z}:{value:z,label:Q}});const E=({value:z})=>z>=e.min&&z<=e.max;return Array.isArray(u)===!0?u.map(z=>at(z)===!0?z:{value:z}).filter(E):Object.keys(u).map(z=>{const Q=u[z],Y=Number(z);return at(Q)===!0?{...Q,value:Y}:{value:Y,label:Q}}).filter(E)}function t(u){return{[K.value]:`${100*(u-e.min)/I.value}%`}}const l=b(()=>{if(e.markerLabels===!1)return null;const u={};return Ve.value.forEach(E=>{u[E.value]=E}),u});function C(){if(p["marker-label-group"]!==void 0)return p["marker-label-group"](Fe.value);const u=p["marker-label"]||sa;return Ve.value.map(E=>u({marker:E,...Fe.value}))}const _=b(()=>[[la,q,void 0,{[j.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function q(u){u.isFinal===!0?(o.value!==void 0&&(v(u.evt),u.touch===!0&&a(!0),o.value=void 0,s("pan","end")),F.value=!1,y.value=!1):u.isFirst===!0?(o.value=i(u.evt),v(u.evt),a(),F.value=!0,s("pan","start")):(v(u.evt),a())}function ye(){y.value=!1}function oe(u){v(u,i(u)),a(),A.value=!0,F.value=!0,document.addEventListener("mouseup",se,!0)}function se(){A.value=!1,F.value=!1,a(!0),ye(),document.removeEventListener("mouseup",se,!0)}function xe(u){v(u,i(u)),a(!0)}function mt(u){St.includes(u.keyCode)&&a(!0)}function Xe(u){if(e.vertical===!0)return null;const E=x.lang.rtl!==e.reverse?1-u:u;return{transform:`translateX(calc(${2*E-1} * ${e.thumbSize} / 2 + ${50-100*E}%))`}}function Ke(u){const E=b(()=>A.value===!1&&(y.value===u.focusValue||y.value==="both")?" q-slider--focus":""),z=b(()=>`q-slider__thumb q-slider__thumb${r.value} q-slider__thumb${r.value}-${f.value===!0?"rtl":"ltr"} absolute non-selectable`+E.value+(u.thumbColor.value!==void 0?` text-${u.thumbColor.value}`:"")),Q=b(()=>({width:e.thumbSize,height:e.thumbSize,[K.value]:`${100*u.ratio.value}%`,zIndex:y.value===u.focusValue?2:void 0})),Y=b(()=>u.labelColor.value!==void 0?` text-${u.labelColor.value}`:""),fe=b(()=>Xe(u.ratio.value)),Ye=b(()=>"q-slider__text"+(u.labelTextColor.value!==void 0?` text-${u.labelTextColor.value}`:""));return()=>{const We=[L("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[L("path",{d:e.thumbPath})]),L("div",{class:"q-slider__focus-ring fit"})];return(e.label===!0||e.labelAlways===!0)&&(We.push(L("div",{class:Pe.value+" absolute fit no-pointer-events"+Y.value},[L("div",{class:Se.value,style:{minWidth:e.thumbSize}},[L("div",{class:Ie.value,style:fe.value},[L("span",{class:Ye.value},u.label.value)])])])),e.name!==void 0&&e.disable!==!0&&g(We,"push")),L("div",{class:z.value,style:Q.value,...u.getNodeData()},We)}}function qt(u,E,z,Q){const Y=[];e.innerTrackColor!=="transparent"&&Y.push(L("div",{key:"inner",class:ne.value,style:be.value})),e.selectionColor!=="transparent"&&Y.push(L("div",{key:"selection",class:Z.value,style:u.value})),e.markers!==!1&&Y.push(L("div",{key:"marker",class:ee.value,style:Qe.value})),Q(Y);const fe=[Ft("div",{key:"trackC",class:Oe.value,tabindex:E.value,...z.value},[L("div",{class:te.value,style:ve.value},Y)],"slide",V.value,()=>_.value)];if(e.markerLabels!==!1){const Ye=e.switchMarkerLabelsSide===!0?"unshift":"push";fe[Ye](L("div",{key:"markerL",class:Le.value},C()))}return fe}return ct(()=>{document.removeEventListener("mouseup",se,!0)}),{state:{active:F,focus:y,preventFocus:A,dragging:o,editable:V,classes:me,tabindex:T,attributes:G,roundValueFn:S,keyStep:M,trackLen:I,innerMin:m,innerMinRatio:R,innerMax:w,innerMaxRatio:D,positionProp:K,sizeProp:N,isReversed:f},methods:{onActivate:oe,onMobileClick:xe,onBlur:ye,onKeyup:mt,getContent:qt,getThumbRenderFn:Ke,convertRatioToModel:Ee,convertModelToRatio:qe,getDraggingRatio:Je}}}const da=()=>({}),Be=ze({name:"QSlider",props:{...ia,modelValue:{required:!0,default:null,validator:a=>typeof a=="number"||a===null},labelValue:[String,Number]},emits:ua,setup(a,{emit:v}){const{proxy:{$q:i}}=He(),{state:d,methods:e}=ca({updateValue:r,updatePosition:f,getDragging:n,formAttrs:Lt(a)}),s=B(null),p=B(0),x=B(0);function $(){x.value=a.modelValue===null?d.innerMin.value:Ce(a.modelValue,d.innerMin.value,d.innerMax.value)}de(()=>`${a.modelValue}|${d.innerMin.value}|${d.innerMax.value}`,$),$();const g=b(()=>e.convertModelToRatio(x.value)),F=b(()=>d.active.value===!0?p.value:g.value),A=b(()=>{const V={[d.positionProp.value]:`${100*d.innerMinRatio.value}%`,[d.sizeProp.value]:`${100*(F.value-d.innerMinRatio.value)}%`};return a.selectionImg!==void 0&&(V.backgroundImage=`url(${a.selectionImg}) !important`),V}),y=e.getThumbRenderFn({focusValue:!0,getNodeData:da,ratio:F,label:b(()=>a.labelValue!==void 0?a.labelValue:x.value),thumbColor:b(()=>a.thumbColor||a.color),labelColor:b(()=>a.labelColor),labelTextColor:b(()=>a.labelTextColor)}),o=b(()=>d.editable.value!==!0?{}:i.platform.is.mobile===!0?{onClick:e.onMobileClick}:{onMousedown:e.onActivate,onFocus:m,onBlur:e.onBlur,onKeydown:w,onKeyup:e.onKeyup});function r(V){x.value!==a.modelValue&&v("update:modelValue",x.value),V===!0&&v("change",x.value)}function n(){return s.value.getBoundingClientRect()}function f(V,S=d.dragging.value){const M=e.getDraggingRatio(V,S);x.value=e.convertRatioToModel(M),p.value=a.snap!==!0||a.step===0?M:e.convertModelToRatio(x.value)}function m(){d.focus.value=!0}function w(V){if(St.includes(V.keyCode)===!1)return;$e(V);const S=([34,33].includes(V.keyCode)?10:1)*d.keyStep.value,M=([34,37,40].includes(V.keyCode)?-1:1)*(d.isReversed.value===!0?-1:1)*(a.vertical===!0?-1:1)*S;x.value=Ce(d.roundValueFn.value(x.value+M),d.innerMin.value,d.innerMax.value),r()}return()=>{const V=e.getContent(A,d.tabindex,o,S=>{S.push(y())});return L("div",{ref:s,class:d.classes.value+(a.modelValue===null?" q-slider--no-value":""),...d.attributes.value,"aria-valuenow":a.modelValue},V)}}});function ma(a,v){const i=B(null),d=b(()=>a.disable===!0?null:L("span",{ref:i,class:"no-outline",tabindex:-1}));function e(s){const p=v.value;s?.qAvoidFocus!==!0&&(s?.type.indexOf("key")===0?document.activeElement!==p&&p?.contains(document.activeElement)===!0&&p.focus():i.value!==null&&(s===void 0||p?.contains(s.target)===!0)&&i.value.focus())}return{refocusTargetEl:d,refocusTarget:e}}const va={xs:30,sm:35,md:40,lg:50,xl:60},fa={...it,...Rt,...yt,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:a=>a==="tf"||a==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},pa=["update:modelValue"];function ga(a,v){const{props:i,slots:d,emit:e,proxy:s}=He(),{$q:p}=s,x=ut(i,p),$=B(null),{refocusTargetEl:g,refocusTarget:F}=ma(i,$),A=Bt(i,va),y=b(()=>i.val!==void 0&&Array.isArray(i.modelValue)),o=b(()=>{const N=we(i.val);return y.value===!0?i.modelValue.findIndex(X=>we(X)===N):-1}),r=b(()=>y.value===!0?o.value!==-1:we(i.modelValue)===we(i.trueValue)),n=b(()=>y.value===!0?o.value===-1:we(i.modelValue)===we(i.falseValue)),f=b(()=>r.value===!1&&n.value===!1),m=b(()=>i.disable===!0?-1:i.tabindex||0),w=b(()=>`q-${a} cursor-pointer no-outline row inline no-wrap items-center`+(i.disable===!0?" disabled":"")+(x.value===!0?` q-${a}--dark`:"")+(i.dense===!0?` q-${a}--dense`:"")+(i.leftLabel===!0?" reverse":"")),V=b(()=>{const N=r.value===!0?"truthy":n.value===!0?"falsy":"indet",X=i.color!==void 0&&(i.keepColor===!0||n.value!==!0)?` text-${i.color}`:"";return`q-${a}__inner relative-position non-selectable q-${a}__inner--${N}${X}`}),S=b(()=>{const N={type:"checkbox"};return i.name!==void 0&&Object.assign(N,{".checked":r.value,"^checked":r.value===!0?"checked":void 0,name:i.name,value:y.value===!0?i.val:i.trueValue}),N}),M=_t(S),T=b(()=>{const N={tabindex:m.value,role:"checkbox","aria-label":i.label,"aria-checked":f.value===!0?"mixed":r.value===!0?"true":"false"};return i.disable===!0&&(N["aria-disabled"]="true"),N});function I(N){N!==void 0&&($e(N),F(N)),i.disable!==!0&&e("update:modelValue",O(),N)}function O(){if(y.value===!0){if(r.value===!0){const N=i.modelValue.slice();return N.splice(o.value,1),N}return i.modelValue.concat([i.val])}if(r.value===!0){if(i.toggleOrder!=="ft"||i.toggleIndeterminate===!1)return i.falseValue}else if(n.value===!0){if(i.toggleOrder==="ft"||i.toggleIndeterminate===!1)return i.trueValue}else return i.toggleOrder!=="ft"?i.trueValue:i.falseValue;return i.indeterminateValue}function R(N){(N.keyCode===13||N.keyCode===32)&&$e(N)}function D(N){(N.keyCode===13||N.keyCode===32)&&I(N)}const K=v(r,f);return Object.assign(s,{toggle:I}),()=>{const N=K();i.disable!==!0&&M(N,"unshift",` q-${a}__native absolute q-ma-none q-pa-none`);const X=[L("div",{class:V.value,style:A.value,"aria-hidden":"true"},N)];g.value!==null&&X.push(g.value);const j=i.label!==void 0?Dt(d.default,[i.label]):wt(d.default);return j!==void 0&&X.push(L("div",{class:`q-${a}__label q-anchor--skip`},j)),L("div",{ref:$,class:w.value,...T.value,onClick:I,onKeydown:R,onKeyup:D},X)}}const ha=()=>L("div",{key:"svg",class:"q-checkbox__bg absolute"},[L("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[L("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),L("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),Te=ze({name:"QCheckbox",props:fa,emits:pa,setup(a){const v=ha();function i(d,e){const s=b(()=>(d.value===!0?a.checkedIcon:e.value===!0?a.indeterminateIcon:a.uncheckedIcon)||null);return()=>s.value!==null?[L("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[L(st,{class:"q-checkbox__icon",name:s.value})])]:[v]}return ga("checkbox",i)}}),ba={class:"q-pa-sm",style:{height:"300px"}},ya=kt({__name:"CurveChart",props:{points:{},currentDistance:{},currentPixelHeight:{}},setup(a){const v=a,i=B(null);let d=null;Ct(()=>{if(!i.value)return;const s={type:"line",data:{labels:v.points.map(p=>p.x),datasets:[{label:"拟合曲线",data:v.points.map(p=>p.y),fill:!1,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.2)",pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"距离 (m)"}},y:{title:{display:!0,text:"像素高度 (px)"}}},plugins:{legend:{display:!0}}}};d=new Zt(i.value,s),e()});function e(){if(!d||!v.currentDistance||v.currentDistance<=0){d&&d.data.datasets.length>1&&(d.data.datasets.splice(1,1),d.update("none"));return}const s=v.currentDistance,p=v.currentPixelHeight||0;console.log(`Chart update: distance=${s.toFixed(3)}m, pixel=${p}px`);const x=v.points||[],$=Math.min(...x.map(o=>o.x)),g=Math.max(...x.map(o=>o.x));if(s<$-.1||s>g+.1){const o=Math.min($,s-.1),r=Math.max(g,s+.1);d.config.options?.scales?.x&&(d.config.options.scales.x.min=o,d.config.options.scales.x.max=r),console.log(`Adjusting X-axis range: ${o.toFixed(2)} to ${r.toFixed(2)}`)}const F=d.config.options?.scales?.x?.min||$,A=d.config.options?.scales?.x?.max||g,y={label:`当前距离: ${(s*100).toFixed(1)} cm`,data:[{x:F,y:p},{x:A,y:p}],fill:!1,borderColor:"rgba(255, 0, 0, 0.8)",backgroundColor:"rgba(255, 0, 0, 0.8)",borderWidth:3,borderDash:[5,5],pointRadius:0,pointHoverRadius:0,showLine:!0,tension:0};d.data.datasets.length>1?d.data.datasets[1]=y:d.data.datasets.push(y),d.update("none")}return de(()=>v.points,s=>{d&&(d.data.labels=s.map(p=>p.x),d.data.datasets[0].data=s.map(p=>p.y),d.update("none"),e())},{deep:!0}),de(()=>[v.currentDistance,v.currentPixelHeight],()=>{e()}),(s,p)=>(ae(),le("div",ba,[c("canvas",{ref_key:"canvasRef",ref:i},null,512)]))}});function _a(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var De={exports:{}},xa=De.exports,bt;function wa(){return bt||(bt=1,function(a,v){(function(i,d){d(a)})(xa,function(i){function d(y,o,r){return o in y?Object.defineProperty(y,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):y[o]=r,y}var e=Object.assign||function(y){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(y[n]=r[n])}return y};function s(y){if(Array.isArray(y)){for(var o=0,r=Array(y.length);o<y.length;o++)r[o]=y[o];return r}else return Array.from(y)}var p={order:2,precision:2,period:null};function x(y,o){var r=[],n=[];y.forEach(function(S,M){S[1]!==null&&(n.push(S),r.push(o[M]))});var f=n.reduce(function(S,M){return S+M[1]},0),m=f/n.length,w=n.reduce(function(S,M){var T=M[1]-m;return S+T*T},0),V=n.reduce(function(S,M,T){var I=r[T],O=M[1]-I[1];return S+O*O},0);return 1-V/w}function $(y,o){for(var r=y,n=y.length-1,f=[o],m=0;m<n;m++){for(var w=m,V=m+1;V<n;V++)Math.abs(r[m][V])>Math.abs(r[m][w])&&(w=V);for(var S=m;S<n+1;S++){var M=r[S][m];r[S][m]=r[S][w],r[S][w]=M}for(var T=m+1;T<n;T++)for(var I=n;I>=m;I--)r[I][T]-=r[I][m]*r[m][T]/r[m][m]}for(var O=n-1;O>=0;O--){for(var R=0,D=O+1;D<n;D++)R+=r[D][O]*f[D];f[O]=(r[n][O]-R)/r[O][O]}return f}function g(y,o){var r=Math.pow(10,o);return Math.round(y*r)/r}var F={linear:function(o,r){for(var n=[0,0,0,0,0],f=0,m=0;m<o.length;m++)o[m][1]!==null&&(f++,n[0]+=o[m][0],n[1]+=o[m][1],n[2]+=o[m][0]*o[m][0],n[3]+=o[m][0]*o[m][1],n[4]+=o[m][1]*o[m][1]);var w=f*n[2]-n[0]*n[0],V=f*n[3]-n[0]*n[1],S=w===0?0:g(V/w,r.precision),M=g(n[1]/f-S*n[0]/f,r.precision),T=function(R){return[g(R,r.precision),g(S*R+M,r.precision)]},I=o.map(function(O){return T(O[0])});return{points:I,predict:T,equation:[S,M],r2:g(x(o,I),r.precision),string:M===0?"y = "+S+"x":"y = "+S+"x + "+M}},exponential:function(o,r){for(var n=[0,0,0,0,0,0],f=0;f<o.length;f++)o[f][1]!==null&&(n[0]+=o[f][0],n[1]+=o[f][1],n[2]+=o[f][0]*o[f][0]*o[f][1],n[3]+=o[f][1]*Math.log(o[f][1]),n[4]+=o[f][0]*o[f][1]*Math.log(o[f][1]),n[5]+=o[f][0]*o[f][1]);var m=n[1]*n[2]-n[5]*n[5],w=Math.exp((n[2]*n[3]-n[5]*n[4])/m),V=(n[1]*n[4]-n[5]*n[3])/m,S=g(w,r.precision),M=g(V,r.precision),T=function(R){return[g(R,r.precision),g(S*Math.exp(M*R),r.precision)]},I=o.map(function(O){return T(O[0])});return{points:I,predict:T,equation:[S,M],string:"y = "+S+"e^("+M+"x)",r2:g(x(o,I),r.precision)}},logarithmic:function(o,r){for(var n=[0,0,0,0],f=o.length,m=0;m<f;m++)o[m][1]!==null&&(n[0]+=Math.log(o[m][0]),n[1]+=o[m][1]*Math.log(o[m][0]),n[2]+=o[m][1],n[3]+=Math.pow(Math.log(o[m][0]),2));var w=(f*n[1]-n[2]*n[0])/(f*n[3]-n[0]*n[0]),V=g(w,r.precision),S=g((n[2]-V*n[0])/f,r.precision),M=function(O){return[g(O,r.precision),g(g(S+V*Math.log(O),r.precision),r.precision)]},T=o.map(function(I){return M(I[0])});return{points:T,predict:M,equation:[S,V],string:"y = "+S+" + "+V+" ln(x)",r2:g(x(o,T),r.precision)}},power:function(o,r){for(var n=[0,0,0,0,0],f=o.length,m=0;m<f;m++)o[m][1]!==null&&(n[0]+=Math.log(o[m][0]),n[1]+=Math.log(o[m][1])*Math.log(o[m][0]),n[2]+=Math.log(o[m][1]),n[3]+=Math.pow(Math.log(o[m][0]),2));var w=(f*n[1]-n[0]*n[2])/(f*n[3]-Math.pow(n[0],2)),V=(n[2]-w*n[0])/f,S=g(Math.exp(V),r.precision),M=g(w,r.precision),T=function(R){return[g(R,r.precision),g(g(S*Math.pow(R,M),r.precision),r.precision)]},I=o.map(function(O){return T(O[0])});return{points:I,predict:T,equation:[S,M],string:"y = "+S+"x^"+M,r2:g(x(o,I),r.precision)}},polynomial:function(o,r){for(var n=[],f=[],m=0,w=0,V=o.length,S=r.order+1,M=0;M<S;M++){for(var T=0;T<V;T++)o[T][1]!==null&&(m+=Math.pow(o[T][0],M)*o[T][1]);n.push(m),m=0;for(var I=[],O=0;O<S;O++){for(var R=0;R<V;R++)o[R][1]!==null&&(w+=Math.pow(o[R][0],M+O));I.push(w),w=0}f.push(I)}f.push(n);for(var D=$(f,S).map(function(G){return g(G,r.precision)}),K=function(me){return[g(me,r.precision),g(D.reduce(function(P,J,Z){return P+J*Math.pow(me,Z)},0),r.precision)]},N=o.map(function(G){return K(G[0])}),X="y = ",j=D.length-1;j>=0;j--)j>1?X+=D[j]+"x^"+j+" + ":j===1?X+=D[j]+"x + ":X+=D[j];return{string:X,points:N,predict:K,equation:[].concat(s(D)).reverse(),r2:g(x(o,N),r.precision)}}};function A(){var y=function(r,n){return e({_round:g},r,d({},n,function(f,m){return F[n](f,e({},p,m))}))};return Object.keys(F).reduce(y,{})}i.exports=A()})}(De)),De.exports}var ka=wa();const W=_a(ka),Ca={class:"row no-wrap",style:{gap:"16px","align-items":"flex-start"}},Sa={style:{width:"50%",display:"flex","flex-direction":"column"}},qa={style:{display:"flex","flex-direction":"column",gap:"16px"}},Va={style:{display:"flex","flex-direction":"column"}},Ma=["src"],Ta={style:{width:"50%",display:"flex","flex-direction":"column",gap:"16px"}},$a={key:0,class:"text-center q-pa-md"},Oa={key:1},Pa={class:"row items-center q-col-gutter-md q-mb-md"},Ia={class:"col"},La={key:0,class:"col-auto"},Ea={class:"col-auto"},Na={class:"col-auto"},Aa={class:"q-my-md text-subtitle2"},Fa={class:"text-primary"},Ra={class:"text-primary"},Ba={class:"text-caption text-grey-6"},Da={class:"q-mt-lg",style:{"min-height":"200px"}},ja={key:0,class:"q-mt-sm text-subtitle2 text-center"},Ua={class:"text-info"},za={class:"text-primary"},Ha={class:"text-primary"},Ja={class:"q-mt-md"},Qa={class:"q-col-gutter-sm"},Xa={class:"row q-gutter-sm items-end"},Ka={class:"q-mt-sm"},Ya={class:"text-caption"},Wa={class:"q-mt-lg"},Ga={key:0,class:"q-mt-sm"},Za={class:"text-caption"},en={class:"q-mt-lg"},tn={class:"q-mt-sm"},an={class:"text-caption"},nn={class:"q-mt-sm"},on={class:"text-caption"},ln={class:"row q-col-gutter-md"},rn={class:"col-6"},sn={class:"col-6"},un={class:"q-mt-md"},cn={class:"q-mt-md"},dn={class:"row q-col-gutter-md q-mt-md"},mn={class:"col-6"},vn={class:"col-6"},fn={class:"row q-col-gutter-md q-mt-md"},pn={class:"col-6"},gn={class:"col-6"},hn={class:"q-mb-md"},bn={class:"row q-col-gutter-md"},yn={class:"col-6"},_n={class:"col-6"},xn={class:"row q-col-gutter-md q-mt-md"},wn={class:"col-6"},kn={class:"col-6"},Cn={class:"row q-col-gutter-md"},Sn={class:"col-4"},qn={class:"col-4"},Vn={class:"col-4"},Mn={class:"row q-col-gutter-md q-mt-md"},Tn={class:"col-4"},$n={class:"col-4"},On={class:"col-4"},Pn={class:"q-mt-md"},In={class:"row q-col-gutter-md"},Ln={class:"col-4"},En={class:"col-4"},Nn={class:"col-4"},An={class:"row q-col-gutter-md"},Fn={class:"col-6"},Rn={class:"col-6"},Bn={class:"row q-col-gutter-md q-mt-md"},Dn={class:"col-6"},jn={class:"col-6"},Un=5,zn=kt({__name:"SettingsPage",setup(a){const v=[{label:"线性 (Linear)",value:"Linear"},{label:"对数 (Logarithmic)",value:"Logarithmic"},{label:"指数 (Exponential)",value:"Exponential"},{label:"幂 (Power)",value:"Power"},{label:"多项式 (Polynomial)",value:"Polynomial"}],i=B("Power"),d=B(2),e=B("((524.38/x)**(1/1.003))*100"),s=B(1.0261),p=ke({h1_min:0,h1_max:179,s1_min:0,s1_max:255,v1_min:0,v1_max:85,use_range2:!1,h2_min:0,h2_max:179,s2_min:0,s2_max:255,v2_min:0,v2_max:85}),x=ke({min_area:200,canny_min:50,canny_max:150}),$=B(!1),g=B(!1),F=B(!1),A=B(!1),y=B([]),o=ke({min_crop_area:2e4,max_crop_area:52e5,enable_area_filter:!0,a4_ratio_tolerance:.3,max_circularity:.7,min_solidity:.8,max_vertices:8,enable_a4_check:!0}),r=ke({enable:!0,target_width:210,target_height:297,a4_ratio:1.414285714285714,use_short_edge_for_measurement:!0}),n=ke({lower_h:0,lower_s:0,lower_v:0,upper_h:255,upper_s:255,upper_v:80,morph_kernel_size:3}),f=ke({index:0,width:1920,height:1080}),m=[{x:1,y:524.9},{x:1.1,y:477.2},{x:1.2,y:435.4},{x:1.3,y:402.7},{x:1.4,y:373.9},{x:1.5,y:349.6},{x:1.6,y:327.5},{x:1.7,y:307.6},{x:1.8,y:291.5},{x:1.9,y:275.5},{x:2,y:261.2}],w=B([]),V=B(!0),S=b(()=>[...w.value].sort((k,t)=>k.x-t.x)),M=B([]),T=B(""),I=B(0),O=B(0),R=B(0),D=B([]);let K=null;function N(){K!==null&&(clearInterval(K),K=null,console.log("实时监控已停止"))}function X(k){return{Linear:"线性",Logarithmic:"对数",Exponential:"指数",Power:"幂函数",Polynomial:"多项式"}[k]||k}function j(){try{if(console.log("开始计算拟合..."),console.log("当前点数据:",w.value),console.log("拟合类型:",i.value),!Array.isArray(w.value)||w.value.length===0){console.error("点数据无效，无法进行拟合"),T.value="Error: No data points",I.value=0;return}const k=w.value.filter(C=>C&&typeof C.x=="number"&&typeof C.y=="number"&&!isNaN(C.x)&&!isNaN(C.y)&&C.x>0&&C.y>0);if(k.length<2){console.error("有效数据点不足，需要至少2个点"),T.value="Error: Insufficient valid data points",I.value=0;return}console.log("有效数据点:",k.length,"个");const t=k.map(C=>[C.x,C.y]);let l;switch(console.log("准备进行",i.value,"拟合"),i.value){case"Linear":l=W.linear(t,{precision:15});break;case"Logarithmic":l=W.logarithmic(t,{precision:15});break;case"Exponential":l=W.exponential(t,{precision:15});break;case"Power":l=W.power(t,{precision:15});break;case"Polynomial":l=W.polynomial(t,{order:d.value,precision:15});break;default:l=W.power(t,{precision:15});break}if(!l||typeof l.string!="string"||typeof l.r2!="number")throw new Error("拟合结果无效");T.value=l.string,I.value=l.r2,M.value=k.map(C=>{try{const _=l.predict(C.x)[1];return{x:C.x,y:_}}catch{return console.warn("预测点计算失败，使用原始值"),{x:C.x,y:C.y}}}),console.log("✓ 拟合计算成功:",{type:i.value,equation:l.string,r2:l.r2,dataPoints:t.length,validPoints:k.length}),Z()}catch(k){console.error("Regression calculation error:",k);try{console.log("尝试基础拟合计算...");const t=w.value.filter(_=>_&&typeof _.x=="number"&&typeof _.y=="number"&&!isNaN(_.x)&&!isNaN(_.y)&&_.x>0&&_.y>0);if(t.length<2)throw new Error("有效数据点不足");const l=t.map(_=>[_.x,_.y]);let C;switch(i.value){case"Linear":C=W.linear(l);break;case"Logarithmic":C=W.logarithmic(l);break;case"Exponential":C=W.exponential(l);break;case"Power":C=W.power(l);break;case"Polynomial":C=W.polynomial(l,{order:d.value});break;default:C=W.power(l);break}T.value=C.string,I.value=C.r2,M.value=t.map(_=>{try{const q=C.predict(_.x)[1];return{x:_.x,y:q}}catch{return{x:_.x,y:_.y}}}),console.log("✓ 基础拟合计算成功"),Z()}catch(t){console.error("基础拟合计算也失败:",t),T.value="Error: Calculation failed",I.value=0,M.value=[]}}}async function G(){try{const t=await(await fetch("/api/physical_measurements")).json();if(t&&t.success&&t.measurements&&t.measurements.length>0){const C=t.measurements[0].target?.new_long_px;if(C&&T.value){R.value=C;const _=T.value,q=_.match(/y\s*=\s*([0-9.-]+)(?:\s*\*\s*)?x\^?([0-9.-]+)/);if(q&&q[1]&&q[2]){const ye=parseFloat(q[1]),oe=parseFloat(q[2]);console.log(`Equation parsing: coefficient=${ye}, exponent=${oe}`),console.log(`Current pixel height: ${C}px`),console.log(`Equation: ${_}`);const se=Math.pow(C/ye,1/oe);if(console.log(`Raw calculation: (${C} / ${ye})^(1 / ${oe}) = ${se}`),isFinite(se)&&se>0){D.value.push(se),D.value.length>Un&&D.value.shift();const xe=D.value.reduce((Xe,Ke)=>Xe+Ke,0)/D.value.length;(Math.abs(xe-O.value)>.01||O.value===0)&&(O.value=xe,console.log(`✓ Smoothed distance: ${xe.toFixed(3)}m (${(xe*100).toFixed(1)}cm) [history: ${D.value.length} samples]`))}else console.warn("Invalid distance calculation result:",se),D.value.length===0&&(O.value=0)}else console.warn("Failed to parse equation for distance calculation:",_),O.value=0}}}catch(k){console.error("Failed to fetch current distance:",k),O.value=0,R.value=0}}function me(){N(),G(),K=window.setInterval(()=>{G()},1e3),console.log("实时监控已启动")}async function P(){try{V.value=!0,console.log("开始加载配置...");const k=await fetch("/config");if(!k.ok)throw new Error(`Config API failed: ${k.status}`);const t=await k.json(),l=await fetch("/config/custom_string");if(!l.ok)throw new Error(`Custom config API failed: ${l.status}`);const C=await l.json();console.log("Config API Response:",t),console.log("Custom Config API Response:",C);const _=C.success&&C.custom_config?C.custom_config:{};if(_.trendType&&(i.value=_.trendType,console.log("加载趋势类型:",_.trendType)),_.polyDegree&&(d.value=parseInt(_.polyDegree),console.log("加载多项式阶数:",_.polyDegree)),_.distancePoints)try{const q=JSON.parse(_.distancePoints);if(Array.isArray(q)&&q.length>0)w.value=q,console.log("加载测距点数据:",q.length,"个点");else throw new Error("解析的点数据无效")}catch(q){console.error("解析测距点数据失败:",q),w.value=[...m],await ee()}else console.log("使用默认测距点数据"),w.value=[...m],await ee();if((!Array.isArray(w.value)||w.value.length===0)&&(console.warn("点数据无效，使用默认值"),w.value=[...m]),y.value=new Array(w.value.length).fill(!1),_.distance_formula?e.value=_.distance_formula:_.Formula?e.value=_.Formula:_.formula&&(_.formula.includes("y = ")||(e.value=_.formula)),_.correction_factor){const q=parseFloat(_.correction_factor);!isNaN(q)&&q>0&&(s.value=q,console.log("加载边长修正系数:",q))}if(_.hsv_settings){const q=JSON.parse(_.hsv_settings);Object.assign(p,q)}else if(t.detection_params){const q=t.detection_params;Object.assign(p,{h1_min:q.h1_min||0,h1_max:q.h1_max||179,s1_min:q.s1_min||0,s1_max:q.s1_max||255,v1_min:q.v1_min||0,v1_max:q.v1_max||85,h2_min:q.h2_min||0,h2_max:q.h2_max||179,s2_min:q.s2_min||0,s2_max:q.s2_max||255,v2_min:q.v2_min||0,v2_max:q.v2_max||85,use_range2:q.use_range2||!1})}if(_.control_settings){const q=JSON.parse(_.control_settings);Object.assign(x,q)}else if(t.detection_params){const q=t.detection_params;Object.assign(x,{min_area:q.min_area||200,canny_min:q.canny_min||50,canny_max:q.canny_max||150})}if(_.area_filter_settings){const q=JSON.parse(_.area_filter_settings);Object.assign(o,q)}else t.area_filter_params&&Object.assign(o,t.area_filter_params);if(_.perspective_settings){const q=JSON.parse(_.perspective_settings);Object.assign(r,q)}else t.perspective_params&&Object.assign(r,t.perspective_params);if(_.black_detection_settings){const q=JSON.parse(_.black_detection_settings);Object.assign(n,q)}else t.black_detection_params&&Object.assign(n,t.black_detection_params);if(_.camera_settings){const q=JSON.parse(_.camera_settings);Object.assign(f,q)}else t.camera_params&&Object.assign(f,t.camera_params);_.fitting_equation?(T.value=_.fitting_equation,console.log("加载保存的拟合公式:",_.fitting_equation)):(console.log("没有保存的拟合公式，开始重新计算..."),j()),console.log("配置加载完成")}catch(k){console.error("Failed to load config:",k),console.log("加载配置失败，使用默认值"),w.value=[...m],y.value=new Array(w.value.length).fill(!1);try{j()}catch(t){console.error("默认拟合计算也失败:",t),T.value="y = 524.38x^-1.003",I.value=0}}finally{V.value=!1,console.log("配置加载状态重置为false")}}async function J(k,t){try{await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:k,value:t})})}catch(l){console.error(`Failed to save config ${k}:`,l)}}async function Z(){await J("fitting_equation",T.value)}async function ee(){await J("distancePoints",JSON.stringify(w.value))}async function Oe(){await J("trendType",i.value)}async function Pe(){await J("polyDegree",d.value.toString())}async function Se(){await J("distance_formula",e.value)}async function Ie(){await J("correction_factor",s.value.toString())}async function Le(){try{await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"hsv_settings",value:JSON.stringify(p)})}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"control_settings",value:JSON.stringify(x)})}),await Se()}catch(k){console.error("Error saving configurations:",k)}}async function te(){try{await fetch("/config/area_filter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"area_filter_settings",value:JSON.stringify(o)})}),console.log("Area filter settings updated")}catch(k){console.error("Error updating area filter:",k)}}async function ve(){try{await fetch("/config/perspective",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"perspective_settings",value:JSON.stringify(r)})}),console.log("Perspective settings updated")}catch(k){console.error("Error updating perspective:",k)}}async function ne(){try{await fetch("/config/black_detection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"black_detection_settings",value:JSON.stringify(n)})}),console.log("Black detection settings updated")}catch(k){console.error("Error updating black detection:",k)}}async function be(){try{await fetch("/config/camera",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"camera_settings",value:JSON.stringify(f)})}),console.log("Camera settings updated")}catch(k){console.error("Error updating camera:",k)}}async function Ee(){g.value=!0;try{await Promise.all([Le(),te(),ve(),ne(),be(),ee(),Oe(),Pe(),Se(),Ie()]),console.log("All configurations saved successfully"),alert("所有配置已保存成功")}catch(k){console.error("Error saving all configs:",k),alert("保存配置时出错，请检查控制台")}finally{g.value=!1}}async function qe(){F.value=!0;try{const t=await(await fetch("/config")).json();t.area_filter_params&&Object.assign(o,t.area_filter_params),t.perspective_params&&Object.assign(r,t.perspective_params),t.black_detection_params&&Object.assign(n,t.black_detection_params),t.camera_params&&Object.assign(f,t.camera_params),console.log("All configurations loaded successfully"),alert("所有配置已加载成功")}catch(k){console.error("Error loading all configs:",k),alert("加载配置时出错，请检查控制台")}finally{F.value=!1}}async function Je(){$.value=!0;try{Object.assign(o,{min_crop_area:2e4,max_crop_area:52e5,enable_area_filter:!0,a4_ratio_tolerance:.3,max_circularity:.7,min_solidity:.8,max_vertices:8,enable_a4_check:!0}),Object.assign(r,{enable:!0,target_width:210,target_height:297,a4_ratio:1.414285714285714,use_short_edge_for_measurement:!0}),Object.assign(n,{lower_h:0,lower_s:0,lower_v:0,upper_h:255,upper_s:255,upper_v:80,morph_kernel_size:3}),Object.assign(f,{index:0,width:1920,height:1080}),e.value="((524.38/x)**(1/1.003))*100",s.value=1.0261,Object.assign(p,{h1_min:0,h1_max:179,s1_min:0,s1_max:255,v1_min:0,v1_max:85,use_range2:!1,h2_min:0,h2_max:179,s2_min:0,s2_max:255,v2_min:0,v2_max:85}),Object.assign(x,{min_area:200,canny_min:50,canny_max:150}),i.value="Power",d.value=2,w.value=[...m],y.value=new Array(m.length).fill(!1),j(),await Promise.all([J("fitting_equation",""),J("Formula","")]),await Ee(),console.log("All settings reset to default values"),alert("所有设置已重置为默认值")}catch(k){console.error("Error resetting to default:",k),alert("重置设置时出错，请检查控制台")}finally{$.value=!1}}async function Ne(){A.value=!0;try{const l=(await(await fetch("/control/show_rectangles")).json()).show_all_rectangles;await fetch("/control/show_rectangles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({show:!l})}),console.log(`Rectangle display toggled to: ${!l}`),alert(`矩形显示已${l?"关闭":"开启"}`)}catch(k){console.error("Error toggling show rectangles:",k),alert("切换矩形显示时出错，请检查控制台")}finally{A.value=!1}}function re(){fetch("/control/hsv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(p)}),fetch("/control/canny",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(x)}),Le()}async function Ae(){w.value.push({x:1,y:0}),y.value.push(!1),await ee(),j()}async function Ve(k){w.value.splice(k,1),y.value.splice(k,1),await ee(),j()}async function Fe(k){try{y.value[k]=!0;const l=await(await fetch("/api/physical_measurements")).json();if(console.log("API Response:",l),l&&l.success&&l.measurements&&l.measurements.length>0){const C=l.measurements[0],_=C.target?.new_long_px;_&&w.value[k]?(w.value[k].y=_,await ee(),j(),console.log(`Point ${k} calibrated: x=${w.value[k].x}, y=${_}`)):console.error("Failed to get new_long_px from measurement target:",C)}else console.error("Invalid API response structure:",l)}catch(t){console.error("Failed to calibrate point:",t)}finally{y.value[k]=!1}}async function Qe(){try{const k=T.value,t=k.match(/y\s*=\s*([0-9.-]+)(?:\s*\*\s*)?x\^?([0-9.-]+)/);if(t&&t[1]&&t[2]){const l=parseFloat(t[1]),C=parseFloat(t[2]);if(console.log(`Parsed equation: coefficient=${l}, exponent=${C}`),C<0){const _=l,q=Math.abs(C),oe=`((${_.toFixed(2)}/x)**(1/${q.toFixed(3)}))*1`;await J("distance_formula",oe),e.value=oe,console.log(`Original equation: ${k}`),console.log(`Coefficient: ${l}, Exponent: ${C}`),console.log(`Converted formula: ${oe}`),alert(`矫正曲线已保存：${oe}`)}else console.error("Cannot convert positive exponent to distance formula format"),alert("无法转换正指数公式，请使用幂函数拟合")}else console.error("Failed to parse equation:",k),alert("无法解析拟合公式，请确保公式格式正确")}catch(k){console.error("Failed to save calibration curve:",k),alert("保存矫正曲线失败")}}return de(i,async()=>{await Oe(),j()}),de(d,async()=>{await Pe(),j()}),de(w,async()=>{await ee(),j()},{deep:!0}),Ct(()=>{console.log("SettingsPage 组件挂载"),V.value=!0,T.value="",I.value=0,M.value=[],P().then(()=>{console.log("配置加载完成，开始实时监控"),me()}).catch(k=>{console.error("配置加载失败:",k),V.value=!1})}),Wt(()=>{console.log("SettingsPage 组件卸载，清理资源"),N()}),(k,t)=>(ae(),Gt(Et,{padding:""},{default:U(()=>[t[51]||(t[51]=c("div",{class:"text-h5 q-mb-md"},"曲线拟合设置",-1)),c("div",Ca,[c("div",Sa,[h(ue,{flat:"",bordered:"",style:{"min-height":"400px"}},{default:U(()=>[h(ie,{style:{display:"flex","flex-direction":"column"}},{default:U(()=>[t[33]||(t[33]=c("div",{class:"text-h6 q-mb-md"},"视频流预览",-1)),c("div",qa,[c("div",Va,[t[31]||(t[31]=c("div",{class:"text-subtitle2 q-mb-xs"},"Processed Stream",-1)),c("img",{src:`/video/processed?formula=${encodeURIComponent(T.value)}`,width:"100%",alt:"Processed",style:{border:"1px solid #ddd","border-radius":"4px","object-fit":"contain"}},null,8,Ma)]),t[32]||(t[32]=c("div",{style:{display:"flex","flex-direction":"column"}},[c("div",{class:"text-subtitle2 q-mb-xs"},"Mask Stream"),c("img",{src:"/video/mask",width:"100%",alt:"Mask",style:{border:"1px solid #ddd","border-radius":"4px","object-fit":"contain"}})],-1))])]),_:1,__:[33]})]),_:1})]),c("div",Ta,[h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{"default-opened":"",icon:"show_chart",label:"曲线拟合设置","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[V.value?(ae(),le("div",$a,[h(jt,{color:"primary",size:"2em"}),t[34]||(t[34]=c("div",{class:"q-mt-sm"},"Loading configuration...",-1))])):(ae(),le("div",Oa,[c("div",Pa,[c("div",Ia,[h(Nt,{modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=l=>i.value=l),options:v,label:"趋势类型",dense:"","emit-value":"","map-options":"",style:{"min-width":"150px"}},null,8,["modelValue"])]),i.value==="Polynomial"?(ae(),le("div",La,[h(H,{modelValue:d.value,"onUpdate:modelValue":t[1]||(t[1]=l=>d.value=l),modelModifiers:{number:!0},label:"多项式阶数",type:"number",dense:"",style:{width:"100px"}},null,8,["modelValue"])])):nt("",!0),c("div",Ea,[h(ce,{label:"重新计算",color:"primary",dense:"",onClick:j})]),c("div",Na,[h(ce,{label:"保存矫正曲线",color:"secondary",dense:"",onClick:Qe})])]),h(je),c("div",Aa,[c("div",null,[t[35]||(t[35]=pe(" 拟合公式：",-1)),c("span",Fa,ge(T.value),1)]),c("div",null,[t[36]||(t[36]=pe(" R²: ",-1)),c("span",Ra,ge(I.value.toFixed(8)),1)]),c("div",Ba," 数据点数: "+ge(S.value.length)+" | 拟合类型: "+ge(X(i.value)),1)]),c("div",Da,[h(ya,{points:M.value,currentDistance:O.value,currentPixelHeight:R.value},null,8,["points","currentDistance","currentPixelHeight"])]),O.value>0?(ae(),le("div",ja,[c("div",Ua,[t[37]||(t[37]=pe(" 当前实时距离: ",-1)),c("span",za,ge((O.value*100).toFixed(1))+" cm",1),t[38]||(t[38]=pe(" | 像素高度: ",-1)),c("span",Ha,ge(R.value.toFixed(0))+" px",1)])])):nt("",!0),c("div",Ja,[t[39]||(t[39]=c("div",{class:"text-subtitle2 q-mb-sm"},"数据点管理",-1)),c("div",Qa,[(ae(!0),le(ot,null,lt(S.value,(l,C)=>(ae(),le("div",{key:C,class:"q-mb-sm"},[c("div",Xa,[h(H,{modelValue:l.x,"onUpdate:modelValue":_=>l.x=_,modelModifiers:{number:!0},label:"距离 (m)",type:"number",dense:""},null,8,["modelValue","onUpdate:modelValue"]),h(H,{modelValue:l.y,"onUpdate:modelValue":_=>l.y=_,modelModifiers:{number:!0},label:"像素高度",type:"number",dense:""},null,8,["modelValue","onUpdate:modelValue"]),h(ce,{icon:"tune",flat:"",dense:"",color:"primary",onClick:_=>Fe(C),loading:y.value[C],size:"sm",title:"矫正此点"},null,8,["onClick","loading"]),h(ce,{icon:"delete",flat:"",dense:"",color:"negative",onClick:_=>Ve(C),size:"sm"},null,8,["onClick"])])]))),128)),c("div",Ka,[h(ce,{icon:"add",label:"添加数据点",color:"primary",dense:"",onClick:Ae})])])])]))]),_:1})]),_:1})]),_:1}),h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{icon:"tune",label:"修正系数设置","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[t[40]||(t[40]=c("div",{class:"text-subtitle2 q-mb-sm"},"距离公式",-1)),h(H,{modelValue:e.value,"onUpdate:modelValue":[t[2]||(t[2]=l=>e.value=l),Se],label:"公式",dense:"",clearable:""},null,8,["modelValue"]),t[41]||(t[41]=c("div",{class:"text-caption text-grey-6 q-mt-xs"}," 用于距离计算的公式，格式如：((524.38/x)**(1/1.003))*100 ",-1)),h(je,{class:"q-my-md"}),t[42]||(t[42]=c("div",{class:"text-subtitle2 q-mb-sm"},"边长修正系数",-1)),h(H,{modelValue:s.value,"onUpdate:modelValue":[t[3]||(t[3]=l=>s.value=l),Ie],modelModifiers:{number:!0},label:"边长修正系数",type:"number",step:"0.0001",dense:""},null,8,["modelValue"]),t[43]||(t[43]=c("div",{class:"text-caption text-grey-6 q-mt-xs"}," 用于修正物理边长测量的系数，默认值：1.0261 ",-1))]),_:1,__:[40,41,42,43]})]),_:1})]),_:1}),h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{icon:"palette",label:"HSV颜色检测设置","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[t[48]||(t[48]=c("div",{class:"text-subtitle2"},"HSV 范围 1",-1)),(ae(),le(ot,null,lt(["h1_min","h1_max","s1_min","s1_max","v1_min","v1_max"],l=>c("div",{key:l,class:"q-mt-sm"},[c("label",Ya,[pe(ge(l.toUpperCase())+": ",1),h(Be,{"model-value":p[l],"onUpdate:modelValue":C=>{C!==null&&(p[l]=C,re())},min:(l.startsWith("h"),0),max:l.startsWith("h")?179:255,label:"","label-always":""},null,8,["model-value","onUpdate:modelValue","min","max"])])])),64)),c("div",Wa,[h(Te,{modelValue:p.use_range2,"onUpdate:modelValue":[t[4]||(t[4]=l=>p.use_range2=l),re],label:"启用第二个HSV范围"},null,8,["modelValue"])]),p.use_range2?(ae(),le("div",Ga,[t[44]||(t[44]=c("div",{class:"text-subtitle2"},"HSV 范围 2",-1)),(ae(),le(ot,null,lt(["h2_min","h2_max","s2_min","s2_max","v2_min","v2_max"],l=>c("div",{key:l,class:"q-mt-sm"},[c("label",Za,[pe(ge(l.toUpperCase())+": ",1),h(Be,{"model-value":p[l],"onUpdate:modelValue":C=>{C!==null&&(p[l]=C,re())},min:(l.startsWith("h"),0),max:l.startsWith("h")?179:255,label:"","label-always":""},null,8,["model-value","onUpdate:modelValue","min","max"])])])),64))])):nt("",!0),c("div",en,[t[45]||(t[45]=c("div",{class:"text-subtitle2"},"最小检测面积",-1)),h(H,{modelValue:x.min_area,"onUpdate:modelValue":[t[5]||(t[5]=l=>x.min_area=l),re],modelModifiers:{number:!0},type:"number",label:"最小面积",dense:""},null,8,["modelValue"])]),t[49]||(t[49]=c("div",{class:"text-subtitle2 q-mt-lg"},"Canny边缘检测",-1)),c("div",tn,[c("label",an,[t[46]||(t[46]=pe(" Canny 低阈值: ",-1)),h(Be,{modelValue:x.canny_min,"onUpdate:modelValue":[t[6]||(t[6]=l=>x.canny_min=l),re],min:0,max:255,label:"","label-always":""},null,8,["modelValue"])])]),c("div",nn,[c("label",on,[t[47]||(t[47]=pe(" Canny 高阈值: ",-1)),h(Be,{modelValue:x.canny_max,"onUpdate:modelValue":[t[7]||(t[7]=l=>x.canny_max=l),re],min:0,max:255,label:"","label-always":""},null,8,["modelValue"])])])]),_:1,__:[48,49]})]),_:1})]),_:1}),h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{icon:"filter_list",label:"面积过滤设置","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[c("div",ln,[c("div",rn,[h(H,{modelValue:o.min_crop_area,"onUpdate:modelValue":[t[8]||(t[8]=l=>o.min_crop_area=l),te],modelModifiers:{number:!0},type:"number",label:"最小裁剪面积",dense:""},null,8,["modelValue"])]),c("div",sn,[h(H,{modelValue:o.max_crop_area,"onUpdate:modelValue":[t[9]||(t[9]=l=>o.max_crop_area=l),te],modelModifiers:{number:!0},type:"number",label:"最大裁剪面积",dense:""},null,8,["modelValue"])])]),c("div",un,[h(Te,{modelValue:o.enable_area_filter,"onUpdate:modelValue":[t[10]||(t[10]=l=>o.enable_area_filter=l),te],label:"启用面积过滤"},null,8,["modelValue"])]),c("div",cn,[h(Te,{modelValue:o.enable_a4_check,"onUpdate:modelValue":[t[11]||(t[11]=l=>o.enable_a4_check=l),te],label:"启用A4比例检查"},null,8,["modelValue"])]),c("div",dn,[c("div",mn,[h(H,{modelValue:o.a4_ratio_tolerance,"onUpdate:modelValue":[t[12]||(t[12]=l=>o.a4_ratio_tolerance=l),te],modelModifiers:{number:!0},type:"number",step:"0.1",label:"A4比例容差",dense:""},null,8,["modelValue"])]),c("div",vn,[h(H,{modelValue:o.max_circularity,"onUpdate:modelValue":[t[13]||(t[13]=l=>o.max_circularity=l),te],modelModifiers:{number:!0},type:"number",step:"0.1",label:"最大圆形度",dense:""},null,8,["modelValue"])])]),c("div",fn,[c("div",pn,[h(H,{modelValue:o.min_solidity,"onUpdate:modelValue":[t[14]||(t[14]=l=>o.min_solidity=l),te],modelModifiers:{number:!0},type:"number",step:"0.1",label:"最小实心度",dense:""},null,8,["modelValue"])]),c("div",gn,[h(H,{modelValue:o.max_vertices,"onUpdate:modelValue":[t[15]||(t[15]=l=>o.max_vertices=l),te],modelModifiers:{number:!0},type:"number",label:"最大顶点数",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{icon:"crop",label:"梯形校正设置","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[c("div",hn,[h(Te,{modelValue:r.enable,"onUpdate:modelValue":[t[16]||(t[16]=l=>r.enable=l),ve],label:"启用梯形校正"},null,8,["modelValue"])]),c("div",bn,[c("div",yn,[h(H,{modelValue:r.target_width,"onUpdate:modelValue":[t[17]||(t[17]=l=>r.target_width=l),ve],modelModifiers:{number:!0},type:"number",label:"目标宽度 (mm)",dense:""},null,8,["modelValue"])]),c("div",_n,[h(H,{modelValue:r.target_height,"onUpdate:modelValue":[t[18]||(t[18]=l=>r.target_height=l),ve],modelModifiers:{number:!0},type:"number",label:"目标高度 (mm)",dense:""},null,8,["modelValue"])])]),c("div",xn,[c("div",wn,[h(H,{modelValue:r.a4_ratio,"onUpdate:modelValue":[t[19]||(t[19]=l=>r.a4_ratio=l),ve],modelModifiers:{number:!0},type:"number",step:"0.1",label:"A4比例",dense:""},null,8,["modelValue"])]),c("div",kn,[h(Te,{modelValue:r.use_short_edge_for_measurement,"onUpdate:modelValue":[t[20]||(t[20]=l=>r.use_short_edge_for_measurement=l),ve],label:"使用短边测量"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{icon:"contrast",label:"黑色检测设置","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[t[50]||(t[50]=c("div",{class:"text-subtitle2 q-mb-sm"},"HSV阈值设置",-1)),c("div",Cn,[c("div",Sn,[h(H,{modelValue:n.lower_h,"onUpdate:modelValue":[t[21]||(t[21]=l=>n.lower_h=l),ne],modelModifiers:{number:!0},type:"number",label:"色调下限",dense:""},null,8,["modelValue"])]),c("div",qn,[h(H,{modelValue:n.lower_s,"onUpdate:modelValue":[t[22]||(t[22]=l=>n.lower_s=l),ne],modelModifiers:{number:!0},type:"number",label:"饱和度下限",dense:""},null,8,["modelValue"])]),c("div",Vn,[h(H,{modelValue:n.lower_v,"onUpdate:modelValue":[t[23]||(t[23]=l=>n.lower_v=l),ne],modelModifiers:{number:!0},type:"number",label:"明度下限",dense:""},null,8,["modelValue"])])]),c("div",Mn,[c("div",Tn,[h(H,{modelValue:n.upper_h,"onUpdate:modelValue":[t[24]||(t[24]=l=>n.upper_h=l),ne],modelModifiers:{number:!0},type:"number",label:"色调上限",dense:""},null,8,["modelValue"])]),c("div",$n,[h(H,{modelValue:n.upper_s,"onUpdate:modelValue":[t[25]||(t[25]=l=>n.upper_s=l),ne],modelModifiers:{number:!0},type:"number",label:"饱和度上限",dense:""},null,8,["modelValue"])]),c("div",On,[h(H,{modelValue:n.upper_v,"onUpdate:modelValue":[t[26]||(t[26]=l=>n.upper_v=l),ne],modelModifiers:{number:!0},type:"number",label:"明度上限",dense:""},null,8,["modelValue"])])]),c("div",Pn,[h(H,{modelValue:n.morph_kernel_size,"onUpdate:modelValue":[t[27]||(t[27]=l=>n.morph_kernel_size=l),ne],modelModifiers:{number:!0},type:"number",label:"形态学核大小",dense:""},null,8,["modelValue"])])]),_:1,__:[50]})]),_:1})]),_:1}),h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{icon:"videocam",label:"摄像头设置","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[c("div",In,[c("div",Ln,[h(H,{modelValue:f.index,"onUpdate:modelValue":[t[28]||(t[28]=l=>f.index=l),be],modelModifiers:{number:!0},type:"number",label:"摄像头索引",dense:""},null,8,["modelValue"])]),c("div",En,[h(H,{modelValue:f.width,"onUpdate:modelValue":[t[29]||(t[29]=l=>f.width=l),be],modelModifiers:{number:!0},type:"number",label:"分辨率宽度",dense:""},null,8,["modelValue"])]),c("div",Nn,[h(H,{modelValue:f.height,"onUpdate:modelValue":[t[30]||(t[30]=l=>f.height=l),be],modelModifiers:{number:!0},type:"number",label:"分辨率高度",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),h(ue,{flat:"",bordered:""},{default:U(()=>[h(he,{icon:"settings",label:"全局操作","header-class":"text-primary"},{default:U(()=>[h(ie,null,{default:U(()=>[c("div",An,[c("div",Fn,[h(ce,{color:"warning",outline:"",label:"重置为默认值",onClick:Je,loading:$.value,icon:"refresh",class:"full-width"},null,8,["loading"])]),c("div",Rn,[h(ce,{color:"positive",label:"保存所有配置",onClick:Ee,loading:g.value,icon:"save",class:"full-width"},null,8,["loading"])])]),c("div",Bn,[c("div",Dn,[h(ce,{color:"info",outline:"",label:"加载配置",onClick:qe,loading:F.value,icon:"download",class:"full-width"},null,8,["loading"])]),c("div",jn,[h(ce,{color:"secondary",outline:"",label:"显示状态",onClick:Ne,loading:A.value,icon:"visibility",class:"full-width"},null,8,["loading"])])])]),_:1})]),_:1})]),_:1})])])]),_:1,__:[51]}))}}),Yn=At(zn,[["__scopeId","data-v-a78bd251"]]);export{Yn as default};
