import{u as Sl,f as Kt,g as wl,h as Cl,i as gt,j as ht,p as ol,k as kl,l as en,m as ql,n as tn,o as ln,q as nn,r as Vl,s as an,t as on,v as rn,w as il,x as un,y as sn,z as cn,A as Qt,B as dn,c as fn,C as rl,D as vn,E as mn,F as gn,b as Tt,G as Ml,H as hn,Q as pn,d as He,a as De,e as ce,_ as bn}from"./_plugin-vue_export-helper-C49nVI4K.js";import{d as Tl,e as El,f as Ol,g as Ze,i as yn,R as xn,j as Jt,k as _n,a as Sn,h as wt,l as wn,b as Al,m as Cn,Q as Ne}from"./QBtn-B4ybgiGu.js";import{c as Le,g as Fe,a as h,h as V,K as we,r as N,L as Xt,P as kn,M as et,N as ft,d as je,w as ge,o as Yt,b as Xe,O as qt,l as jt,Q as dt,R as St,T as Ll,S as qn,U as Vn,V as Mn,B as Tn,n as Pl,W as En,X as On,Y as yt,Z as Ue,_ as An,$ as Ln,F as Pn,G as In,a0 as $n,a1 as It,a2 as Fn,a3 as Bn,a4 as $t,a5 as st,s as Il,D as $e,C,x as Oe,m as ct,q as Rn,t as zn,u as ie,y as A,J as Ft,z as Ke,E as Qe,H as Bt,I as Rt}from"./index-BvDMq2Mw.js";import{c as Hn,s as Dn,g as Nn}from"./scroll-M0KiCOOi.js";import{C as jn}from"./chart-xFARWQBw.js";const Un=Le({name:"QField",inheritAttrs:!1,props:{...Kt,tag:{type:String,default:"label"}},emits:Sl,setup(){return wl(Cl({tagProp:!0}))}}),Wn={xs:8,sm:10,md:14,lg:20,xl:24},Kn=Le({name:"QChip",props:{...gt,...Tl,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:l}){const{proxy:{$q:r}}=Fe(),t=ht(e,r),o=El(e,Wn),d=h(()=>e.selected===!0||e.icon!==void 0),g=h(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),_=h(()=>e.iconRemove||r.iconSet.chip.remove),m=h(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),y=h(()=>{const v=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(v?` text-${v} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(m.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(t.value===!0?" q-chip--dark q-dark":"")}),k=h(()=>{const v=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},x={...v,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:v,remove:x}});function p(v){v.keyCode===13&&n(v)}function n(v){e.disable||(l("update:selected",!e.selected),l("click",v))}function s(v){(v.keyCode===void 0||v.keyCode===13)&&(we(v),e.disable===!1&&(l("update:modelValue",!1),l("remove")))}function c(){const v=[];m.value===!0&&v.push(V("div",{class:"q-focus-helper"})),d.value===!0&&v.push(V(Ze,{class:"q-chip__icon q-chip__icon--left",name:g.value}));const x=e.label!==void 0?[V("div",{class:"ellipsis"},[e.label])]:void 0;return v.push(V("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},yn(a.default,x))),e.iconRight&&v.push(V(Ze,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&v.push(V(Ze,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:_.value,...k.value.remove,onClick:s,onKeyup:s})),v}return()=>{if(e.modelValue===!1)return;const v={class:y.value,style:o.value};return m.value===!0&&Object.assign(v,k.value.chip,{onClick:n,onKeyup:p}),Ol("div",v,c(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[xn,e.ripple]])}}}),$l=Le({name:"QItem",props:{...gt,...Jt,tag:{type:String,default:"div"},active:{type:Boolean,default:null},clickable:Boolean,dense:Boolean,insetLevel:Number,tabindex:[String,Number],focused:Boolean,manualFocus:Boolean},emits:["click","keyup"],setup(e,{slots:a,emit:l}){const{proxy:{$q:r}}=Fe(),t=ht(e,r),{hasLink:o,linkAttrs:d,linkClass:g,linkTag:_,navigateOnClick:m}=_n(),y=N(null),k=N(null),p=h(()=>e.clickable===!0||o.value===!0||e.tag==="label"),n=h(()=>e.disable!==!0&&p.value===!0),s=h(()=>"q-item q-item-type row no-wrap"+(e.dense===!0?" q-item--dense":"")+(t.value===!0?" q-item--dark":"")+(o.value===!0&&e.active===null?g.value:e.active===!0?` q-item--active${e.activeClass!==void 0?` ${e.activeClass}`:""}`:"")+(e.disable===!0?" disabled":"")+(n.value===!0?" q-item--clickable q-link cursor-pointer "+(e.manualFocus===!0?"q-manual-focusable":"q-focusable q-hoverable")+(e.focused===!0?" q-manual-focusable--focused":""):"")),c=h(()=>e.insetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:16+e.insetLevel*56+"px"});function v(S){n.value===!0&&(k.value!==null&&S.qAvoidFocus!==!0&&(S.qKeyEvent!==!0&&document.activeElement===y.value?k.value.focus():document.activeElement===k.value&&y.value.focus()),m(S))}function x(S){if(n.value===!0&&Xt(S,[13,32])===!0){we(S),S.qKeyEvent=!0;const q=new MouseEvent("click",S);q.qKeyEvent=!0,y.value.dispatchEvent(q)}l("keyup",S)}function M(){const S=Sn(a.default,[]);return n.value===!0&&S.unshift(V("div",{class:"q-focus-helper",tabindex:-1,ref:k})),S}return()=>{const S={ref:y,class:s.value,style:c.value,role:"listitem",onClick:v,onKeyup:x};return n.value===!0?(S.tabindex=e.tabindex||"0",Object.assign(S,d.value)):p.value===!0&&(S["aria-disabled"]="true"),V(_.value,S,M())}}}),Vt=Le({name:"QItemSection",props:{avatar:Boolean,thumbnail:Boolean,side:Boolean,top:Boolean,noWrap:Boolean},setup(e,{slots:a}){const l=h(()=>`q-item__section column q-item__section--${e.avatar===!0||e.side===!0||e.thumbnail===!0?"side":"main"}`+(e.top===!0?" q-item__section--top justify-start":" justify-center")+(e.avatar===!0?" q-item__section--avatar":"")+(e.thumbnail===!0?" q-item__section--thumbnail":"")+(e.noWrap===!0?" q-item__section--nowrap":""));return()=>V("div",{class:l.value},wt(a.default))}}),Ut=Le({name:"QItemLabel",props:{overline:Boolean,caption:Boolean,header:Boolean,lines:[Number,String]},setup(e,{slots:a}){const l=h(()=>parseInt(e.lines,10)),r=h(()=>"q-item__label"+(e.overline===!0?" q-item__label--overline text-overline":"")+(e.caption===!0?" q-item__label--caption text-caption":"")+(e.header===!0?" q-item__label--header":"")+(l.value===1?" ellipsis":"")),t=h(()=>e.lines!==void 0&&l.value>1?{overflow:"hidden",display:"-webkit-box","-webkit-box-orient":"vertical","-webkit-line-clamp":l.value}:null);return()=>V("div",{style:t.value,class:r.value},wt(a.default))}});function Fl(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),kn.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const Qn={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},Jn={...Qn,contextMenu:Boolean};function Xn({showing:e,avoidEmit:a,configureAnchorEl:l}){const{props:r,proxy:t,emit:o}=Fe(),d=N(null);let g=null;function _(n){return d.value===null?!1:n===void 0||n.touches===void 0||n.touches.length<=1}const m={};l===void 0&&(Object.assign(m,{hide(n){t.hide(n)},toggle(n){t.toggle(n),n.qAnchorHandled=!0},toggleKey(n){Xt(n,13)===!0&&m.toggle(n)},contextClick(n){t.hide(n),et(n),je(()=>{t.show(n),n.qAnchorHandled=!0})},prevent:et,mobileTouch(n){if(m.mobileCleanup(n),_(n)!==!0)return;t.hide(n),d.value.classList.add("non-selectable");const s=n.target;ft(m,"anchor",[[s,"touchmove","mobileCleanup","passive"],[s,"touchend","mobileCleanup","passive"],[s,"touchcancel","mobileCleanup","passive"],[d.value,"contextmenu","prevent","notPassive"]]),g=setTimeout(()=>{g=null,t.show(n),n.qAnchorHandled=!0},300)},mobileCleanup(n){d.value.classList.remove("non-selectable"),g!==null&&(clearTimeout(g),g=null),e.value===!0&&n!==void 0&&Fl()}}),l=function(n=r.contextMenu){if(r.noParentEvent===!0||d.value===null)return;let s;n===!0?t.$q.platform.is.mobile===!0?s=[[d.value,"touchstart","mobileTouch","passive"]]:s=[[d.value,"mousedown","hide","passive"],[d.value,"contextmenu","contextClick","notPassive"]]:s=[[d.value,"click","toggle","passive"],[d.value,"keyup","toggleKey","passive"]],ft(m,"anchor",s)});function y(){qt(m,"anchor")}function k(n){for(d.value=n;d.value.classList.contains("q-anchor--skip");)d.value=d.value.parentNode;l()}function p(){if(r.target===!1||r.target===""||t.$el.parentNode===null)d.value=null;else if(r.target===!0)k(t.$el.parentNode);else{let n=r.target;if(typeof r.target=="string")try{n=document.querySelector(r.target)}catch{n=void 0}n!=null?(d.value=n.$el||n,l()):(d.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return ge(()=>r.contextMenu,n=>{d.value!==null&&(y(),l(n))}),ge(()=>r.target,()=>{d.value!==null&&y(),p()}),ge(()=>r.noParentEvent,n=>{d.value!==null&&(n===!0?y():l())}),Yt(()=>{p(),a!==!0&&r.modelValue===!0&&d.value===null&&o("update:modelValue",!1)}),Xe(()=>{g!==null&&clearTimeout(g),y()}),{anchorEl:d,canShow:_,anchorEvents:m}}function Yn(e,a){const l=N(null);let r;function t(g,_){const m=`${_!==void 0?"add":"remove"}EventListener`,y=_!==void 0?_:r;g!==window&&g[m]("scroll",y,jt.passive),window[m]("scroll",y,jt.passive),r=_}function o(){l.value!==null&&(t(l.value),l.value=null)}const d=ge(()=>e.noParentEvent,()=>{l.value!==null&&(o(),a())});return Xe(d),{localScrollTarget:l,unconfigureScrollTarget:o,changeScrollEvent:t}}const{notPassiveCapture:Et}=jt,tt=[];function Ot(e){const a=e.target;if(a===void 0||a.nodeType===8||a.classList.contains("no-pointer-events")===!0)return;let l=ol.length-1;for(;l>=0;){const r=ol[l].$;if(r.type.name==="QTooltip"){l--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;l--}for(let r=tt.length-1;r>=0;r--){const t=tt[r];if((t.anchorEl.value===null||t.anchorEl.value.contains(a)===!1)&&(a===document.body||t.innerRef.value!==null&&t.innerRef.value.contains(a)===!1))e.qClickOutside=!0,t.onClickOutside(e);else return}}function Gn(e){tt.push(e),tt.length===1&&(document.addEventListener("mousedown",Ot,Et),document.addEventListener("touchstart",Ot,Et))}function ul(e){const a=tt.findIndex(l=>l===e);a!==-1&&(tt.splice(a,1),tt.length===0&&(document.removeEventListener("mousedown",Ot,Et),document.removeEventListener("touchstart",Ot,Et)))}let sl,cl;function dl(e){const a=e.split(" ");return a.length!==2?!1:["top","center","bottom"].includes(a[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(a[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function Zn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Wt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Wt[`${e}#ltr`]=e,Wt[`${e}#rtl`]=e});function fl(e,a){const l=e.split(" ");return{vertical:l[0],horizontal:Wt[`${l[1]}#${a===!0?"rtl":"ltr"}`]}}function ea(e,a){let{top:l,left:r,right:t,bottom:o,width:d,height:g}=e.getBoundingClientRect();return a!==void 0&&(l-=a[1],r-=a[0],o+=a[1],t+=a[0],d+=a[0],g+=a[1]),{top:l,bottom:o,height:g,left:r,right:t,width:d,middle:r+(t-r)/2,center:l+(o-l)/2}}function ta(e,a,l){let{top:r,left:t}=e.getBoundingClientRect();return r+=a.top,t+=a.left,l!==void 0&&(r+=l[1],t+=l[0]),{top:r,bottom:r+1,height:1,left:t,right:t+1,width:1,middle:t,center:r}}function la(e,a){return{top:0,center:a/2,bottom:a,left:0,middle:e/2,right:e}}function vl(e,a,l,r){return{top:e[l.vertical]-a[r.vertical],left:e[l.horizontal]-a[r.horizontal]}}function Bl(e,a=0){if(e.targetEl===null||e.anchorEl===null||a>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Bl(e,a+1)},10);return}const{targetEl:l,offset:r,anchorEl:t,anchorOrigin:o,selfOrigin:d,absoluteOffset:g,fit:_,cover:m,maxHeight:y,maxWidth:k}=e;if(dt.is.ios===!0&&window.visualViewport!==void 0){const P=document.body.style,{offsetLeft:z,offsetTop:R}=window.visualViewport;z!==sl&&(P.setProperty("--q-pe-left",z+"px"),sl=z),R!==cl&&(P.setProperty("--q-pe-top",R+"px"),cl=R)}const{scrollLeft:p,scrollTop:n}=l,s=g===void 0?ea(t,m===!0?[0,0]:r):ta(t,g,r);Object.assign(l.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:k,maxHeight:y,visibility:"visible"});const{offsetWidth:c,offsetHeight:v}=l,{elWidth:x,elHeight:M}=_===!0||m===!0?{elWidth:Math.max(s.width,c),elHeight:m===!0?Math.max(s.height,v):v}:{elWidth:c,elHeight:v};let S={maxWidth:k,maxHeight:y};(_===!0||m===!0)&&(S.minWidth=s.width+"px",m===!0&&(S.minHeight=s.height+"px")),Object.assign(l.style,S);const q=la(x,M);let L=vl(s,q,o,d);if(g===void 0||r===void 0)zt(L,s,q,o,d);else{const{top:P,left:z}=L;zt(L,s,q,o,d);let R=!1;if(L.top!==P){R=!0;const K=2*r[1];s.center=s.top-=K,s.bottom-=K+2}if(L.left!==z){R=!0;const K=2*r[0];s.middle=s.left-=K,s.right-=K+2}R===!0&&(L=vl(s,q,o,d),zt(L,s,q,o,d))}S={top:L.top+"px",left:L.left+"px"},L.maxHeight!==void 0&&(S.maxHeight=L.maxHeight+"px",s.height>L.maxHeight&&(S.minHeight=S.maxHeight)),L.maxWidth!==void 0&&(S.maxWidth=L.maxWidth+"px",s.width>L.maxWidth&&(S.minWidth=S.maxWidth)),Object.assign(l.style,S),l.scrollTop!==n&&(l.scrollTop=n),l.scrollLeft!==p&&(l.scrollLeft=p)}function zt(e,a,l,r,t){const o=l.bottom,d=l.right,g=Hn(),_=window.innerHeight-g,m=document.body.clientWidth;if(e.top<0||e.top+o>_)if(t.vertical==="center")e.top=a[r.vertical]>_/2?Math.max(0,_-o):0,e.maxHeight=Math.min(o,_);else if(a[r.vertical]>_/2){const y=Math.min(_,r.vertical==="center"?a.center:r.vertical===t.vertical?a.bottom:a.top);e.maxHeight=Math.min(o,y),e.top=Math.max(0,y-o)}else e.top=Math.max(0,r.vertical==="center"?a.center:r.vertical===t.vertical?a.top:a.bottom),e.maxHeight=Math.min(o,_-e.top);if(e.left<0||e.left+d>m)if(e.maxWidth=Math.min(d,m),t.horizontal==="middle")e.left=a[r.horizontal]>m/2?Math.max(0,m-d):0;else if(a[r.horizontal]>m/2){const y=Math.min(m,r.horizontal==="middle"?a.middle:r.horizontal===t.horizontal?a.right:a.left);e.maxWidth=Math.min(d,y),e.left=Math.max(0,y-e.maxWidth)}else e.left=Math.max(0,r.horizontal==="middle"?a.middle:r.horizontal===t.horizontal?a.left:a.right),e.maxWidth=Math.min(d,m-e.left)}const na=Le({name:"QMenu",inheritAttrs:!1,props:{...Jn,...ql,...gt,...en,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:dl},self:{type:String,validator:dl},offset:{type:Array,validator:Zn},scrollTarget:Dn,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...kl,"click","escapeKey"],setup(e,{slots:a,emit:l,attrs:r}){let t=null,o,d,g;const _=Fe(),{proxy:m}=_,{$q:y}=m,k=N(null),p=N(!1),n=h(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),s=ht(e,y),{registerTick:c,removeTick:v}=tn(),{registerTimeout:x}=ln(),{transitionProps:M,transitionStyle:S}=nn(e),{localScrollTarget:q,changeScrollEvent:L,unconfigureScrollTarget:P}=Yn(e,Q),{anchorEl:z,canShow:R}=Xn({showing:p}),{hide:K}=Vl({showing:p,canShow:R,handleShow:pe,handleHide:b,hideOnRouteChange:n,processOnMount:!0}),{showPortal:X,hidePortal:se,renderPortal:D}=an(_,k,te,"menu"),le={anchorEl:z,innerRef:k,onClickOutside(T){if(e.persistent!==!0&&p.value===!0)return K(T),(T.type==="touchstart"||T.target.classList.contains("q-dialog__backdrop"))&&we(T),!0}},G=h(()=>fl(e.anchor||(e.cover===!0?"center middle":"bottom start"),y.lang.rtl)),he=h(()=>e.cover===!0?G.value:fl(e.self||"top start",y.lang.rtl)),ve=h(()=>(e.square===!0?" q-menu--square":"")+(s.value===!0?" q-menu--dark q-dark":"")),j=h(()=>e.autoClose===!0?{onClick:ee}:{}),Z=h(()=>p.value===!0&&e.persistent!==!0);ge(Z,T=>{T===!0?(cn(W),Gn(le)):(il(W),ul(le))});function de(){un(()=>{let T=k.value;T&&T.contains(document.activeElement)!==!0&&(T=T.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||T.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||T.querySelector("[autofocus], [data-autofocus]")||T,T.focus({preventScroll:!0}))})}function pe(T){if(t=e.noRefocus===!1?document.activeElement:null,on(ae),X(),Q(),o=void 0,T!==void 0&&(e.touchPosition||e.contextMenu)){const fe=St(T);if(fe.left!==void 0){const{top:xe,left:Pe}=z.value.getBoundingClientRect();o={left:fe.left-Pe,top:fe.top-xe}}}d===void 0&&(d=ge(()=>y.screen.width+"|"+y.screen.height+"|"+e.self+"|"+e.anchor+"|"+y.lang.rtl,U)),e.noFocus!==!0&&document.activeElement.blur(),c(()=>{U(),e.noFocus!==!0&&de()}),x(()=>{y.platform.is.ios===!0&&(g=e.autoClose,k.value.click()),U(),X(!0),l("show",T)},e.transitionDuration)}function b(T){v(),se(),O(!0),t!==null&&(T===void 0||T.qClickOutside!==!0)&&(((T?.type.indexOf("key")===0?t.closest('[tabindex]:not([tabindex^="-"])'):void 0)||t).focus(),t=null),x(()=>{se(!0),l("hide",T)},e.transitionDuration)}function O(T){o=void 0,d!==void 0&&(d(),d=void 0),(T===!0||p.value===!0)&&(rn(ae),P(),ul(le),il(W)),T!==!0&&(t=null)}function Q(){(z.value!==null||e.scrollTarget!==void 0)&&(q.value=Nn(z.value,e.scrollTarget),L(q.value,U))}function ee(T){g!==!0?(sn(m,T),l("click",T)):g=!1}function ae(T){Z.value===!0&&e.noFocus!==!0&&wn(k.value,T.target)!==!0&&de()}function W(T){e.noEscDismiss!==!0&&(l("escapeKey"),K(T))}function U(){Bl({targetEl:k.value,offset:e.offset,anchorEl:z.value,anchorOrigin:G.value,selfOrigin:he.value,absoluteOffset:o,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function te(){return V(Ll,M.value,()=>p.value===!0?V("div",{role:"menu",...r,ref:k,tabindex:-1,class:["q-menu q-position-engine scroll"+ve.value,r.class],style:[r.style,S.value],...j.value},wt(a.default)):null)}return Xe(O),Object.assign(m,{focus:de,updatePosition:U}),D}});let At=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const a=document.createElement("div");Object.assign(a.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(a),e.scrollLeft=-1e3,At=e.scrollLeft>=0,e.remove()}const Ae=1e3,aa=["start","center","end","start-force","center-force","end-force"],Rl=Array.prototype.filter,oa=window.getComputedStyle(document.body).overflowAnchor===void 0?Pl:function(e,a){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const l=e.children||[];Rl.call(l,t=>t.dataset&&t.dataset.qVsAnchor!==void 0).forEach(t=>{delete t.dataset.qVsAnchor});const r=l[a];r?.dataset&&(r.dataset.qVsAnchor="")}))};function mt(e,a){return e+a}function Ht(e,a,l,r,t,o,d,g){const _=e===window?document.scrollingElement||document.documentElement:e,m=t===!0?"offsetWidth":"offsetHeight",y={scrollStart:0,scrollViewSize:-d-g,scrollMaxSize:0,offsetStart:-d,offsetEnd:-g};if(t===!0?(e===window?(y.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,y.scrollViewSize+=document.documentElement.clientWidth):(y.scrollStart=_.scrollLeft,y.scrollViewSize+=_.clientWidth),y.scrollMaxSize=_.scrollWidth,o===!0&&(y.scrollStart=(At===!0?y.scrollMaxSize-y.scrollViewSize:0)-y.scrollStart)):(e===window?(y.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,y.scrollViewSize+=document.documentElement.clientHeight):(y.scrollStart=_.scrollTop,y.scrollViewSize+=_.clientHeight),y.scrollMaxSize=_.scrollHeight),l!==null)for(let k=l.previousElementSibling;k!==null;k=k.previousElementSibling)k.classList.contains("q-virtual-scroll--skip")===!1&&(y.offsetStart+=k[m]);if(r!==null)for(let k=r.nextElementSibling;k!==null;k=k.nextElementSibling)k.classList.contains("q-virtual-scroll--skip")===!1&&(y.offsetEnd+=k[m]);if(a!==e){const k=_.getBoundingClientRect(),p=a.getBoundingClientRect();t===!0?(y.offsetStart+=p.left-k.left,y.offsetEnd-=p.width):(y.offsetStart+=p.top-k.top,y.offsetEnd-=p.height),e!==window&&(y.offsetStart+=y.scrollStart),y.offsetEnd+=y.scrollMaxSize-y.offsetStart}return y}function ml(e,a,l,r){a==="end"&&(a=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(r===!0&&(a=(At===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-a),window.scrollTo(a,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,a):l===!0?(r===!0&&(a=(At===!0?e.scrollWidth-e.offsetWidth:0)-a),e.scrollLeft=a):e.scrollTop=a}function xt(e,a,l,r){if(l>=r)return 0;const t=a.length,o=Math.floor(l/Ae),d=Math.floor((r-1)/Ae)+1;let g=e.slice(o,d).reduce(mt,0);return l%Ae!==0&&(g-=a.slice(o*Ae,l).reduce(mt,0)),r%Ae!==0&&r!==t&&(g-=a.slice(r,d*Ae).reduce(mt,0)),g}const ia={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},gl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...ia};function ra({virtualScrollLength:e,getVirtualScrollTarget:a,getVirtualScrollEl:l,virtualScrollItemSizeComputed:r}){const t=Fe(),{props:o,emit:d,proxy:g}=t,{$q:_}=g;let m,y,k,p=[],n;const s=N(0),c=N(0),v=N({}),x=N(null),M=N(null),S=N(null),q=N({from:0,to:0}),L=h(()=>o.tableColspan!==void 0?o.tableColspan:100);r===void 0&&(r=h(()=>o.virtualScrollItemSize));const P=h(()=>r.value+";"+o.virtualScrollHorizontal),z=h(()=>P.value+";"+o.virtualScrollSliceRatioBefore+";"+o.virtualScrollSliceRatioAfter);ge(z,()=>{ve()}),ge(P,R);function R(){he(y,!0)}function K(b){he(b===void 0?y:b)}function X(b,O){const Q=a();if(Q==null||Q.nodeType===8)return;const ee=Ht(Q,l(),x.value,M.value,o.virtualScrollHorizontal,_.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd);k!==ee.scrollViewSize&&ve(ee.scrollViewSize),D(Q,ee,Math.min(e.value-1,Math.max(0,parseInt(b,10)||0)),0,aa.indexOf(O)!==-1?O:y!==-1&&b>y?"end":"start")}function se(){const b=a();if(b==null||b.nodeType===8)return;const O=Ht(b,l(),x.value,M.value,o.virtualScrollHorizontal,_.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd),Q=e.value-1,ee=O.scrollMaxSize-O.offsetStart-O.offsetEnd-c.value;if(m===O.scrollStart)return;if(O.scrollMaxSize<=0){D(b,O,0,0);return}k!==O.scrollViewSize&&ve(O.scrollViewSize),le(q.value.from);const ae=Math.floor(O.scrollMaxSize-Math.max(O.scrollViewSize,O.offsetEnd)-Math.min(n[Q],O.scrollViewSize/2));if(ae>0&&Math.ceil(O.scrollStart)>=ae){D(b,O,Q,O.scrollMaxSize-O.offsetEnd-p.reduce(mt,0));return}let W=0,U=O.scrollStart-O.offsetStart,te=U;if(U<=ee&&U+O.scrollViewSize>=s.value)U-=s.value,W=q.value.from,te=U;else for(let T=0;U>=p[T]&&W<Q;T++)U-=p[T],W+=Ae;for(;U>0&&W<Q;)U-=n[W],U>-O.scrollViewSize?(W++,te=U):te=n[W]+U;D(b,O,W,te)}function D(b,O,Q,ee,ae){const W=typeof ae=="string"&&ae.indexOf("-force")!==-1,U=W===!0?ae.replace("-force",""):ae,te=U!==void 0?U:"start";let T=Math.max(0,Q-v.value[te]),fe=T+v.value.total;fe>e.value&&(fe=e.value,T=Math.max(0,fe-v.value.total)),m=O.scrollStart;const xe=T!==q.value.from||fe!==q.value.to;if(xe===!1&&U===void 0){Z(Q);return}const{activeElement:Pe}=document,_e=S.value;xe===!0&&_e!==null&&_e!==Pe&&_e.contains(Pe)===!0&&(_e.addEventListener("focusout",G),setTimeout(()=>{_e?.removeEventListener("focusout",G)})),oa(_e,Q-T);const Se=U!==void 0?n.slice(T,Q).reduce(mt,0):0;if(xe===!0){const Ve=fe>=q.value.from&&T<=q.value.to?q.value.to:fe;q.value={from:T,to:Ve},s.value=xt(p,n,0,T),c.value=xt(p,n,fe,e.value),requestAnimationFrame(()=>{q.value.to!==fe&&m===O.scrollStart&&(q.value={from:q.value.from,to:fe},c.value=xt(p,n,fe,e.value))})}requestAnimationFrame(()=>{if(m!==O.scrollStart)return;xe===!0&&le(T);const Ve=n.slice(T,Q).reduce(mt,0),Ce=Ve+O.offsetStart+s.value,Be=Ce+n[Q];let Re=Ce+ee;if(U!==void 0){const $=Ve-Se,u=O.scrollStart+$;Re=W!==!0&&u<Ce&&Be<u+O.scrollViewSize?u:U==="end"?Be-O.scrollViewSize:Ce-(U==="start"?0:Math.round((O.scrollViewSize-n[Q])/2))}m=Re,ml(b,Re,o.virtualScrollHorizontal,_.lang.rtl),Z(Q)})}function le(b){const O=S.value;if(O){const Q=Rl.call(O.children,T=>T.classList&&T.classList.contains("q-virtual-scroll--skip")===!1),ee=Q.length,ae=o.virtualScrollHorizontal===!0?T=>T.getBoundingClientRect().width:T=>T.offsetHeight;let W=b,U,te;for(let T=0;T<ee;){for(U=ae(Q[T]),T++;T<ee&&Q[T].classList.contains("q-virtual-scroll--with-prev")===!0;)U+=ae(Q[T]),T++;te=U-n[W],te!==0&&(n[W]+=te,p[Math.floor(W/Ae)]+=te),W++}}}function G(){S.value?.focus()}function he(b,O){const Q=1*r.value;(O===!0||Array.isArray(n)===!1)&&(n=[]);const ee=n.length;n.length=e.value;for(let W=e.value-1;W>=ee;W--)n[W]=Q;const ae=Math.floor((e.value-1)/Ae);p=[];for(let W=0;W<=ae;W++){let U=0;const te=Math.min((W+1)*Ae,e.value);for(let T=W*Ae;T<te;T++)U+=n[T];p.push(U)}y=-1,m=void 0,s.value=xt(p,n,0,q.value.from),c.value=xt(p,n,q.value.to,e.value),b>=0?(le(q.value.from),je(()=>{X(b)})):de()}function ve(b){if(b===void 0&&typeof window<"u"){const U=a();U!=null&&U.nodeType!==8&&(b=Ht(U,l(),x.value,M.value,o.virtualScrollHorizontal,_.lang.rtl,o.virtualScrollStickySizeStart,o.virtualScrollStickySizeEnd).scrollViewSize)}k=b;const O=parseFloat(o.virtualScrollSliceRatioBefore)||0,Q=parseFloat(o.virtualScrollSliceRatioAfter)||0,ee=1+O+Q,ae=b===void 0||b<=0?1:Math.ceil(b/r.value),W=Math.max(1,ae,Math.ceil((o.virtualScrollSliceSize>0?o.virtualScrollSliceSize:10)/ee));v.value={total:Math.ceil(W*ee),start:Math.ceil(W*O),center:Math.ceil(W*(.5+O)),end:Math.ceil(W*(1+O)),view:ae}}function j(b,O){const Q=o.virtualScrollHorizontal===!0?"width":"height",ee={["--q-virtual-scroll-item-"+Q]:r.value+"px"};return[b==="tbody"?V(b,{class:"q-virtual-scroll__padding",key:"before",ref:x},[V("tr",[V("td",{style:{[Q]:`${s.value}px`,...ee},colspan:L.value})])]):V(b,{class:"q-virtual-scroll__padding",key:"before",ref:x,style:{[Q]:`${s.value}px`,...ee}}),V(b,{class:"q-virtual-scroll__content",key:"content",ref:S,tabindex:-1},O.flat()),b==="tbody"?V(b,{class:"q-virtual-scroll__padding",key:"after",ref:M},[V("tr",[V("td",{style:{[Q]:`${c.value}px`,...ee},colspan:L.value})])]):V(b,{class:"q-virtual-scroll__padding",key:"after",ref:M,style:{[Q]:`${c.value}px`,...ee}})]}function Z(b){y!==b&&(o.onVirtualScroll!==void 0&&d("virtualScroll",{index:b,from:q.value.from,to:q.value.to-1,direction:b<y?"decrease":"increase",ref:g}),y=b)}ve();const de=qn(se,_.platform.is.ios===!0?120:35);Vn(()=>{ve()});let pe=!1;return Mn(()=>{pe=!0}),Tn(()=>{if(pe!==!0)return;const b=a();m!==void 0&&b!==void 0&&b!==null&&b.nodeType!==8?ml(b,m,o.virtualScrollHorizontal,_.lang.rtl):X(y)}),Xe(()=>{de.cancel()}),Object.assign(g,{scrollTo:X,reset:R,refresh:K}),{virtualScrollSliceRange:q,virtualScrollSliceSizeComputed:v,setVirtualScrollSize:ve,onVirtualScrollEvt:de,localResetVirtualScroll:he,padVirtualScroll:j,scrollTo:X,reset:R,refresh:K}}function vt(e,a,l){return l<=a?a:Math.min(l,Math.max(a,e))}function hl(e,a,l){if(l<=a)return a;const r=l-a+1;let t=a+(e-a)%r;return t<a&&(t=r+t),t===0?0:t}const pl=e=>["add","add-unique","toggle"].includes(e),ua=".*+?^${}()|[]\\",sa=Object.keys(Kt);function Dt(e,a){if(typeof e=="function")return e;const l=e!==void 0?e:a;return r=>r!==null&&typeof r=="object"&&l in r?r[l]:r}const ca=Le({name:"QSelect",inheritAttrs:!1,props:{...gl,...Qt,...Kt,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:pl},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:gl.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...Sl,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:a,emit:l}){const{proxy:r}=Fe(),{$q:t}=r,o=N(!1),d=N(!1),g=N(-1),_=N(""),m=N(!1),y=N(!1);let k=null,p=null,n,s,c,v=null,x,M,S,q;const L=N(null),P=N(null),z=N(null),R=N(null),K=N(null),X=dn(e),se=vn(el),D=h(()=>Array.isArray(e.options)?e.options.length:0),le=h(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:G,virtualScrollSliceSizeComputed:he,localResetVirtualScroll:ve,padVirtualScroll:j,onVirtualScrollEvt:Z,scrollTo:de,setVirtualScrollSize:pe}=ra({virtualScrollLength:D,getVirtualScrollTarget:Hl,getVirtualScrollEl:at,virtualScrollItemSizeComputed:le}),b=Cl(),O=h(()=>{const i=e.mapOptions===!0&&e.multiple!==!0,F=e.modelValue!==void 0&&(e.modelValue!==null||i===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const B=e.mapOptions===!0&&n!==void 0?n:[],Y=F.map(ue=>w(ue,B));return e.modelValue===null&&i===!0?Y.filter(ue=>ue!==null):Y}return F}),Q=h(()=>{const i={};return sa.forEach(F=>{const B=e[F];B!==void 0&&(i[F]=B)}),i}),ee=h(()=>e.optionsDark===null?b.isDark.value:e.optionsDark),ae=h(()=>rl(O.value)),W=h(()=>{let i="q-field__input q-placeholder col";return e.hideSelected===!0||O.value.length===0?[i,e.inputClass]:(i+=" q-field__input--padding",e.inputClass===void 0?i:[i,e.inputClass])}),U=h(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),te=h(()=>D.value===0),T=h(()=>O.value.map(i=>I.value(i)).join(", ")),fe=h(()=>e.displayValue!==void 0?e.displayValue:T.value),xe=h(()=>e.optionsHtml===!0?()=>!0:i=>i?.html===!0),Pe=h(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||O.value.some(xe.value))),_e=h(()=>b.focused.value===!0?e.tabindex:-1),Se=h(()=>{const i={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":o.value===!0?"true":"false","aria-controls":`${b.targetUid.value}_lb`};return g.value>=0&&(i["aria-activedescendant"]=`${b.targetUid.value}_${g.value}`),i}),Ve=h(()=>({id:`${b.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),Ce=h(()=>O.value.map((i,F)=>({index:F,opt:i,html:xe.value(i),selected:!0,removeAtIndex:We,toggleOption:Te,tabindex:_e.value}))),Be=h(()=>{if(D.value===0)return[];const{from:i,to:F}=G.value;return e.options.slice(i,F).map((B,Y)=>{const ue=E.value(B)===!0,oe=J(B)===!0,ye=i+Y,me={clickable:!0,active:oe,activeClass:u.value,manualFocus:!0,focused:!1,disable:ue,tabindex:-1,dense:e.optionsDense,dark:ee.value,role:"option","aria-selected":oe===!0?"true":"false",id:`${b.targetUid.value}_${ye}`,onClick:()=>{Te(B)}};return ue!==!0&&(g.value===ye&&(me.focused=!0),t.platform.is.desktop===!0&&(me.onMousemove=()=>{o.value===!0&&Ie(ye)})),{index:ye,opt:B,html:xe.value(B),label:I.value(B),selected:me.active,focused:me.focused,toggleOption:Te,setOptionIndex:Ie,itemProps:me}})}),Re=h(()=>e.dropdownIcon!==void 0?e.dropdownIcon:t.iconSet.arrow.dropdown),$=h(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),u=h(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),f=h(()=>Dt(e.optionValue,"value")),I=h(()=>Dt(e.optionLabel,"label")),E=h(()=>Dt(e.optionDisable,"disable")),H=h(()=>O.value.map(f.value)),ze=h(()=>{const i={onInput:el,onChange:se,onKeydown:nt,onKeyup:be,onKeypress:Ee,onFocus:ne,onClick(F){s===!0&&Ue(F)}};return i.onCompositionstart=i.onCompositionupdate=i.onCompositionend=se,i});ge(O,i=>{n=i,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&b.innerLoading.value!==!0&&(d.value!==!0&&o.value!==!0||ae.value!==!0)&&(c!==!0&&ut(),(d.value===!0||o.value===!0)&&ot(""))},{immediate:!0}),ge(()=>e.fillInput,ut),ge(o,Lt),ge(D,Zl);function ke(i){return e.emitValue===!0?f.value(i):i}function qe(i){if(i!==-1&&i<O.value.length)if(e.multiple===!0){const F=e.modelValue.slice();l("remove",{index:i,value:F.splice(i,1)[0]}),l("update:modelValue",F)}else l("update:modelValue",null)}function We(i){qe(i),b.focus()}function pt(i,F){const B=ke(i);if(e.multiple!==!0){e.fillInput===!0&&bt(I.value(i),!0,!0),l("update:modelValue",B);return}if(O.value.length===0){l("add",{index:0,value:B}),l("update:modelValue",e.multiple===!0?[B]:B);return}if(F===!0&&J(i)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const Y=e.modelValue.slice();l("add",{index:Y.length,value:B}),Y.push(B),l("update:modelValue",Y)}function Te(i,F){if(b.editable.value!==!0||i===void 0||E.value(i)===!0)return;const B=f.value(i);if(e.multiple!==!0){F!==!0&&(bt(e.fillInput===!0?I.value(i):"",!0,!0),Ye()),P.value?.focus(),(O.value.length===0||yt(f.value(O.value[0]),B)!==!0)&&l("update:modelValue",e.emitValue===!0?B:i);return}if((s!==!0||m.value===!0)&&b.focus(),ne(),O.value.length===0){const oe=e.emitValue===!0?B:i;l("add",{index:0,value:oe}),l("update:modelValue",e.multiple===!0?[oe]:oe);return}const Y=e.modelValue.slice(),ue=H.value.findIndex(oe=>yt(oe,B));if(ue!==-1)l("remove",{index:ue,value:Y.splice(ue,1)[0]});else{if(e.maxValues!==void 0&&Y.length>=e.maxValues)return;const oe=e.emitValue===!0?B:i;l("add",{index:Y.length,value:oe}),Y.push(oe)}l("update:modelValue",Y)}function Ie(i){if(t.platform.is.desktop!==!0)return;const F=i!==-1&&i<D.value?i:-1;g.value!==F&&(g.value=F)}function lt(i=1,F){if(o.value===!0){let B=g.value;do B=hl(B+i,-1,D.value-1);while(B!==-1&&B!==g.value&&E.value(e.options[B])===!0);g.value!==B&&(Ie(B),de(B),F!==!0&&e.useInput===!0&&e.fillInput===!0&&Ct(B>=0?I.value(e.options[B]):x,!0))}}function w(i,F){const B=Y=>yt(f.value(Y),i);return e.options.find(B)||F.find(B)||i}function J(i){const F=f.value(i);return H.value.find(B=>yt(B,F))!==void 0}function ne(i){e.useInput===!0&&P.value!==null&&(i===void 0||P.value===i.target&&i.target.value===T.value)&&P.value.select()}function re(i){Xt(i,27)===!0&&o.value===!0&&(Ue(i),Ye(),ut()),l("keyup",i)}function be(i){const{value:F}=i.target;if(i.keyCode!==void 0){re(i);return}if(i.target.value="",k!==null&&(clearTimeout(k),k=null),p!==null&&(clearTimeout(p),p=null),ut(),typeof F=="string"&&F.length!==0){const B=F.toLocaleLowerCase(),Y=oe=>{const ye=e.options.find(me=>String(oe.value(me)).toLocaleLowerCase()===B);return ye===void 0?!1:(O.value.indexOf(ye)===-1?Te(ye):Ye(),!0)},ue=oe=>{Y(f)!==!0&&oe!==!0&&Y(I)!==!0&&ot(F,!0,()=>ue(!0))};ue()}else b.clearValue(i)}function Ee(i){l("keypress",i)}function nt(i){if(l("keydown",i),An(i)===!0)return;const F=_.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),B=i.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(g.value!==-1||F===!0);if(i.keyCode===27){et(i);return}if(i.keyCode===9&&B===!1){it();return}if(i.target===void 0||i.target.id!==b.targetUid.value||b.editable.value!==!0)return;if(i.keyCode===40&&b.innerLoading.value!==!0&&o.value===!1){we(i),rt();return}if(i.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&_.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?qe(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(i.keyCode===35||i.keyCode===36)&&(typeof _.value!="string"||_.value.length===0)&&(we(i),g.value=-1,lt(i.keyCode===36?1:-1,e.multiple)),(i.keyCode===33||i.keyCode===34)&&he.value!==void 0&&(we(i),g.value=Math.max(-1,Math.min(D.value,g.value+(i.keyCode===33?-1:1)*he.value.view)),lt(i.keyCode===33?1:-1,e.multiple)),(i.keyCode===38||i.keyCode===40)&&(we(i),lt(i.keyCode===38?-1:1,e.multiple));const Y=D.value;if((S===void 0||q<Date.now())&&(S=""),Y>0&&e.useInput!==!0&&i.key!==void 0&&i.key.length===1&&i.altKey===!1&&i.ctrlKey===!1&&i.metaKey===!1&&(i.keyCode!==32||S.length!==0)){o.value!==!0&&rt(i);const ue=i.key.toLocaleLowerCase(),oe=S.length===1&&S[0]===ue;q=Date.now()+1500,oe===!1&&(we(i),S+=ue);const ye=new RegExp("^"+S.split("").map(Pt=>ua.indexOf(Pt)!==-1?"\\"+Pt:Pt).join(".*"),"i");let me=g.value;if(oe===!0||me<0||ye.test(I.value(e.options[me]))!==!0)do me=hl(me+1,-1,Y-1);while(me!==g.value&&(E.value(e.options[me])===!0||ye.test(I.value(e.options[me]))!==!0));g.value!==me&&je(()=>{Ie(me),de(me),me>=0&&e.useInput===!0&&e.fillInput===!0&&Ct(I.value(e.options[me]),!0)});return}if(!(i.keyCode!==13&&(i.keyCode!==32||e.useInput===!0||S!=="")&&(i.keyCode!==9||B===!1))){if(i.keyCode!==9&&we(i),g.value!==-1&&g.value<Y){Te(e.options[g.value]);return}if(F===!0){const ue=(oe,ye)=>{if(ye){if(pl(ye)!==!0)return}else ye=e.newValueMode;if(bt("",e.multiple!==!0,!0),oe==null)return;(ye==="toggle"?Te:pt)(oe,ye==="add-unique"),e.multiple!==!0&&(P.value?.focus(),Ye())};if(e.onNewValue!==void 0?l("newValue",_.value,ue):ue(_.value),e.multiple!==!0)return}o.value===!0?it():b.innerLoading.value!==!0&&rt()}}function at(){return s===!0?K.value:z.value!==null&&z.value.contentEl!==null?z.value.contentEl:void 0}function Hl(){return at()}function Dl(){return e.hideSelected===!0?[]:a["selected-item"]!==void 0?Ce.value.map(i=>a["selected-item"](i)).slice():a.selected!==void 0?[].concat(a.selected()):e.useChips===!0?Ce.value.map((i,F)=>V(Kn,{key:"option-"+F,removable:b.editable.value===!0&&E.value(i.opt)!==!0,dense:!0,textColor:e.color,tabindex:_e.value,onRemove(){i.removeAtIndex(F)}},()=>V("span",{class:"ellipsis",[i.html===!0?"innerHTML":"textContent"]:I.value(i.opt)}))):[V("span",{class:"ellipsis",[Pe.value===!0?"innerHTML":"textContent"]:fe.value})]}function Zt(){if(te.value===!0)return a["no-option"]!==void 0?a["no-option"]({inputValue:_.value}):void 0;const i=a.option!==void 0?a.option:B=>V($l,{key:B.index,...B.itemProps},()=>V(Vt,()=>V(Ut,()=>V("span",{[B.html===!0?"innerHTML":"textContent"]:B.label}))));let F=j("div",Be.value.map(i));return a["before-options"]!==void 0&&(F=a["before-options"]().concat(F)),Al(a["after-options"],F)}function Nl(i,F){const B=F===!0?{...Se.value,...b.splitAttrs.attributes.value}:void 0,Y={ref:F===!0?P:void 0,key:"i_t",class:W.value,style:e.inputStyle,value:_.value!==void 0?_.value:"",type:"search",...B,id:F===!0?b.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":i===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...ze.value};return i!==!0&&s===!0&&(Array.isArray(Y.class)===!0?Y.class=[...Y.class,"no-pointer-events"]:Y.class+=" no-pointer-events"),V("input",Y)}function el(i){k!==null&&(clearTimeout(k),k=null),p!==null&&(clearTimeout(p),p=null),!(i&&i.target&&i.target.qComposing===!0)&&(Ct(i.target.value||""),c=!0,x=_.value,b.focused.value!==!0&&(s!==!0||m.value===!0)&&b.focus(),e.onFilter!==void 0&&(k=setTimeout(()=>{k=null,ot(_.value)},e.inputDebounce)))}function Ct(i,F){_.value!==i&&(_.value=i,F===!0||e.inputDebounce===0||e.inputDebounce==="0"?l("inputValue",i):p=setTimeout(()=>{p=null,l("inputValue",i)},e.inputDebounce))}function bt(i,F,B){c=B!==!0,e.useInput===!0&&(Ct(i,!0),(F===!0||B!==!0)&&(x=i),F!==!0&&ot(i))}function ot(i,F,B){if(e.onFilter===void 0||F!==!0&&b.focused.value!==!0)return;b.innerLoading.value===!0?l("filterAbort"):(b.innerLoading.value=!0,y.value=!0),i!==""&&e.multiple!==!0&&O.value.length!==0&&c!==!0&&i===I.value(O.value[0])&&(i="");const Y=setTimeout(()=>{o.value===!0&&(o.value=!1)},10);v!==null&&clearTimeout(v),v=Y,l("filter",i,(ue,oe)=>{(F===!0||b.focused.value===!0)&&v===Y&&(clearTimeout(v),typeof ue=="function"&&ue(),y.value=!1,je(()=>{b.innerLoading.value=!1,b.editable.value===!0&&(F===!0?o.value===!0&&Ye():o.value===!0?Lt(!0):o.value=!0),typeof oe=="function"&&je(()=>{oe(r)}),typeof B=="function"&&je(()=>{B(r)})}))},()=>{b.focused.value===!0&&v===Y&&(clearTimeout(v),b.innerLoading.value=!1,y.value=!1),o.value===!0&&(o.value=!1)})}function jl(){return V(na,{ref:z,class:U.value,style:e.popupContentStyle,modelValue:o.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&te.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:ee.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:$.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ve.value,onScrollPassive:Z,onBeforeShow:ll,onBeforeHide:Ul,onShow:Wl},Zt)}function Ul(i){nl(i),it()}function Wl(){pe()}function Kl(i){Ue(i),P.value?.focus(),m.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Ql(i){Ue(i),je(()=>{m.value=!1})}function Jl(){const i=[V(Un,{class:`col-auto ${b.fieldClass.value}`,...Q.value,for:b.targetUid.value,dark:ee.value,square:!0,loading:y.value,itemAligned:!1,filled:!0,stackLabel:_.value.length!==0,...b.splitAttrs.listeners.value,onFocus:Kl,onBlur:Ql},{...a,rawControl:()=>b.getControl(!0),before:void 0,after:void 0})];return o.value===!0&&i.push(V("div",{ref:K,class:U.value+" scroll",style:e.popupContentStyle,...Ve.value,onClick:et,onScrollPassive:Z},Zt())),V(fn,{ref:R,modelValue:d.value,position:e.useInput===!0?"top":void 0,transitionShow:M,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:ll,onBeforeHide:Xl,onHide:Yl,onShow:Gl},()=>V("div",{class:"q-select__dialog"+(ee.value===!0?" q-select__dialog--dark q-dark":"")+(m.value===!0?" q-select__dialog--focused":"")},i))}function Xl(i){nl(i),R.value!==null&&R.value.__updateRefocusTarget(b.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),b.focused.value=!1}function Yl(i){Ye(),b.focused.value===!1&&l("blur",i),ut()}function Gl(){const i=document.activeElement;(i===null||i.id!==b.targetUid.value)&&P.value!==null&&P.value!==i&&P.value.focus(),pe()}function it(){d.value!==!0&&(g.value=-1,o.value===!0&&(o.value=!1),b.focused.value===!1&&(v!==null&&(clearTimeout(v),v=null),b.innerLoading.value===!0&&(l("filterAbort"),b.innerLoading.value=!1,y.value=!1)))}function rt(i){b.editable.value===!0&&(s===!0?(b.onControlFocusin(i),d.value=!0,je(()=>{b.focus()})):b.focus(),e.onFilter!==void 0?ot(_.value):(te.value!==!0||a["no-option"]!==void 0)&&(o.value=!0))}function Ye(){d.value=!1,it()}function ut(){e.useInput===!0&&bt(e.multiple!==!0&&e.fillInput===!0&&O.value.length!==0&&I.value(O.value[0])||"",!0,!0)}function Lt(i){let F=-1;if(i===!0){if(O.value.length!==0){const B=f.value(O.value[0]);F=e.options.findIndex(Y=>yt(f.value(Y),B))}ve(F)}Ie(F)}function Zl(i,F){o.value===!0&&b.innerLoading.value===!1&&(ve(-1,!0),je(()=>{o.value===!0&&b.innerLoading.value===!1&&(i>F?ve():Lt(!0))}))}function tl(){d.value===!1&&z.value!==null&&z.value.updatePosition()}function ll(i){i!==void 0&&Ue(i),l("popupShow",i),b.hasPopupOpen=!0,b.onControlFocusin(i)}function nl(i){i!==void 0&&Ue(i),l("popupHide",i),b.hasPopupOpen=!1,b.onControlFocusout(i)}function al(){s=t.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?a["no-option"]!==void 0||e.onFilter!==void 0||te.value===!1:!0),M=t.platform.is.ios===!0&&s===!0&&e.useInput===!0?"fade":e.transitionShow}return En(al),On(tl),al(),Xe(()=>{k!==null&&clearTimeout(k),p!==null&&clearTimeout(p)}),Object.assign(r,{showPopup:rt,hidePopup:Ye,removeAtIndex:qe,add:pt,toggleOption:Te,getOptionIndex:()=>g.value,setOptionIndex:Ie,moveOptionSelection:lt,filter:ot,updateMenuPosition:tl,updateInputValue:bt,isOptionSelected:J,getEmittingOptionValue:ke,isOptionDisabled:(...i)=>E.value.apply(null,i)===!0,getOptionValue:(...i)=>f.value.apply(null,i),getOptionLabel:(...i)=>I.value.apply(null,i)}),Object.assign(b,{innerValue:O,fieldClass:h(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:L,targetRef:P,hasValue:ae,showPopup:rt,floatingLabel:h(()=>e.hideSelected!==!0&&ae.value===!0||typeof _.value=="number"||_.value.length!==0||rl(e.displayValue)),getControlChild:()=>{if(b.editable.value!==!1&&(d.value===!0||te.value!==!0||a["no-option"]!==void 0))return s===!0?Jl():jl();b.hasPopupOpen===!0&&(b.hasPopupOpen=!1)},controlEvents:{onFocusin(i){b.onControlFocusin(i)},onFocusout(i){b.onControlFocusout(i,()=>{ut(),it()})},onClick(i){if(et(i),s!==!0&&o.value===!0){it(),P.value?.focus();return}rt(i)}},getControl:i=>{const F=Dl(),B=i===!0||d.value!==!0||s!==!0;if(e.useInput===!0)F.push(Nl(i,B));else if(b.editable.value===!0){const ue=B===!0?Se.value:void 0;F.push(V("input",{ref:B===!0?P:void 0,key:"d_t",class:"q-select__focus-target",id:B===!0?b.targetUid.value:void 0,value:fe.value,readonly:!0,"data-autofocus":i===!0||e.autofocus===!0||void 0,...ue,onKeydown:nt,onKeyup:re,onKeypress:Ee})),B===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&F.push(V("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:be}))}if(X.value!==void 0&&e.disable!==!0&&H.value.length!==0){const ue=H.value.map(oe=>V("option",{value:oe,selected:!0}));F.push(V("select",{class:"hidden",name:X.value,multiple:e.multiple},ue))}const Y=e.useInput===!0||B!==!0?void 0:b.splitAttrs.attributes.value;return V("div",{class:"q-field__native row items-center",...Y,...b.splitAttrs.listeners.value},F)},getInnerAppend:()=>e.loading!==!0&&y.value!==!0&&e.hideDropdownIcon!==!0?[V(Ze,{class:"q-select__dropdown-icon"+(o.value===!0?" rotate-180":""),name:Re.value})]:null}),wl(b)}}),da=Le({name:"QSlideTransition",props:{appear:Boolean,duration:{type:Number,default:300}},emits:["show","hide"],setup(e,{slots:a,emit:l}){let r=!1,t,o,d=null,g=null,_,m;function y(){t?.(),t=null,r=!1,d!==null&&(clearTimeout(d),d=null),g!==null&&(clearTimeout(g),g=null),o?.removeEventListener("transitionend",_),_=null}function k(c,v,x){v!==void 0&&(c.style.height=`${v}px`),c.style.transition=`height ${e.duration}ms cubic-bezier(.25, .8, .50, 1)`,r=!0,t=x}function p(c,v){c.style.overflowY=null,c.style.height=null,c.style.transition=null,y(),v!==m&&l(v)}function n(c,v){let x=0;o=c,r===!0?(y(),x=c.offsetHeight===c.scrollHeight?0:void 0):(m="hide",c.style.overflowY="hidden"),k(c,x,v),d=setTimeout(()=>{d=null,c.style.height=`${c.scrollHeight}px`,_=M=>{g=null,(Object(M)!==M||M.target===c)&&p(c,"show")},c.addEventListener("transitionend",_),g=setTimeout(_,e.duration*1.1)},100)}function s(c,v){let x;o=c,r===!0?y():(m="show",c.style.overflowY="hidden",x=c.scrollHeight),k(c,x,v),d=setTimeout(()=>{d=null,c.style.height=0,_=M=>{g=null,(Object(M)!==M||M.target===c)&&p(c,"hide")},c.addEventListener("transitionend",_),g=setTimeout(_,e.duration*1.1)},100)}return Xe(()=>{r===!0&&y()}),()=>V(Ll,{css:!1,appear:e.appear,onEnter:n,onLeave:s},a.default)}}),Ge=Ln({}),fa=Object.keys(Jt),Je=Le({name:"QExpansionItem",props:{...Jt,...ql,...gt,icon:String,label:String,labelLines:[Number,String],caption:String,captionLines:[Number,String],dense:Boolean,toggleAriaLabel:String,expandIcon:String,expandedIcon:String,expandIconClass:[Array,String,Object],duration:{},headerInsetLevel:Number,contentInsetLevel:Number,expandSeparator:Boolean,defaultOpened:Boolean,hideExpandIcon:Boolean,expandIconToggle:Boolean,switchToggleSide:Boolean,denseToggle:Boolean,group:String,popup:Boolean,headerStyle:[Array,String,Object],headerClass:[Array,String,Object]},emits:[...kl,"click","afterShow","afterHide"],setup(e,{slots:a,emit:l}){const{proxy:{$q:r}}=Fe(),t=ht(e,r),o=N(e.modelValue!==null?e.modelValue:e.defaultOpened),d=N(null),g=mn(),{show:_,hide:m,toggle:y}=Vl({showing:o});let k,p;const n=h(()=>`q-expansion-item q-item-type q-expansion-item--${o.value===!0?"expanded":"collapsed"} q-expansion-item--${e.popup===!0?"popup":"standard"}`),s=h(()=>e.contentInsetLevel===void 0?null:{["padding"+(r.lang.rtl===!0?"Right":"Left")]:e.contentInsetLevel*56+"px"}),c=h(()=>e.disable!==!0&&(e.href!==void 0||e.to!==void 0&&e.to!==null&&e.to!=="")),v=h(()=>{const j={};return fa.forEach(Z=>{j[Z]=e[Z]}),j}),x=h(()=>c.value===!0||e.expandIconToggle!==!0),M=h(()=>e.expandedIcon!==void 0&&o.value===!0?e.expandedIcon:e.expandIcon||r.iconSet.expansionItem[e.denseToggle===!0?"denseIcon":"icon"]),S=h(()=>e.disable!==!0&&(c.value===!0||e.expandIconToggle===!0)),q=h(()=>({expanded:o.value===!0,detailsId:g.value,toggle:y,show:_,hide:m})),L=h(()=>{const j=e.toggleAriaLabel!==void 0?e.toggleAriaLabel:r.lang.label[o.value===!0?"collapse":"expand"](e.label);return{role:"button","aria-expanded":o.value===!0?"true":"false","aria-controls":g.value,"aria-label":j}});ge(()=>e.group,j=>{p?.(),j!==void 0&&se()});function P(j){c.value!==!0&&y(j),l("click",j)}function z(j){j.keyCode===13&&R(j,!0)}function R(j,Z){Z!==!0&&j.qAvoidFocus!==!0&&d.value?.focus(),y(j),we(j)}function K(){l("afterShow")}function X(){l("afterHide")}function se(){k===void 0&&(k=gn()),o.value===!0&&(Ge[e.group]=k);const j=ge(o,de=>{de===!0?Ge[e.group]=k:Ge[e.group]===k&&delete Ge[e.group]}),Z=ge(()=>Ge[e.group],(de,pe)=>{pe===k&&de!==void 0&&de!==k&&m()});p=()=>{j(),Z(),Ge[e.group]===k&&delete Ge[e.group],p=void 0}}function D(){const j={class:[`q-focusable relative-position cursor-pointer${e.denseToggle===!0&&e.switchToggleSide===!0?" items-end":""}`,e.expandIconClass],side:e.switchToggleSide!==!0,avatar:e.switchToggleSide},Z=[V(Ze,{class:"q-expansion-item__toggle-icon"+(e.expandedIcon===void 0&&o.value===!0?" q-expansion-item__toggle-icon--rotated":""),name:M.value})];return S.value===!0&&(Object.assign(j,{tabindex:0,...L.value,onClick:R,onKeyup:z}),Z.unshift(V("div",{ref:d,class:"q-expansion-item__toggle-focus q-icon q-focus-helper q-focus-helper--rounded",tabindex:-1}))),V(Vt,j,()=>Z)}function le(){let j;return a.header!==void 0?j=[].concat(a.header(q.value)):(j=[V(Vt,()=>[V(Ut,{lines:e.labelLines},()=>e.label||""),e.caption?V(Ut,{lines:e.captionLines,caption:!0},()=>e.caption):null])],e.icon&&j[e.switchToggleSide===!0?"push":"unshift"](V(Vt,{side:e.switchToggleSide===!0,avatar:e.switchToggleSide!==!0},()=>V(Ze,{name:e.icon})))),e.disable!==!0&&e.hideExpandIcon!==!0&&j[e.switchToggleSide===!0?"unshift":"push"](D()),j}function G(){const j={ref:"item",style:e.headerStyle,class:e.headerClass,dark:t.value,disable:e.disable,dense:e.dense,insetLevel:e.headerInsetLevel};return x.value===!0&&(j.clickable=!0,j.onClick=P,Object.assign(j,c.value===!0?v.value:L.value)),V($l,j,le)}function he(){return Pn(V("div",{key:"e-content",class:"q-expansion-item__content relative-position",style:s.value,id:g.value},wt(a.default)),[[In,o.value]])}function ve(){const j=[G(),V(da,{duration:e.duration,onShow:K,onHide:X},he)];return e.expandSeparator===!0&&j.push(V(Tt,{class:"q-expansion-item__border q-expansion-item__border--top absolute-top",dark:t.value}),V(Tt,{class:"q-expansion-item__border q-expansion-item__border--bottom absolute-bottom",dark:t.value})),j}return e.group!==void 0&&se(),Xe(()=>{p?.()}),()=>V("div",{class:n.value},[V("div",{class:"q-expansion-item__container relative-position"},ve())])}}),Gt={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},va=Object.keys(Gt);Gt.all=!0;function bl(e){const a={};for(const l of va)e[l]===!0&&(a[l]=!0);return Object.keys(a).length===0?Gt:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}const ma=["INPUT","TEXTAREA"];function yl(e,a){return a.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof a.handler=="function"&&ma.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(a.uid)===-1)}function Nt(e,a,l){const r=St(e);let t,o=r.left-a.event.x,d=r.top-a.event.y,g=Math.abs(o),_=Math.abs(d);const m=a.direction;m.horizontal===!0&&m.vertical!==!0?t=o<0?"left":"right":m.horizontal!==!0&&m.vertical===!0?t=d<0?"up":"down":m.up===!0&&d<0?(t="up",g>_&&(m.left===!0&&o<0?t="left":m.right===!0&&o>0&&(t="right"))):m.down===!0&&d>0?(t="down",g>_&&(m.left===!0&&o<0?t="left":m.right===!0&&o>0&&(t="right"))):m.left===!0&&o<0?(t="left",g<_&&(m.up===!0&&d<0?t="up":m.down===!0&&d>0&&(t="down"))):m.right===!0&&o>0&&(t="right",g<_&&(m.up===!0&&d<0?t="up":m.down===!0&&d>0&&(t="down")));let y=!1;if(t===void 0&&l===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,y=!0,t==="left"||t==="right"?(r.left-=o,g=0,o=0):(r.top-=d,_=0,d=0)}return{synthetic:y,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:r,direction:t,isFirst:a.event.isFirst,isFinal:l===!0,duration:Date.now()-a.event.time,distance:{x:g,y:_},offset:{x:o,y:d},delta:{x:r.left-a.event.lastX,y:r.top-a.event.lastY}}}}let ga=0;const ha=$n({name:"touch-pan",beforeMount(e,{value:a,modifiers:l}){if(l.mouse!==!0&&dt.has.touch!==!0)return;function r(o,d){l.mouse===!0&&d===!0?we(o):(l.stop===!0&&Ue(o),l.prevent===!0&&et(o))}const t={uid:"qvtp_"+ga++,handler:a,modifiers:l,direction:bl(l),noop:Pl,mouseStart(o){yl(o,t)&&Fn(o)&&(ft(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(o,!0))},touchStart(o){if(yl(o,t)){const d=o.target;ft(t,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),t.start(o)}},start(o,d){if(dt.is.firefox===!0&&It(e,!0),t.lastEvt=o,d===!0||l.stop===!0){if(t.direction.all!==!0&&(d!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const m=o.type.indexOf("mouse")!==-1?new MouseEvent(o.type,o):new TouchEvent(o.type,o);o.defaultPrevented===!0&&et(m),o.cancelBubble===!0&&Ue(m),Object.assign(m,{qKeyEvent:o.qKeyEvent,qClickOutside:o.qClickOutside,qAnchorHandled:o.qAnchorHandled,qClonedBy:o.qClonedBy===void 0?[t.uid]:o.qClonedBy.concat(t.uid)}),t.initialEvent={target:o.target,event:m}}Ue(o)}const{left:g,top:_}=St(o);t.event={x:g,y:_,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:g,lastY:_}},move(o){if(t.event===void 0)return;const d=St(o),g=d.left-t.event.x,_=d.top-t.event.y;if(g===0&&_===0)return;t.lastEvt=o;const m=t.event.mouse===!0,y=()=>{r(o,m);let n;l.preserveCursor!==!0&&l.preservecursor!==!0&&(n=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),m===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Fl(),t.styleCleanup=s=>{if(t.styleCleanup=void 0,n!==void 0&&(document.documentElement.style.cursor=n),document.body.classList.remove("non-selectable"),m===!0){const c=()=>{document.body.classList.remove("no-pointer-events--children")};s!==void 0?setTimeout(()=>{c(),s()},50):c()}else s!==void 0&&s()}};if(t.event.detected===!0){t.event.isFirst!==!0&&r(o,t.event.mouse);const{payload:n,synthetic:s}=Nt(o,t,!1);n!==void 0&&(t.handler(n)===!1?t.end(o):(t.styleCleanup===void 0&&t.event.isFirst===!0&&y(),t.event.lastX=n.position.left,t.event.lastY=n.position.top,t.event.lastDir=s===!0?void 0:n.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||m===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){y(),t.event.detected=!0,t.move(o);return}const k=Math.abs(g),p=Math.abs(_);k!==p&&(t.direction.horizontal===!0&&k>p||t.direction.vertical===!0&&k<p||t.direction.up===!0&&k<p&&_<0||t.direction.down===!0&&k<p&&_>0||t.direction.left===!0&&k>p&&g<0||t.direction.right===!0&&k>p&&g>0?(t.event.detected=!0,t.move(o)):t.end(o,!0))},end(o,d){if(t.event!==void 0){if(qt(t,"temp"),dt.is.firefox===!0&&It(e,!1),d===!0)t.styleCleanup?.(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(Nt(o===void 0?t.lastEvt:o,t).payload);const{payload:g}=Nt(o===void 0?t.lastEvt:o,t,!0),_=()=>{t.handler(g)};t.styleCleanup!==void 0?t.styleCleanup(_):_()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,l.mouse===!0){const o=l.mouseCapture===!0||l.mousecapture===!0?"Capture":"";ft(t,"main",[[e,"mousedown","mouseStart",`passive${o}`]])}dt.has.touch===!0&&ft(t,"main",[[e,"touchstart","touchStart",`passive${l.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const l=e.__qtouchpan;l!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&l.end(),l.handler=a.value),l.direction=bl(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),qt(a,"main"),qt(a,"temp"),dt.is.firefox===!0&&It(e,!1),a.styleCleanup?.(),delete e.__qtouchpan)}}),xl="q-slider__marker-labels",pa=e=>({value:e}),ba=({marker:e})=>V("div",{key:e.value,style:e.style,class:e.classes},e.label),zl=[34,37,40,33,39,38],ya={...gt,...Qt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},xa=["pan","update:modelValue","change"];function _a({updateValue:e,updatePosition:a,getDragging:l,formAttrs:r}){const{props:t,emit:o,slots:d,proxy:{$q:g}}=Fe(),_=ht(t,g),m=Ml(r),y=N(!1),k=N(!1),p=N(!1),n=N(!1),s=h(()=>t.vertical===!0?"--v":"--h"),c=h(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),v=h(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(g.lang.rtl===!0)),x=h(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),M=h(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),S=h(()=>t.disable!==!0&&t.readonly!==!0&&x.value<M.value),q=h(()=>{if(t.step===0)return J=>J;const w=(String(t.step).trim().split(".")[1]||"").length;return J=>parseFloat(J.toFixed(w))}),L=h(()=>t.step===0?1:t.step),P=h(()=>S.value===!0?t.tabindex||0:-1),z=h(()=>t.max-t.min),R=h(()=>M.value-x.value),K=h(()=>xe(x.value)),X=h(()=>xe(M.value)),se=h(()=>t.vertical===!0?v.value===!0?"bottom":"top":v.value===!0?"right":"left"),D=h(()=>t.vertical===!0?"height":"width"),le=h(()=>t.vertical===!0?"width":"height"),G=h(()=>t.vertical===!0?"vertical":"horizontal"),he=h(()=>{const w={role:"slider","aria-valuemin":x.value,"aria-valuemax":M.value,"aria-orientation":G.value,"data-step":t.step};return t.disable===!0?w["aria-disabled"]="true":t.readonly===!0&&(w["aria-readonly"]="true"),w}),ve=h(()=>`q-slider q-slider${s.value} q-slider--${y.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(S.value===!0?" q-slider--editable":""))+(p.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(_.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+s.value:""));function j(w){const J="q-slider__"+w;return`${J} ${J}${s.value} ${J}${s.value}${c.value}`}function Z(w){const J="q-slider__"+w;return`${J} ${J}${s.value}`}const de=h(()=>{const w=t.selectionColor||t.color;return"q-slider__selection absolute"+(w!==void 0?` text-${w}`:"")}),pe=h(()=>Z("markers")+" absolute overflow-hidden"),b=h(()=>Z("track-container")),O=h(()=>j("pin")),Q=h(()=>j("label")),ee=h(()=>j("text-container")),ae=h(()=>j("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),W=h(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),U=h(()=>{const w={[le.value]:t.trackSize};return t.trackImg!==void 0&&(w.backgroundImage=`url(${t.trackImg}) !important`),w}),te=h(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),T=h(()=>{const w=X.value-K.value,J={[se.value]:`${100*K.value}%`,[D.value]:w===0?"2px":`${100*w}%`};return t.innerTrackImg!==void 0&&(J.backgroundImage=`url(${t.innerTrackImg}) !important`),J});function fe(w){const{min:J,max:ne,step:re}=t;let be=J+w*(ne-J);if(re>0){const Ee=(be-x.value)%re;be+=(Math.abs(Ee)>=re/2?(Ee<0?-1:1)*re:0)-Ee}return be=q.value(be),vt(be,x.value,M.value)}function xe(w){return z.value===0?0:(w-t.min)/z.value}function Pe(w,J){const ne=St(w),re=t.vertical===!0?vt((ne.top-J.top)/J.height,0,1):vt((ne.left-J.left)/J.width,0,1);return vt(v.value===!0?1-re:re,K.value,X.value)}const _e=h(()=>Bn(t.markers)===!0?t.markers:L.value),Se=h(()=>{const w=[],J=_e.value,ne=t.max;let re=t.min;do w.push(re),re+=J;while(re<ne);return w.push(ne),w}),Ve=h(()=>{const w=` ${xl}${s.value}-`;return xl+`${w}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${w}${v.value===!0?"rtl":"ltr"}`}),Ce=h(()=>t.markerLabels===!1?null:$(t.markerLabels).map((w,J)=>({index:J,value:w.value,label:w.label||w.value,classes:Ve.value+(w.classes!==void 0?" "+w.classes:""),style:{...u(w.value),...w.style||{}}}))),Be=h(()=>({markerList:Ce.value,markerMap:f.value,classes:Ve.value,getStyle:u})),Re=h(()=>{const w=R.value===0?"2px":100*_e.value/R.value;return{...T.value,backgroundSize:t.vertical===!0?`2px ${w}%`:`${w}% 2px`}});function $(w){if(w===!1)return null;if(w===!0)return Se.value.map(pa);if(typeof w=="function")return Se.value.map(ne=>{const re=w(ne);return $t(re)===!0?{...re,value:ne}:{value:ne,label:re}});const J=({value:ne})=>ne>=t.min&&ne<=t.max;return Array.isArray(w)===!0?w.map(ne=>$t(ne)===!0?ne:{value:ne}).filter(J):Object.keys(w).map(ne=>{const re=w[ne],be=Number(ne);return $t(re)===!0?{...re,value:be}:{value:be,label:re}}).filter(J)}function u(w){return{[se.value]:`${100*(w-t.min)/z.value}%`}}const f=h(()=>{if(t.markerLabels===!1)return null;const w={};return Ce.value.forEach(J=>{w[J.value]=J}),w});function I(){if(d["marker-label-group"]!==void 0)return d["marker-label-group"](Be.value);const w=d["marker-label"]||ba;return Ce.value.map(J=>w({marker:J,...Be.value}))}const E=h(()=>[[ha,H,void 0,{[G.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function H(w){w.isFinal===!0?(n.value!==void 0&&(a(w.evt),w.touch===!0&&e(!0),n.value=void 0,o("pan","end")),y.value=!1,p.value=!1):w.isFirst===!0?(n.value=l(w.evt),a(w.evt),e(),y.value=!0,o("pan","start")):(a(w.evt),e())}function ze(){p.value=!1}function ke(w){a(w,l(w)),e(),k.value=!0,y.value=!0,document.addEventListener("mouseup",qe,!0)}function qe(){k.value=!1,y.value=!1,e(!0),ze(),document.removeEventListener("mouseup",qe,!0)}function We(w){a(w,l(w)),e(!0)}function pt(w){zl.includes(w.keyCode)&&e(!0)}function Te(w){if(t.vertical===!0)return null;const J=g.lang.rtl!==t.reverse?1-w:w;return{transform:`translateX(calc(${2*J-1} * ${t.thumbSize} / 2 + ${50-100*J}%))`}}function Ie(w){const J=h(()=>k.value===!1&&(p.value===w.focusValue||p.value==="both")?" q-slider--focus":""),ne=h(()=>`q-slider__thumb q-slider__thumb${s.value} q-slider__thumb${s.value}-${v.value===!0?"rtl":"ltr"} absolute non-selectable`+J.value+(w.thumbColor.value!==void 0?` text-${w.thumbColor.value}`:"")),re=h(()=>({width:t.thumbSize,height:t.thumbSize,[se.value]:`${100*w.ratio.value}%`,zIndex:p.value===w.focusValue?2:void 0})),be=h(()=>w.labelColor.value!==void 0?` text-${w.labelColor.value}`:""),Ee=h(()=>Te(w.ratio.value)),nt=h(()=>"q-slider__text"+(w.labelTextColor.value!==void 0?` text-${w.labelTextColor.value}`:""));return()=>{const at=[V("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[V("path",{d:t.thumbPath})]),V("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(at.push(V("div",{class:O.value+" absolute fit no-pointer-events"+be.value},[V("div",{class:Q.value,style:{minWidth:t.thumbSize}},[V("div",{class:ee.value,style:Ee.value},[V("span",{class:nt.value},w.label.value)])])])),t.name!==void 0&&t.disable!==!0&&m(at,"push")),V("div",{class:ne.value,style:re.value,...w.getNodeData()},at)}}function lt(w,J,ne,re){const be=[];t.innerTrackColor!=="transparent"&&be.push(V("div",{key:"inner",class:te.value,style:T.value})),t.selectionColor!=="transparent"&&be.push(V("div",{key:"selection",class:de.value,style:w.value})),t.markers!==!1&&be.push(V("div",{key:"marker",class:pe.value,style:Re.value})),re(be);const Ee=[Ol("div",{key:"trackC",class:b.value,tabindex:J.value,...ne.value},[V("div",{class:W.value,style:U.value},be)],"slide",S.value,()=>E.value)];if(t.markerLabels!==!1){const nt=t.switchMarkerLabelsSide===!0?"unshift":"push";Ee[nt](V("div",{key:"markerL",class:ae.value},I()))}return Ee}return Xe(()=>{document.removeEventListener("mouseup",qe,!0)}),{state:{active:y,focus:p,preventFocus:k,dragging:n,editable:S,classes:ve,tabindex:P,attributes:he,roundValueFn:q,keyStep:L,trackLen:z,innerMin:x,innerMinRatio:K,innerMax:M,innerMaxRatio:X,positionProp:se,sizeProp:D,isReversed:v},methods:{onActivate:ke,onMobileClick:We,onBlur:ze,onKeyup:pt,getContent:lt,getThumbRenderFn:Ie,convertRatioToModel:fe,convertModelToRatio:xe,getDraggingRatio:Pe}}}const Sa=()=>({}),kt=Le({name:"QSlider",props:{...ya,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:xa,setup(e,{emit:a}){const{proxy:{$q:l}}=Fe(),{state:r,methods:t}=_a({updateValue:s,updatePosition:v,getDragging:c,formAttrs:hn(e)}),o=N(null),d=N(0),g=N(0);function _(){g.value=e.modelValue===null?r.innerMin.value:vt(e.modelValue,r.innerMin.value,r.innerMax.value)}ge(()=>`${e.modelValue}|${r.innerMin.value}|${r.innerMax.value}`,_),_();const m=h(()=>t.convertModelToRatio(g.value)),y=h(()=>r.active.value===!0?d.value:m.value),k=h(()=>{const S={[r.positionProp.value]:`${100*r.innerMinRatio.value}%`,[r.sizeProp.value]:`${100*(y.value-r.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(S.backgroundImage=`url(${e.selectionImg}) !important`),S}),p=t.getThumbRenderFn({focusValue:!0,getNodeData:Sa,ratio:y,label:h(()=>e.labelValue!==void 0?e.labelValue:g.value),thumbColor:h(()=>e.thumbColor||e.color),labelColor:h(()=>e.labelColor),labelTextColor:h(()=>e.labelTextColor)}),n=h(()=>r.editable.value!==!0?{}:l.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:x,onBlur:t.onBlur,onKeydown:M,onKeyup:t.onKeyup});function s(S){g.value!==e.modelValue&&a("update:modelValue",g.value),S===!0&&a("change",g.value)}function c(){return o.value.getBoundingClientRect()}function v(S,q=r.dragging.value){const L=t.getDraggingRatio(S,q);g.value=t.convertRatioToModel(L),d.value=e.snap!==!0||e.step===0?L:t.convertModelToRatio(g.value)}function x(){r.focus.value=!0}function M(S){if(zl.includes(S.keyCode)===!1)return;we(S);const q=([34,33].includes(S.keyCode)?10:1)*r.keyStep.value,L=([34,37,40].includes(S.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*q;g.value=vt(r.roundValueFn.value(g.value+L),r.innerMin.value,r.innerMax.value),s()}return()=>{const S=t.getContent(k,r.tabindex,n,q=>{q.push(p())});return V("div",{ref:o,class:r.classes.value+(e.modelValue===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue},S)}}});function wa(e,a){const l=N(null),r=h(()=>e.disable===!0?null:V("span",{ref:l,class:"no-outline",tabindex:-1}));function t(o){const d=a.value;o?.qAvoidFocus!==!0&&(o?.type.indexOf("key")===0?document.activeElement!==d&&d?.contains(document.activeElement)===!0&&d.focus():l.value!==null&&(o===void 0||d?.contains(o.target)===!0)&&l.value.focus())}return{refocusTargetEl:r,refocusTarget:t}}const Ca={xs:30,sm:35,md:40,lg:50,xl:60},ka={...gt,...Tl,...Qt,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},qa=["update:modelValue"];function Va(e,a){const{props:l,slots:r,emit:t,proxy:o}=Fe(),{$q:d}=o,g=ht(l,d),_=N(null),{refocusTargetEl:m,refocusTarget:y}=wa(l,_),k=El(l,Ca),p=h(()=>l.val!==void 0&&Array.isArray(l.modelValue)),n=h(()=>{const D=st(l.val);return p.value===!0?l.modelValue.findIndex(le=>st(le)===D):-1}),s=h(()=>p.value===!0?n.value!==-1:st(l.modelValue)===st(l.trueValue)),c=h(()=>p.value===!0?n.value===-1:st(l.modelValue)===st(l.falseValue)),v=h(()=>s.value===!1&&c.value===!1),x=h(()=>l.disable===!0?-1:l.tabindex||0),M=h(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(l.disable===!0?" disabled":"")+(g.value===!0?` q-${e}--dark`:"")+(l.dense===!0?` q-${e}--dense`:"")+(l.leftLabel===!0?" reverse":"")),S=h(()=>{const D=s.value===!0?"truthy":c.value===!0?"falsy":"indet",le=l.color!==void 0&&(l.keepColor===!0||c.value!==!0)?` text-${l.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${D}${le}`}),q=h(()=>{const D={type:"checkbox"};return l.name!==void 0&&Object.assign(D,{".checked":s.value,"^checked":s.value===!0?"checked":void 0,name:l.name,value:p.value===!0?l.val:l.trueValue}),D}),L=Ml(q),P=h(()=>{const D={tabindex:x.value,role:"checkbox","aria-label":l.label,"aria-checked":v.value===!0?"mixed":s.value===!0?"true":"false"};return l.disable===!0&&(D["aria-disabled"]="true"),D});function z(D){D!==void 0&&(we(D),y(D)),l.disable!==!0&&t("update:modelValue",R(),D)}function R(){if(p.value===!0){if(s.value===!0){const D=l.modelValue.slice();return D.splice(n.value,1),D}return l.modelValue.concat([l.val])}if(s.value===!0){if(l.toggleOrder!=="ft"||l.toggleIndeterminate===!1)return l.falseValue}else if(c.value===!0){if(l.toggleOrder==="ft"||l.toggleIndeterminate===!1)return l.trueValue}else return l.toggleOrder!=="ft"?l.trueValue:l.falseValue;return l.indeterminateValue}function K(D){(D.keyCode===13||D.keyCode===32)&&we(D)}function X(D){(D.keyCode===13||D.keyCode===32)&&z(D)}const se=a(s,v);return Object.assign(o,{toggle:z}),()=>{const D=se();l.disable!==!0&&L(D,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const le=[V("div",{class:S.value,style:k.value,"aria-hidden":"true"},D)];m.value!==null&&le.push(m.value);const G=l.label!==void 0?Al(r.default,[l.label]):wt(r.default);return G!==void 0&&le.push(V("div",{class:`q-${e}__label q-anchor--skip`},G)),V("div",{ref:_,class:M.value,...P.value,onClick:z,onKeydown:K,onKeyup:X},le)}}const Ma=()=>V("div",{key:"svg",class:"q-checkbox__bg absolute"},[V("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[V("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),V("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),_t=Le({name:"QCheckbox",props:ka,emits:qa,setup(e){const a=Ma();function l(r,t){const o=h(()=>(r.value===!0?e.checkedIcon:t.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>o.value!==null?[V("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[V(Ze,{class:"q-checkbox__icon",name:o.value})])]:[a]}return Va("checkbox",l)}}),Ta={class:"q-pa-sm",style:{height:"300px"}},Ea=Il({__name:"CurveChart",props:{points:{},currentDistance:{},currentPixelHeight:{}},setup(e){const a=e,l=N(null);let r=null;Yt(()=>{if(!l.value)return;const o={type:"line",data:{labels:a.points.map(d=>d.x),datasets:[{label:"拟合曲线",data:a.points.map(d=>d.y),fill:!1,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.2)",pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"距离 (m)"}},y:{title:{display:!0,text:"像素高度 (px)"}}},plugins:{legend:{display:!0}}}};r=new jn(l.value,o),t()});function t(){if(!r||!a.currentDistance||a.currentDistance<=0){r&&r.data.datasets.length>1&&(r.data.datasets.splice(1,1),r.update("none"));return}const o=a.currentDistance,d=a.currentPixelHeight||0;console.log(`Chart update: distance=${o.toFixed(3)}m, pixel=${d}px`);const g=a.points||[],_=Math.min(...g.map(n=>n.x)),m=Math.max(...g.map(n=>n.x));if(o<_-.1||o>m+.1){const n=Math.min(_,o-.1),s=Math.max(m,o+.1);r.config.options?.scales?.x&&(r.config.options.scales.x.min=n,r.config.options.scales.x.max=s),console.log(`Adjusting X-axis range: ${n.toFixed(2)} to ${s.toFixed(2)}`)}const y=r.config.options?.scales?.x?.min||_,k=r.config.options?.scales?.x?.max||m,p={label:`当前距离: ${(o*100).toFixed(1)} cm`,data:[{x:y,y:d},{x:k,y:d}],fill:!1,borderColor:"rgba(255, 0, 0, 0.8)",backgroundColor:"rgba(255, 0, 0, 0.8)",borderWidth:3,borderDash:[5,5],pointRadius:0,pointHoverRadius:0,showLine:!0,tension:0};r.data.datasets.length>1?r.data.datasets[1]=p:r.data.datasets.push(p),r.update("none")}return ge(()=>a.points,o=>{r&&(r.data.labels=o.map(d=>d.x),r.data.datasets[0].data=o.map(d=>d.y),r.update("none"),t())},{deep:!0}),ge(()=>[a.currentDistance,a.currentPixelHeight],()=>{t()}),(o,d)=>(Oe(),$e("div",Ta,[C("canvas",{ref_key:"canvasRef",ref:l},null,512)]))}});function Oa(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mt={exports:{}},Aa=Mt.exports,_l;function La(){return _l||(_l=1,function(e,a){(function(l,r){r(e)})(Aa,function(l){function r(p,n,s){return n in p?Object.defineProperty(p,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):p[n]=s,p}var t=Object.assign||function(p){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(p[c]=s[c])}return p};function o(p){if(Array.isArray(p)){for(var n=0,s=Array(p.length);n<p.length;n++)s[n]=p[n];return s}else return Array.from(p)}var d={order:2,precision:2,period:null};function g(p,n){var s=[],c=[];p.forEach(function(q,L){q[1]!==null&&(c.push(q),s.push(n[L]))});var v=c.reduce(function(q,L){return q+L[1]},0),x=v/c.length,M=c.reduce(function(q,L){var P=L[1]-x;return q+P*P},0),S=c.reduce(function(q,L,P){var z=s[P],R=L[1]-z[1];return q+R*R},0);return 1-S/M}function _(p,n){for(var s=p,c=p.length-1,v=[n],x=0;x<c;x++){for(var M=x,S=x+1;S<c;S++)Math.abs(s[x][S])>Math.abs(s[x][M])&&(M=S);for(var q=x;q<c+1;q++){var L=s[q][x];s[q][x]=s[q][M],s[q][M]=L}for(var P=x+1;P<c;P++)for(var z=c;z>=x;z--)s[z][P]-=s[z][x]*s[x][P]/s[x][x]}for(var R=c-1;R>=0;R--){for(var K=0,X=R+1;X<c;X++)K+=s[X][R]*v[X];v[R]=(s[c][R]-K)/s[R][R]}return v}function m(p,n){var s=Math.pow(10,n);return Math.round(p*s)/s}var y={linear:function(n,s){for(var c=[0,0,0,0,0],v=0,x=0;x<n.length;x++)n[x][1]!==null&&(v++,c[0]+=n[x][0],c[1]+=n[x][1],c[2]+=n[x][0]*n[x][0],c[3]+=n[x][0]*n[x][1],c[4]+=n[x][1]*n[x][1]);var M=v*c[2]-c[0]*c[0],S=v*c[3]-c[0]*c[1],q=M===0?0:m(S/M,s.precision),L=m(c[1]/v-q*c[0]/v,s.precision),P=function(K){return[m(K,s.precision),m(q*K+L,s.precision)]},z=n.map(function(R){return P(R[0])});return{points:z,predict:P,equation:[q,L],r2:m(g(n,z),s.precision),string:L===0?"y = "+q+"x":"y = "+q+"x + "+L}},exponential:function(n,s){for(var c=[0,0,0,0,0,0],v=0;v<n.length;v++)n[v][1]!==null&&(c[0]+=n[v][0],c[1]+=n[v][1],c[2]+=n[v][0]*n[v][0]*n[v][1],c[3]+=n[v][1]*Math.log(n[v][1]),c[4]+=n[v][0]*n[v][1]*Math.log(n[v][1]),c[5]+=n[v][0]*n[v][1]);var x=c[1]*c[2]-c[5]*c[5],M=Math.exp((c[2]*c[3]-c[5]*c[4])/x),S=(c[1]*c[4]-c[5]*c[3])/x,q=m(M,s.precision),L=m(S,s.precision),P=function(K){return[m(K,s.precision),m(q*Math.exp(L*K),s.precision)]},z=n.map(function(R){return P(R[0])});return{points:z,predict:P,equation:[q,L],string:"y = "+q+"e^("+L+"x)",r2:m(g(n,z),s.precision)}},logarithmic:function(n,s){for(var c=[0,0,0,0],v=n.length,x=0;x<v;x++)n[x][1]!==null&&(c[0]+=Math.log(n[x][0]),c[1]+=n[x][1]*Math.log(n[x][0]),c[2]+=n[x][1],c[3]+=Math.pow(Math.log(n[x][0]),2));var M=(v*c[1]-c[2]*c[0])/(v*c[3]-c[0]*c[0]),S=m(M,s.precision),q=m((c[2]-S*c[0])/v,s.precision),L=function(R){return[m(R,s.precision),m(m(q+S*Math.log(R),s.precision),s.precision)]},P=n.map(function(z){return L(z[0])});return{points:P,predict:L,equation:[q,S],string:"y = "+q+" + "+S+" ln(x)",r2:m(g(n,P),s.precision)}},power:function(n,s){for(var c=[0,0,0,0,0],v=n.length,x=0;x<v;x++)n[x][1]!==null&&(c[0]+=Math.log(n[x][0]),c[1]+=Math.log(n[x][1])*Math.log(n[x][0]),c[2]+=Math.log(n[x][1]),c[3]+=Math.pow(Math.log(n[x][0]),2));var M=(v*c[1]-c[0]*c[2])/(v*c[3]-Math.pow(c[0],2)),S=(c[2]-M*c[0])/v,q=m(Math.exp(S),s.precision),L=m(M,s.precision),P=function(K){return[m(K,s.precision),m(m(q*Math.pow(K,L),s.precision),s.precision)]},z=n.map(function(R){return P(R[0])});return{points:z,predict:P,equation:[q,L],string:"y = "+q+"x^"+L,r2:m(g(n,z),s.precision)}},polynomial:function(n,s){for(var c=[],v=[],x=0,M=0,S=n.length,q=s.order+1,L=0;L<q;L++){for(var P=0;P<S;P++)n[P][1]!==null&&(x+=Math.pow(n[P][0],L)*n[P][1]);c.push(x),x=0;for(var z=[],R=0;R<q;R++){for(var K=0;K<S;K++)n[K][1]!==null&&(M+=Math.pow(n[K][0],L+R));z.push(M),M=0}v.push(z)}v.push(c);for(var X=_(v,q).map(function(he){return m(he,s.precision)}),se=function(ve){return[m(ve,s.precision),m(X.reduce(function(j,Z,de){return j+Z*Math.pow(ve,de)},0),s.precision)]},D=n.map(function(he){return se(he[0])}),le="y = ",G=X.length-1;G>=0;G--)G>1?le+=X[G]+"x^"+G+" + ":G===1?le+=X[G]+"x + ":le+=X[G];return{string:le,points:D,predict:se,equation:[].concat(o(X)).reverse(),r2:m(g(n,D),s.precision)}}};function k(){var p=function(s,c){return t({_round:m},s,r({},c,function(v,x){return y[c](v,t({},d,x))}))};return Object.keys(y).reduce(p,{})}l.exports=k()})}(Mt)),Mt.exports}var Pa=La();const Me=Oa(Pa),Ia={class:"row no-wrap",style:{gap:"16px","align-items":"flex-start"}},$a={style:{width:"50%",display:"flex","flex-direction":"column"}},Fa={style:{display:"flex","flex-direction":"column",gap:"16px"}},Ba={style:{display:"flex","flex-direction":"column"}},Ra=["src"],za={style:{width:"50%",display:"flex","flex-direction":"column",gap:"16px"}},Ha={key:0,class:"text-center q-pa-md"},Da={key:1},Na={class:"row items-center q-col-gutter-md q-mb-md"},ja={class:"col"},Ua={key:0,class:"col-auto"},Wa={class:"col-auto"},Ka={class:"col-auto"},Qa={class:"q-my-md text-subtitle2"},Ja={class:"text-primary"},Xa={class:"text-primary"},Ya={class:"text-caption text-grey-6"},Ga={class:"q-mt-lg",style:{"min-height":"200px"}},Za={key:0,class:"q-mt-sm text-subtitle2 text-center"},eo={class:"text-info"},to={class:"text-primary"},lo={class:"text-primary"},no={class:"q-mt-md"},ao={class:"q-col-gutter-sm"},oo={class:"row q-gutter-sm items-end"},io={class:"q-mt-sm"},ro={class:"text-caption"},uo={class:"q-mt-lg"},so={key:0,class:"q-mt-sm"},co={class:"text-caption"},fo={class:"q-mt-lg"},vo={class:"q-mt-sm"},mo={class:"text-caption"},go={class:"q-mt-sm"},ho={class:"text-caption"},po={class:"row q-col-gutter-md"},bo={class:"col-6"},yo={class:"col-6"},xo={class:"q-mt-md"},_o={class:"q-mt-md"},So={class:"row q-col-gutter-md q-mt-md"},wo={class:"col-6"},Co={class:"col-6"},ko={class:"row q-col-gutter-md q-mt-md"},qo={class:"col-6"},Vo={class:"col-6"},Mo={class:"q-mb-md"},To={class:"row q-col-gutter-md"},Eo={class:"col-6"},Oo={class:"col-6"},Ao={class:"row q-col-gutter-md q-mt-md"},Lo={class:"col-6"},Po={class:"col-6"},Io={class:"row q-col-gutter-md"},$o={class:"col-4"},Fo={class:"col-4"},Bo={class:"col-4"},Ro={class:"row q-col-gutter-md q-mt-md"},zo={class:"col-4"},Ho={class:"col-4"},Do={class:"col-4"},No={class:"q-mt-md"},jo={class:"row q-col-gutter-md"},Uo={class:"col-4"},Wo={class:"col-4"},Ko={class:"col-4"},Qo={class:"row q-col-gutter-md"},Jo={class:"col-6"},Xo={class:"col-6"},Yo={class:"row q-col-gutter-md q-mt-md"},Go={class:"col-6"},Zo={class:"col-6"},ei=5,ti=Il({__name:"SettingsPage",setup(e){const a=[{label:"线性 (Linear)",value:"Linear"},{label:"对数 (Logarithmic)",value:"Logarithmic"},{label:"指数 (Exponential)",value:"Exponential"},{label:"幂 (Power)",value:"Power"},{label:"多项式 (Polynomial)",value:"Polynomial"}],l=N("Power"),r=N(2),t=N("((524.38/x)**(1/1.003))*100"),o=N(1.0261),d=ct({h1_min:0,h1_max:179,s1_min:0,s1_max:255,v1_min:0,v1_max:85,use_range2:!1,h2_min:0,h2_max:179,s2_min:0,s2_max:255,v2_min:0,v2_max:85}),g=ct({min_area:200,canny_min:50,canny_max:150}),_=N(!1),m=N(!1),y=N(!1),k=N(!1),p=N([]),n=ct({min_crop_area:2e4,max_crop_area:52e5,enable_area_filter:!0,a4_ratio_tolerance:.3,max_circularity:.7,min_solidity:.8,max_vertices:8,enable_a4_check:!0}),s=ct({enable:!0,target_width:210,target_height:297,a4_ratio:1.414285714285714,use_short_edge_for_measurement:!0}),c=ct({lower_h:0,lower_s:0,lower_v:0,upper_h:255,upper_s:255,upper_v:80,morph_kernel_size:3}),v=ct({index:0,width:1920,height:1080}),x=[{x:1,y:524.9},{x:1.1,y:477.2},{x:1.2,y:435.4},{x:1.3,y:402.7},{x:1.4,y:373.9},{x:1.5,y:349.6},{x:1.6,y:327.5},{x:1.7,y:307.6},{x:1.8,y:291.5},{x:1.9,y:275.5},{x:2,y:261.2}],M=N([]),S=N(!0),q=h(()=>[...M.value].sort(($,u)=>$.x-u.x)),L=N([]),P=N(""),z=N(0),R=N(0),K=N(0),X=N([]);let se=null;function D(){se!==null&&(clearInterval(se),se=null,console.log("实时监控已停止"))}function le($){return{Linear:"线性",Logarithmic:"对数",Exponential:"指数",Power:"幂函数",Polynomial:"多项式"}[$]||$}function G(){try{if(console.log("开始计算拟合..."),console.log("当前点数据:",M.value),console.log("拟合类型:",l.value),!Array.isArray(M.value)||M.value.length===0){console.error("点数据无效，无法进行拟合"),P.value="Error: No data points",z.value=0;return}const $=M.value.filter(I=>I&&typeof I.x=="number"&&typeof I.y=="number"&&!isNaN(I.x)&&!isNaN(I.y)&&I.x>0&&I.y>0);if($.length<2){console.error("有效数据点不足，需要至少2个点"),P.value="Error: Insufficient valid data points",z.value=0;return}console.log("有效数据点:",$.length,"个");const u=$.map(I=>[I.x,I.y]);let f;switch(console.log("准备进行",l.value,"拟合"),l.value){case"Linear":f=Me.linear(u,{precision:15});break;case"Logarithmic":f=Me.logarithmic(u,{precision:15});break;case"Exponential":f=Me.exponential(u,{precision:15});break;case"Power":f=Me.power(u,{precision:15});break;case"Polynomial":f=Me.polynomial(u,{order:r.value,precision:15});break;default:f=Me.power(u,{precision:15});break}if(!f||typeof f.string!="string"||typeof f.r2!="number")throw new Error("拟合结果无效");P.value=f.string,z.value=f.r2,L.value=$.map(I=>{try{const E=f.predict(I.x)[1];return{x:I.x,y:E}}catch{return console.warn("预测点计算失败，使用原始值"),{x:I.x,y:I.y}}}),console.log("✓ 拟合计算成功:",{type:l.value,equation:f.string,r2:f.r2,dataPoints:u.length,validPoints:$.length}),de()}catch($){console.error("Regression calculation error:",$);try{console.log("尝试基础拟合计算...");const u=M.value.filter(E=>E&&typeof E.x=="number"&&typeof E.y=="number"&&!isNaN(E.x)&&!isNaN(E.y)&&E.x>0&&E.y>0);if(u.length<2)throw new Error("有效数据点不足");const f=u.map(E=>[E.x,E.y]);let I;switch(l.value){case"Linear":I=Me.linear(f);break;case"Logarithmic":I=Me.logarithmic(f);break;case"Exponential":I=Me.exponential(f);break;case"Power":I=Me.power(f);break;case"Polynomial":I=Me.polynomial(f,{order:r.value});break;default:I=Me.power(f);break}P.value=I.string,z.value=I.r2,L.value=u.map(E=>{try{const H=I.predict(E.x)[1];return{x:E.x,y:H}}catch{return{x:E.x,y:E.y}}}),console.log("✓ 基础拟合计算成功"),de()}catch(u){console.error("基础拟合计算也失败:",u),P.value="Error: Calculation failed",z.value=0,L.value=[]}}}async function he(){try{const u=await(await fetch("/api/physical_measurements")).json();if(u&&u.success&&u.measurements&&u.measurements.length>0){const I=u.measurements[0].target?.new_long_px;if(I&&P.value){K.value=I;const E=P.value,H=E.match(/y\s*=\s*([0-9.-]+)(?:\s*\*\s*)?x\^?([0-9.-]+)/);if(H&&H[1]&&H[2]){const ze=parseFloat(H[1]),ke=parseFloat(H[2]);console.log(`Equation parsing: coefficient=${ze}, exponent=${ke}`),console.log(`Current pixel height: ${I}px`),console.log(`Equation: ${E}`);const qe=Math.pow(I/ze,1/ke);if(console.log(`Raw calculation: (${I} / ${ze})^(1 / ${ke}) = ${qe}`),isFinite(qe)&&qe>0){X.value.push(qe),X.value.length>ei&&X.value.shift();const We=X.value.reduce((Te,Ie)=>Te+Ie,0)/X.value.length;(Math.abs(We-R.value)>.01||R.value===0)&&(R.value=We,console.log(`✓ Smoothed distance: ${We.toFixed(3)}m (${(We*100).toFixed(1)}cm) [history: ${X.value.length} samples]`))}else console.warn("Invalid distance calculation result:",qe),X.value.length===0&&(R.value=0)}else console.warn("Failed to parse equation for distance calculation:",E),R.value=0}}}catch($){console.error("Failed to fetch current distance:",$),R.value=0,K.value=0}}function ve(){D(),he(),se=window.setInterval(()=>{he()},1e3),console.log("实时监控已启动")}async function j(){try{S.value=!0,console.log("开始加载配置...");const $=await fetch("/config");if(!$.ok)throw new Error(`Config API failed: ${$.status}`);const u=await $.json(),f=await fetch("/config/custom_string");if(!f.ok)throw new Error(`Custom config API failed: ${f.status}`);const I=await f.json();console.log("Config API Response:",u),console.log("Custom Config API Response:",I);const E=I.success&&I.custom_config?I.custom_config:{};if(E.trendType&&(l.value=E.trendType,console.log("加载趋势类型:",E.trendType)),E.polyDegree&&(r.value=parseInt(E.polyDegree),console.log("加载多项式阶数:",E.polyDegree)),E.distancePoints)try{const H=JSON.parse(E.distancePoints);if(Array.isArray(H)&&H.length>0)M.value=H,console.log("加载测距点数据:",H.length,"个点");else throw new Error("解析的点数据无效")}catch(H){console.error("解析测距点数据失败:",H),M.value=[...x],await pe()}else console.log("使用默认测距点数据"),M.value=[...x],await pe();if((!Array.isArray(M.value)||M.value.length===0)&&(console.warn("点数据无效，使用默认值"),M.value=[...x]),p.value=new Array(M.value.length).fill(!1),E.distance_formula?t.value=E.distance_formula:E.Formula?t.value=E.Formula:E.formula&&(E.formula.includes("y = ")||(t.value=E.formula)),E.correction_factor){const H=parseFloat(E.correction_factor);!isNaN(H)&&H>0&&(o.value=H,console.log("加载边长修正系数:",H))}if(E.hsv_settings){const H=JSON.parse(E.hsv_settings);Object.assign(d,H)}else if(u.detection_params){const H=u.detection_params;Object.assign(d,{h1_min:H.h1_min||0,h1_max:H.h1_max||179,s1_min:H.s1_min||0,s1_max:H.s1_max||255,v1_min:H.v1_min||0,v1_max:H.v1_max||85,h2_min:H.h2_min||0,h2_max:H.h2_max||179,s2_min:H.s2_min||0,s2_max:H.s2_max||255,v2_min:H.v2_min||0,v2_max:H.v2_max||85,use_range2:H.use_range2||!1})}if(E.control_settings){const H=JSON.parse(E.control_settings);Object.assign(g,H)}else if(u.detection_params){const H=u.detection_params;Object.assign(g,{min_area:H.min_area||200,canny_min:H.canny_min||50,canny_max:H.canny_max||150})}if(E.area_filter_settings){const H=JSON.parse(E.area_filter_settings);Object.assign(n,H)}else u.area_filter_params&&Object.assign(n,u.area_filter_params);if(E.perspective_settings){const H=JSON.parse(E.perspective_settings);Object.assign(s,H)}else u.perspective_params&&Object.assign(s,u.perspective_params);if(E.black_detection_settings){const H=JSON.parse(E.black_detection_settings);Object.assign(c,H)}else u.black_detection_params&&Object.assign(c,u.black_detection_params);if(E.camera_settings){const H=JSON.parse(E.camera_settings);Object.assign(v,H)}else u.camera_params&&Object.assign(v,u.camera_params);E.fitting_equation?(P.value=E.fitting_equation,console.log("加载保存的拟合公式:",E.fitting_equation)):(console.log("没有保存的拟合公式，开始重新计算..."),G()),console.log("配置加载完成")}catch($){console.error("Failed to load config:",$),console.log("加载配置失败，使用默认值"),M.value=[...x],p.value=new Array(M.value.length).fill(!1);try{G()}catch(u){console.error("默认拟合计算也失败:",u),P.value="y = 524.38x^-1.003",z.value=0}}finally{S.value=!1,console.log("配置加载状态重置为false")}}async function Z($,u){try{await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:$,value:u})})}catch(f){console.error(`Failed to save config ${$}:`,f)}}async function de(){await Z("fitting_equation",P.value)}async function pe(){await Z("distancePoints",JSON.stringify(M.value))}async function b(){await Z("trendType",l.value)}async function O(){await Z("polyDegree",r.value.toString())}async function Q(){await Z("distance_formula",t.value)}async function ee(){await Z("correction_factor",o.value.toString())}async function ae(){try{await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"hsv_settings",value:JSON.stringify(d)})}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"control_settings",value:JSON.stringify(g)})}),await Q()}catch($){console.error("Error saving configurations:",$)}}async function W(){try{await fetch("/config/area_filter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"area_filter_settings",value:JSON.stringify(n)})}),console.log("Area filter settings updated")}catch($){console.error("Error updating area filter:",$)}}async function U(){try{await fetch("/config/perspective",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"perspective_settings",value:JSON.stringify(s)})}),console.log("Perspective settings updated")}catch($){console.error("Error updating perspective:",$)}}async function te(){try{await fetch("/config/black_detection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"black_detection_settings",value:JSON.stringify(c)})}),console.log("Black detection settings updated")}catch($){console.error("Error updating black detection:",$)}}async function T(){try{await fetch("/config/camera",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(v)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"camera_settings",value:JSON.stringify(v)})}),console.log("Camera settings updated")}catch($){console.error("Error updating camera:",$)}}async function fe(){m.value=!0;try{await Promise.all([ae(),W(),U(),te(),T(),pe(),b(),O(),Q(),ee()]),console.log("All configurations saved successfully"),alert("所有配置已保存成功")}catch($){console.error("Error saving all configs:",$),alert("保存配置时出错，请检查控制台")}finally{m.value=!1}}async function xe(){y.value=!0;try{const u=await(await fetch("/config")).json();u.area_filter_params&&Object.assign(n,u.area_filter_params),u.perspective_params&&Object.assign(s,u.perspective_params),u.black_detection_params&&Object.assign(c,u.black_detection_params),u.camera_params&&Object.assign(v,u.camera_params),console.log("All configurations loaded successfully"),alert("所有配置已加载成功")}catch($){console.error("Error loading all configs:",$),alert("加载配置时出错，请检查控制台")}finally{y.value=!1}}async function Pe(){_.value=!0;try{Object.assign(n,{min_crop_area:2e4,max_crop_area:52e5,enable_area_filter:!0,a4_ratio_tolerance:.3,max_circularity:.7,min_solidity:.8,max_vertices:8,enable_a4_check:!0}),Object.assign(s,{enable:!0,target_width:210,target_height:297,a4_ratio:1.414285714285714,use_short_edge_for_measurement:!0}),Object.assign(c,{lower_h:0,lower_s:0,lower_v:0,upper_h:255,upper_s:255,upper_v:80,morph_kernel_size:3}),Object.assign(v,{index:0,width:1920,height:1080}),t.value="((524.38/x)**(1/1.003))*100",o.value=1.0261,Object.assign(d,{h1_min:0,h1_max:179,s1_min:0,s1_max:255,v1_min:0,v1_max:85,use_range2:!1,h2_min:0,h2_max:179,s2_min:0,s2_max:255,v2_min:0,v2_max:85}),Object.assign(g,{min_area:200,canny_min:50,canny_max:150}),l.value="Power",r.value=2,M.value=[...x],p.value=new Array(x.length).fill(!1),G(),await Promise.all([Z("fitting_equation",""),Z("Formula","")]),await fe(),console.log("All settings reset to default values"),alert("所有设置已重置为默认值")}catch($){console.error("Error resetting to default:",$),alert("重置设置时出错，请检查控制台")}finally{_.value=!1}}async function _e(){k.value=!0;try{const f=(await(await fetch("/control/show_rectangles")).json()).show_all_rectangles;await fetch("/control/show_rectangles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({show:!f})}),console.log(`Rectangle display toggled to: ${!f}`),alert(`矩形显示已${f?"关闭":"开启"}`)}catch($){console.error("Error toggling show rectangles:",$),alert("切换矩形显示时出错，请检查控制台")}finally{k.value=!1}}function Se(){fetch("/control/hsv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),fetch("/control/canny",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g)}),ae()}async function Ve(){M.value.push({x:1,y:0}),p.value.push(!1),await pe(),G()}async function Ce($){M.value.splice($,1),p.value.splice($,1),await pe(),G()}async function Be($){try{p.value[$]=!0;const f=await(await fetch("/api/physical_measurements")).json();if(console.log("API Response:",f),f&&f.success&&f.measurements&&f.measurements.length>0){const I=f.measurements[0],E=I.target?.new_long_px;E&&M.value[$]?(M.value[$].y=E,await pe(),G(),console.log(`Point ${$} calibrated: x=${M.value[$].x}, y=${E}`)):console.error("Failed to get new_long_px from measurement target:",I)}else console.error("Invalid API response structure:",f)}catch(u){console.error("Failed to calibrate point:",u)}finally{p.value[$]=!1}}async function Re(){try{const $=P.value,u=$.match(/y\s*=\s*([0-9.-]+)(?:\s*\*\s*)?x\^?([0-9.-]+)/);if(u&&u[1]&&u[2]){const f=parseFloat(u[1]),I=parseFloat(u[2]);if(console.log(`Parsed equation: coefficient=${f}, exponent=${I}`),I<0){const E=f,H=Math.abs(I),ke=`((${E.toFixed(2)}/x)**(1/${H.toFixed(3)}))*1`;await Z("distance_formula",ke),t.value=ke,console.log(`Original equation: ${$}`),console.log(`Coefficient: ${f}, Exponent: ${I}`),console.log(`Converted formula: ${ke}`),alert(`矫正曲线已保存：${ke}`)}else console.error("Cannot convert positive exponent to distance formula format"),alert("无法转换正指数公式，请使用幂函数拟合")}else console.error("Failed to parse equation:",$),alert("无法解析拟合公式，请确保公式格式正确")}catch($){console.error("Failed to save calibration curve:",$),alert("保存矫正曲线失败")}}return ge(l,async()=>{await b(),G()}),ge(r,async()=>{await O(),G()}),ge(M,async()=>{await pe(),G()},{deep:!0}),Yt(()=>{console.log("SettingsPage 组件挂载"),S.value=!0,P.value="",z.value=0,L.value=[],j().then(()=>{console.log("配置加载完成，开始实时监控"),ve()}).catch($=>{console.error("配置加载失败:",$),S.value=!1})}),Rn(()=>{console.log("SettingsPage 组件卸载，清理资源"),D()}),($,u)=>(Oe(),zn(pn,{padding:""},{default:ie(()=>[u[51]||(u[51]=C("div",{class:"text-h5 q-mb-md"},"曲线拟合设置",-1)),C("div",Ia,[C("div",$a,[A(De,{flat:"",bordered:"",style:{"min-height":"400px"}},{default:ie(()=>[A(He,{style:{display:"flex","flex-direction":"column"}},{default:ie(()=>[u[33]||(u[33]=C("div",{class:"text-h6 q-mb-md"},"视频流预览",-1)),C("div",Fa,[C("div",Ba,[u[31]||(u[31]=C("div",{class:"text-subtitle2 q-mb-xs"},"Processed Stream",-1)),C("img",{src:`/video/processed?formula=${encodeURIComponent(P.value)}`,width:"100%",alt:"Processed",style:{border:"1px solid #ddd","border-radius":"4px","object-fit":"contain"}},null,8,Ra)]),u[32]||(u[32]=C("div",{style:{display:"flex","flex-direction":"column"}},[C("div",{class:"text-subtitle2 q-mb-xs"},"Mask Stream"),C("img",{src:"/video/mask",width:"100%",alt:"Mask",style:{border:"1px solid #ddd","border-radius":"4px","object-fit":"contain"}})],-1))])]),_:1,__:[33]})]),_:1})]),C("div",za,[A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{"default-opened":"",icon:"show_chart",label:"曲线拟合设置","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[S.value?(Oe(),$e("div",Ha,[A(Cn,{color:"primary",size:"2em"}),u[34]||(u[34]=C("div",{class:"q-mt-sm"},"Loading configuration...",-1))])):(Oe(),$e("div",Da,[C("div",Na,[C("div",ja,[A(ca,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=f=>l.value=f),options:a,label:"趋势类型",dense:"","emit-value":"","map-options":"",style:{"min-width":"150px"}},null,8,["modelValue"])]),l.value==="Polynomial"?(Oe(),$e("div",Ua,[A(ce,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=f=>r.value=f),modelModifiers:{number:!0},label:"多项式阶数",type:"number",dense:"",style:{width:"100px"}},null,8,["modelValue"])])):Ft("",!0),C("div",Wa,[A(Ne,{label:"重新计算",color:"primary",dense:"",onClick:G})]),C("div",Ka,[A(Ne,{label:"保存矫正曲线",color:"secondary",dense:"",onClick:Re})])]),A(Tt),C("div",Qa,[C("div",null,[u[35]||(u[35]=Ke(" 拟合公式：",-1)),C("span",Ja,Qe(P.value),1)]),C("div",null,[u[36]||(u[36]=Ke(" R²: ",-1)),C("span",Xa,Qe(z.value.toFixed(8)),1)]),C("div",Ya," 数据点数: "+Qe(q.value.length)+" | 拟合类型: "+Qe(le(l.value)),1)]),C("div",Ga,[A(Ea,{points:L.value,currentDistance:R.value,currentPixelHeight:K.value},null,8,["points","currentDistance","currentPixelHeight"])]),R.value>0?(Oe(),$e("div",Za,[C("div",eo,[u[37]||(u[37]=Ke(" 当前实时距离: ",-1)),C("span",to,Qe((R.value*100).toFixed(1))+" cm",1),u[38]||(u[38]=Ke(" | 像素高度: ",-1)),C("span",lo,Qe(K.value.toFixed(0))+" px",1)])])):Ft("",!0),C("div",no,[u[39]||(u[39]=C("div",{class:"text-subtitle2 q-mb-sm"},"数据点管理",-1)),C("div",ao,[(Oe(!0),$e(Bt,null,Rt(q.value,(f,I)=>(Oe(),$e("div",{key:I,class:"q-mb-sm"},[C("div",oo,[A(ce,{modelValue:f.x,"onUpdate:modelValue":E=>f.x=E,modelModifiers:{number:!0},label:"距离 (m)",type:"number",dense:""},null,8,["modelValue","onUpdate:modelValue"]),A(ce,{modelValue:f.y,"onUpdate:modelValue":E=>f.y=E,modelModifiers:{number:!0},label:"像素高度",type:"number",dense:""},null,8,["modelValue","onUpdate:modelValue"]),A(Ne,{icon:"tune",flat:"",dense:"",color:"primary",onClick:E=>Be(I),loading:p.value[I],size:"sm",title:"矫正此点"},null,8,["onClick","loading"]),A(Ne,{icon:"delete",flat:"",dense:"",color:"negative",onClick:E=>Ce(I),size:"sm"},null,8,["onClick"])])]))),128)),C("div",io,[A(Ne,{icon:"add",label:"添加数据点",color:"primary",dense:"",onClick:Ve})])])])]))]),_:1})]),_:1})]),_:1}),A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{icon:"tune",label:"修正系数设置","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[u[40]||(u[40]=C("div",{class:"text-subtitle2 q-mb-sm"},"距离公式",-1)),A(ce,{modelValue:t.value,"onUpdate:modelValue":[u[2]||(u[2]=f=>t.value=f),Q],label:"公式",dense:"",clearable:""},null,8,["modelValue"]),u[41]||(u[41]=C("div",{class:"text-caption text-grey-6 q-mt-xs"}," 用于距离计算的公式，格式如：((524.38/x)**(1/1.003))*100 ",-1)),A(Tt,{class:"q-my-md"}),u[42]||(u[42]=C("div",{class:"text-subtitle2 q-mb-sm"},"边长修正系数",-1)),A(ce,{modelValue:o.value,"onUpdate:modelValue":[u[3]||(u[3]=f=>o.value=f),ee],modelModifiers:{number:!0},label:"边长修正系数",type:"number",step:"0.0001",dense:""},null,8,["modelValue"]),u[43]||(u[43]=C("div",{class:"text-caption text-grey-6 q-mt-xs"}," 用于修正物理边长测量的系数，默认值：1.0261 ",-1))]),_:1,__:[40,41,42,43]})]),_:1})]),_:1}),A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{icon:"palette",label:"HSV颜色检测设置","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[u[48]||(u[48]=C("div",{class:"text-subtitle2"},"HSV 范围 1",-1)),(Oe(),$e(Bt,null,Rt(["h1_min","h1_max","s1_min","s1_max","v1_min","v1_max"],f=>C("div",{key:f,class:"q-mt-sm"},[C("label",ro,[Ke(Qe(f.toUpperCase())+": ",1),A(kt,{"model-value":d[f],"onUpdate:modelValue":I=>{I!==null&&(d[f]=I,Se())},min:(f.startsWith("h"),0),max:f.startsWith("h")?179:255,label:"","label-always":""},null,8,["model-value","onUpdate:modelValue","min","max"])])])),64)),C("div",uo,[A(_t,{modelValue:d.use_range2,"onUpdate:modelValue":[u[4]||(u[4]=f=>d.use_range2=f),Se],label:"启用第二个HSV范围"},null,8,["modelValue"])]),d.use_range2?(Oe(),$e("div",so,[u[44]||(u[44]=C("div",{class:"text-subtitle2"},"HSV 范围 2",-1)),(Oe(),$e(Bt,null,Rt(["h2_min","h2_max","s2_min","s2_max","v2_min","v2_max"],f=>C("div",{key:f,class:"q-mt-sm"},[C("label",co,[Ke(Qe(f.toUpperCase())+": ",1),A(kt,{"model-value":d[f],"onUpdate:modelValue":I=>{I!==null&&(d[f]=I,Se())},min:(f.startsWith("h"),0),max:f.startsWith("h")?179:255,label:"","label-always":""},null,8,["model-value","onUpdate:modelValue","min","max"])])])),64))])):Ft("",!0),C("div",fo,[u[45]||(u[45]=C("div",{class:"text-subtitle2"},"最小检测面积",-1)),A(ce,{modelValue:g.min_area,"onUpdate:modelValue":[u[5]||(u[5]=f=>g.min_area=f),Se],modelModifiers:{number:!0},type:"number",label:"最小面积",dense:""},null,8,["modelValue"])]),u[49]||(u[49]=C("div",{class:"text-subtitle2 q-mt-lg"},"Canny边缘检测",-1)),C("div",vo,[C("label",mo,[u[46]||(u[46]=Ke(" Canny 低阈值: ",-1)),A(kt,{modelValue:g.canny_min,"onUpdate:modelValue":[u[6]||(u[6]=f=>g.canny_min=f),Se],min:0,max:255,label:"","label-always":""},null,8,["modelValue"])])]),C("div",go,[C("label",ho,[u[47]||(u[47]=Ke(" Canny 高阈值: ",-1)),A(kt,{modelValue:g.canny_max,"onUpdate:modelValue":[u[7]||(u[7]=f=>g.canny_max=f),Se],min:0,max:255,label:"","label-always":""},null,8,["modelValue"])])])]),_:1,__:[48,49]})]),_:1})]),_:1}),A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{icon:"filter_list",label:"面积过滤设置","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[C("div",po,[C("div",bo,[A(ce,{modelValue:n.min_crop_area,"onUpdate:modelValue":[u[8]||(u[8]=f=>n.min_crop_area=f),W],modelModifiers:{number:!0},type:"number",label:"最小裁剪面积",dense:""},null,8,["modelValue"])]),C("div",yo,[A(ce,{modelValue:n.max_crop_area,"onUpdate:modelValue":[u[9]||(u[9]=f=>n.max_crop_area=f),W],modelModifiers:{number:!0},type:"number",label:"最大裁剪面积",dense:""},null,8,["modelValue"])])]),C("div",xo,[A(_t,{modelValue:n.enable_area_filter,"onUpdate:modelValue":[u[10]||(u[10]=f=>n.enable_area_filter=f),W],label:"启用面积过滤"},null,8,["modelValue"])]),C("div",_o,[A(_t,{modelValue:n.enable_a4_check,"onUpdate:modelValue":[u[11]||(u[11]=f=>n.enable_a4_check=f),W],label:"启用A4比例检查"},null,8,["modelValue"])]),C("div",So,[C("div",wo,[A(ce,{modelValue:n.a4_ratio_tolerance,"onUpdate:modelValue":[u[12]||(u[12]=f=>n.a4_ratio_tolerance=f),W],modelModifiers:{number:!0},type:"number",step:"0.1",label:"A4比例容差",dense:""},null,8,["modelValue"])]),C("div",Co,[A(ce,{modelValue:n.max_circularity,"onUpdate:modelValue":[u[13]||(u[13]=f=>n.max_circularity=f),W],modelModifiers:{number:!0},type:"number",step:"0.1",label:"最大圆形度",dense:""},null,8,["modelValue"])])]),C("div",ko,[C("div",qo,[A(ce,{modelValue:n.min_solidity,"onUpdate:modelValue":[u[14]||(u[14]=f=>n.min_solidity=f),W],modelModifiers:{number:!0},type:"number",step:"0.1",label:"最小实心度",dense:""},null,8,["modelValue"])]),C("div",Vo,[A(ce,{modelValue:n.max_vertices,"onUpdate:modelValue":[u[15]||(u[15]=f=>n.max_vertices=f),W],modelModifiers:{number:!0},type:"number",label:"最大顶点数",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{icon:"crop",label:"梯形校正设置","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[C("div",Mo,[A(_t,{modelValue:s.enable,"onUpdate:modelValue":[u[16]||(u[16]=f=>s.enable=f),U],label:"启用梯形校正"},null,8,["modelValue"])]),C("div",To,[C("div",Eo,[A(ce,{modelValue:s.target_width,"onUpdate:modelValue":[u[17]||(u[17]=f=>s.target_width=f),U],modelModifiers:{number:!0},type:"number",label:"目标宽度 (mm)",dense:""},null,8,["modelValue"])]),C("div",Oo,[A(ce,{modelValue:s.target_height,"onUpdate:modelValue":[u[18]||(u[18]=f=>s.target_height=f),U],modelModifiers:{number:!0},type:"number",label:"目标高度 (mm)",dense:""},null,8,["modelValue"])])]),C("div",Ao,[C("div",Lo,[A(ce,{modelValue:s.a4_ratio,"onUpdate:modelValue":[u[19]||(u[19]=f=>s.a4_ratio=f),U],modelModifiers:{number:!0},type:"number",step:"0.1",label:"A4比例",dense:""},null,8,["modelValue"])]),C("div",Po,[A(_t,{modelValue:s.use_short_edge_for_measurement,"onUpdate:modelValue":[u[20]||(u[20]=f=>s.use_short_edge_for_measurement=f),U],label:"使用短边测量"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{icon:"contrast",label:"黑色检测设置","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[u[50]||(u[50]=C("div",{class:"text-subtitle2 q-mb-sm"},"HSV阈值设置",-1)),C("div",Io,[C("div",$o,[A(ce,{modelValue:c.lower_h,"onUpdate:modelValue":[u[21]||(u[21]=f=>c.lower_h=f),te],modelModifiers:{number:!0},type:"number",label:"色调下限",dense:""},null,8,["modelValue"])]),C("div",Fo,[A(ce,{modelValue:c.lower_s,"onUpdate:modelValue":[u[22]||(u[22]=f=>c.lower_s=f),te],modelModifiers:{number:!0},type:"number",label:"饱和度下限",dense:""},null,8,["modelValue"])]),C("div",Bo,[A(ce,{modelValue:c.lower_v,"onUpdate:modelValue":[u[23]||(u[23]=f=>c.lower_v=f),te],modelModifiers:{number:!0},type:"number",label:"明度下限",dense:""},null,8,["modelValue"])])]),C("div",Ro,[C("div",zo,[A(ce,{modelValue:c.upper_h,"onUpdate:modelValue":[u[24]||(u[24]=f=>c.upper_h=f),te],modelModifiers:{number:!0},type:"number",label:"色调上限",dense:""},null,8,["modelValue"])]),C("div",Ho,[A(ce,{modelValue:c.upper_s,"onUpdate:modelValue":[u[25]||(u[25]=f=>c.upper_s=f),te],modelModifiers:{number:!0},type:"number",label:"饱和度上限",dense:""},null,8,["modelValue"])]),C("div",Do,[A(ce,{modelValue:c.upper_v,"onUpdate:modelValue":[u[26]||(u[26]=f=>c.upper_v=f),te],modelModifiers:{number:!0},type:"number",label:"明度上限",dense:""},null,8,["modelValue"])])]),C("div",No,[A(ce,{modelValue:c.morph_kernel_size,"onUpdate:modelValue":[u[27]||(u[27]=f=>c.morph_kernel_size=f),te],modelModifiers:{number:!0},type:"number",label:"形态学核大小",dense:""},null,8,["modelValue"])])]),_:1,__:[50]})]),_:1})]),_:1}),A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{icon:"videocam",label:"摄像头设置","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[C("div",jo,[C("div",Uo,[A(ce,{modelValue:v.index,"onUpdate:modelValue":[u[28]||(u[28]=f=>v.index=f),T],modelModifiers:{number:!0},type:"number",label:"摄像头索引",dense:""},null,8,["modelValue"])]),C("div",Wo,[A(ce,{modelValue:v.width,"onUpdate:modelValue":[u[29]||(u[29]=f=>v.width=f),T],modelModifiers:{number:!0},type:"number",label:"分辨率宽度",dense:""},null,8,["modelValue"])]),C("div",Ko,[A(ce,{modelValue:v.height,"onUpdate:modelValue":[u[30]||(u[30]=f=>v.height=f),T],modelModifiers:{number:!0},type:"number",label:"分辨率高度",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),A(De,{flat:"",bordered:""},{default:ie(()=>[A(Je,{icon:"settings",label:"全局操作","header-class":"text-primary"},{default:ie(()=>[A(He,null,{default:ie(()=>[C("div",Qo,[C("div",Jo,[A(Ne,{color:"warning",outline:"",label:"重置为默认值",onClick:Pe,loading:_.value,icon:"refresh",class:"full-width"},null,8,["loading"])]),C("div",Xo,[A(Ne,{color:"positive",label:"保存所有配置",onClick:fe,loading:m.value,icon:"save",class:"full-width"},null,8,["loading"])])]),C("div",Yo,[C("div",Go,[A(Ne,{color:"info",outline:"",label:"加载配置",onClick:xe,loading:y.value,icon:"download",class:"full-width"},null,8,["loading"])]),C("div",Zo,[A(Ne,{color:"secondary",outline:"",label:"显示状态",onClick:_e,loading:k.value,icon:"visibility",class:"full-width"},null,8,["loading"])])])]),_:1})]),_:1})]),_:1})])])]),_:1,__:[51]}))}}),ri=bn(ti,[["__scopeId","data-v-a78bd251"]]);export{ri as default};
