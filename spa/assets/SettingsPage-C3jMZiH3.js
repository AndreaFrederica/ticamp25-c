import{u as hl,g as Ht,h as pl,i as bl,j as qt,k as Mt,p as Gt,l as Ul,m as Wl,n as Kl,o as Jl,q as Ql,r as Xl,s as Yl,t as Gl,v as Zl,w as en,x as Zt,y as tn,z as ln,A as nn,B as Nt,C as on,e as an,D as rn,E as un,F as sn,G as el,H as cn,I as yl,J as dn,Q as fn,c as Ie,a as ze,b as Ue,f as re,d as tl,_ as vn}from"./_plugin-vue_export-helper-CINA3Xki.js";import{d as _l,e as xl,f as Sl,g as bt,i as mn,R as gn,h as wl,j as hn,b as Cl,k as pn,Q as De}from"./QBtn-BmyzkDqN.js";import{c as dt,g as Je,a as p,h as B,I as Me,P as bn,r as j,J as Xe,K as ut,d as He,L as kl,w as ge,o as jt,b as ft,M as St,l as zt,N as rt,O as yt,T as yn,Q as _n,R as xn,S as Sn,U as wn,n as Vl,V as Cn,W as kn,X as gt,Y as Ne,Z as Vn,_ as qn,$ as At,a0 as Mn,a1 as Tn,a2 as Et,a3 as at,s as ql,C as Fe,A as w,x as Ae,m as it,q as On,t as An,u as ne,y as T,B as Pt,z as We,D as Ke,G as $t,H as Ft}from"./index-D_wNzZOK.js";import{c as En,s as Pn,g as $n}from"./scroll-BxcJXpsR.js";import{C as Fn}from"./chart-xFARWQBw.js";const Ln=dt({name:"QField",inheritAttrs:!1,props:{...Ht,tag:{type:String,default:"label"}},emits:hl,setup(){return pl(bl({tagProp:!0}))}}),Rn={xs:8,sm:10,md:14,lg:20,xl:24},Bn=dt({name:"QChip",props:{...qt,..._l,dense:Boolean,icon:String,iconRight:String,iconRemove:String,iconSelected:String,label:[String,Number],color:String,textColor:String,modelValue:{type:Boolean,default:!0},selected:{type:Boolean,default:null},square:Boolean,outline:Boolean,clickable:Boolean,removable:Boolean,removeAriaLabel:String,tabindex:[String,Number],disable:Boolean,ripple:{type:[Boolean,Object],default:!0}},emits:["update:modelValue","update:selected","remove","click"],setup(e,{slots:a,emit:l}){const{proxy:{$q:r}}=Je(),t=Mt(e,r),i=xl(e,Rn),d=p(()=>e.selected===!0||e.icon!==void 0),h=p(()=>e.selected===!0?e.iconSelected||r.iconSet.chip.selected:e.icon),S=p(()=>e.iconRemove||r.iconSet.chip.remove),v=p(()=>e.disable===!1&&(e.clickable===!0||e.selected!==null)),y=p(()=>{const m=e.outline===!0&&e.color||e.textColor;return"q-chip row inline no-wrap items-center"+(e.outline===!1&&e.color!==void 0?` bg-${e.color}`:"")+(m?` text-${m} q-chip--colored`:"")+(e.disable===!0?" disabled":"")+(e.dense===!0?" q-chip--dense":"")+(e.outline===!0?" q-chip--outline":"")+(e.selected===!0?" q-chip--selected":"")+(v.value===!0?" q-chip--clickable cursor-pointer non-selectable q-hoverable":"")+(e.square===!0?" q-chip--square":"")+(t.value===!0?" q-chip--dark q-dark":"")}),A=p(()=>{const m=e.disable===!0?{tabindex:-1,"aria-disabled":"true"}:{tabindex:e.tabindex||0},_={...m,role:"button","aria-hidden":"false","aria-label":e.removeAriaLabel||r.lang.label.remove};return{chip:m,remove:_}});function b(m){m.keyCode===13&&n(m)}function n(m){e.disable||(l("update:selected",!e.selected),l("click",m))}function s(m){(m.keyCode===void 0||m.keyCode===13)&&(Me(m),e.disable===!1&&(l("update:modelValue",!1),l("remove")))}function f(){const m=[];v.value===!0&&m.push(B("div",{class:"q-focus-helper"})),d.value===!0&&m.push(B(bt,{class:"q-chip__icon q-chip__icon--left",name:h.value}));const _=e.label!==void 0?[B("div",{class:"ellipsis"},[e.label])]:void 0;return m.push(B("div",{class:"q-chip__content col row no-wrap items-center q-anchor--skip"},mn(a.default,_))),e.iconRight&&m.push(B(bt,{class:"q-chip__icon q-chip__icon--right",name:e.iconRight})),e.removable===!0&&m.push(B(bt,{class:"q-chip__icon q-chip__icon--remove cursor-pointer",name:S.value,...A.value.remove,onClick:s,onKeyup:s})),m}return()=>{if(e.modelValue===!1)return;const m={class:y.value,style:i.value};return v.value===!0&&Object.assign(m,A.value.chip,{onClick:n,onKeyup:b}),Sl("div",m,f(),"ripple",e.ripple!==!1&&e.disable!==!0,()=>[[gn,e.ripple]])}}});function Ml(){if(window.getSelection!==void 0){const e=window.getSelection();e.empty!==void 0?e.empty():e.removeAllRanges!==void 0&&(e.removeAllRanges(),bn.is.mobile!==!0&&e.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}const In={target:{type:[Boolean,String,Element],default:!0},noParentEvent:Boolean},zn={...In,contextMenu:Boolean};function Dn({showing:e,avoidEmit:a,configureAnchorEl:l}){const{props:r,proxy:t,emit:i}=Je(),d=j(null);let h=null;function S(n){return d.value===null?!1:n===void 0||n.touches===void 0||n.touches.length<=1}const v={};l===void 0&&(Object.assign(v,{hide(n){t.hide(n)},toggle(n){t.toggle(n),n.qAnchorHandled=!0},toggleKey(n){kl(n,13)===!0&&v.toggle(n)},contextClick(n){t.hide(n),Xe(n),He(()=>{t.show(n),n.qAnchorHandled=!0})},prevent:Xe,mobileTouch(n){if(v.mobileCleanup(n),S(n)!==!0)return;t.hide(n),d.value.classList.add("non-selectable");const s=n.target;ut(v,"anchor",[[s,"touchmove","mobileCleanup","passive"],[s,"touchend","mobileCleanup","passive"],[s,"touchcancel","mobileCleanup","passive"],[d.value,"contextmenu","prevent","notPassive"]]),h=setTimeout(()=>{h=null,t.show(n),n.qAnchorHandled=!0},300)},mobileCleanup(n){d.value.classList.remove("non-selectable"),h!==null&&(clearTimeout(h),h=null),e.value===!0&&n!==void 0&&Ml()}}),l=function(n=r.contextMenu){if(r.noParentEvent===!0||d.value===null)return;let s;n===!0?t.$q.platform.is.mobile===!0?s=[[d.value,"touchstart","mobileTouch","passive"]]:s=[[d.value,"mousedown","hide","passive"],[d.value,"contextmenu","contextClick","notPassive"]]:s=[[d.value,"click","toggle","passive"],[d.value,"keyup","toggleKey","passive"]],ut(v,"anchor",s)});function y(){St(v,"anchor")}function A(n){for(d.value=n;d.value.classList.contains("q-anchor--skip");)d.value=d.value.parentNode;l()}function b(){if(r.target===!1||r.target===""||t.$el.parentNode===null)d.value=null;else if(r.target===!0)A(t.$el.parentNode);else{let n=r.target;if(typeof r.target=="string")try{n=document.querySelector(r.target)}catch{n=void 0}n!=null?(d.value=n.$el||n,l()):(d.value=null,console.error(`Anchor: target "${r.target}" not found`))}}return ge(()=>r.contextMenu,n=>{d.value!==null&&(y(),l(n))}),ge(()=>r.target,()=>{d.value!==null&&y(),b()}),ge(()=>r.noParentEvent,n=>{d.value!==null&&(n===!0?y():l())}),jt(()=>{b(),a!==!0&&r.modelValue===!0&&d.value===null&&i("update:modelValue",!1)}),ft(()=>{h!==null&&clearTimeout(h),y()}),{anchorEl:d,canShow:S,anchorEvents:v}}function Hn(e,a){const l=j(null);let r;function t(h,S){const v=`${S!==void 0?"add":"remove"}EventListener`,y=S!==void 0?S:r;h!==window&&h[v]("scroll",y,zt.passive),window[v]("scroll",y,zt.passive),r=S}function i(){l.value!==null&&(t(l.value),l.value=null)}const d=ge(()=>e.noParentEvent,()=>{l.value!==null&&(i(),a())});return ft(d),{localScrollTarget:l,unconfigureScrollTarget:i,changeScrollEvent:t}}const{notPassiveCapture:Ct}=zt,Ye=[];function kt(e){const a=e.target;if(a===void 0||a.nodeType===8||a.classList.contains("no-pointer-events")===!0)return;let l=Gt.length-1;for(;l>=0;){const r=Gt[l].$;if(r.type.name==="QTooltip"){l--;continue}if(r.type.name!=="QDialog")break;if(r.props.seamless!==!0)return;l--}for(let r=Ye.length-1;r>=0;r--){const t=Ye[r];if((t.anchorEl.value===null||t.anchorEl.value.contains(a)===!1)&&(a===document.body||t.innerRef.value!==null&&t.innerRef.value.contains(a)===!1))e.qClickOutside=!0,t.onClickOutside(e);else return}}function Nn(e){Ye.push(e),Ye.length===1&&(document.addEventListener("mousedown",kt,Ct),document.addEventListener("touchstart",kt,Ct))}function ll(e){const a=Ye.findIndex(l=>l===e);a!==-1&&(Ye.splice(a,1),Ye.length===0&&(document.removeEventListener("mousedown",kt,Ct),document.removeEventListener("touchstart",kt,Ct)))}let nl,ol;function al(e){const a=e.split(" ");return a.length!==2?!1:["top","center","bottom"].includes(a[0])!==!0?(console.error("Anchor/Self position must start with one of top/center/bottom"),!1):["left","middle","right","start","end"].includes(a[1])!==!0?(console.error("Anchor/Self position must end with one of left/middle/right/start/end"),!1):!0}function jn(e){return e?!(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"):!0}const Dt={"start#ltr":"left","start#rtl":"right","end#ltr":"right","end#rtl":"left"};["left","middle","right"].forEach(e=>{Dt[`${e}#ltr`]=e,Dt[`${e}#rtl`]=e});function il(e,a){const l=e.split(" ");return{vertical:l[0],horizontal:Dt[`${l[1]}#${a===!0?"rtl":"ltr"}`]}}function Un(e,a){let{top:l,left:r,right:t,bottom:i,width:d,height:h}=e.getBoundingClientRect();return a!==void 0&&(l-=a[1],r-=a[0],i+=a[1],t+=a[0],d+=a[0],h+=a[1]),{top:l,bottom:i,height:h,left:r,right:t,width:d,middle:r+(t-r)/2,center:l+(i-l)/2}}function Wn(e,a,l){let{top:r,left:t}=e.getBoundingClientRect();return r+=a.top,t+=a.left,l!==void 0&&(r+=l[1],t+=l[0]),{top:r,bottom:r+1,height:1,left:t,right:t+1,width:1,middle:t,center:r}}function Kn(e,a){return{top:0,center:a/2,bottom:a,left:0,middle:e/2,right:e}}function rl(e,a,l,r){return{top:e[l.vertical]-a[r.vertical],left:e[l.horizontal]-a[r.horizontal]}}function Tl(e,a=0){if(e.targetEl===null||e.anchorEl===null||a>5)return;if(e.targetEl.offsetHeight===0||e.targetEl.offsetWidth===0){setTimeout(()=>{Tl(e,a+1)},10);return}const{targetEl:l,offset:r,anchorEl:t,anchorOrigin:i,selfOrigin:d,absoluteOffset:h,fit:S,cover:v,maxHeight:y,maxWidth:A}=e;if(rt.is.ios===!0&&window.visualViewport!==void 0){const E=document.body.style,{offsetLeft:I,offsetTop:z}=window.visualViewport;I!==nl&&(E.setProperty("--q-pe-left",I+"px"),nl=I),z!==ol&&(E.setProperty("--q-pe-top",z+"px"),ol=z)}const{scrollLeft:b,scrollTop:n}=l,s=h===void 0?Un(t,v===!0?[0,0]:r):Wn(t,h,r);Object.assign(l.style,{top:0,left:0,minWidth:null,minHeight:null,maxWidth:A,maxHeight:y,visibility:"visible"});const{offsetWidth:f,offsetHeight:m}=l,{elWidth:_,elHeight:F}=S===!0||v===!0?{elWidth:Math.max(s.width,f),elHeight:v===!0?Math.max(s.height,m):m}:{elWidth:f,elHeight:m};let V={maxWidth:A,maxHeight:y};(S===!0||v===!0)&&(V.minWidth=s.width+"px",v===!0&&(V.minHeight=s.height+"px")),Object.assign(l.style,V);const C=Kn(_,F);let P=rl(s,C,i,d);if(h===void 0||r===void 0)Lt(P,s,C,i,d);else{const{top:E,left:I}=P;Lt(P,s,C,i,d);let z=!1;if(P.top!==E){z=!0;const J=2*r[1];s.center=s.top-=J,s.bottom-=J+2}if(P.left!==I){z=!0;const J=2*r[0];s.middle=s.left-=J,s.right-=J+2}z===!0&&(P=rl(s,C,i,d),Lt(P,s,C,i,d))}V={top:P.top+"px",left:P.left+"px"},P.maxHeight!==void 0&&(V.maxHeight=P.maxHeight+"px",s.height>P.maxHeight&&(V.minHeight=V.maxHeight)),P.maxWidth!==void 0&&(V.maxWidth=P.maxWidth+"px",s.width>P.maxWidth&&(V.minWidth=V.maxWidth)),Object.assign(l.style,V),l.scrollTop!==n&&(l.scrollTop=n),l.scrollLeft!==b&&(l.scrollLeft=b)}function Lt(e,a,l,r,t){const i=l.bottom,d=l.right,h=En(),S=window.innerHeight-h,v=document.body.clientWidth;if(e.top<0||e.top+i>S)if(t.vertical==="center")e.top=a[r.vertical]>S/2?Math.max(0,S-i):0,e.maxHeight=Math.min(i,S);else if(a[r.vertical]>S/2){const y=Math.min(S,r.vertical==="center"?a.center:r.vertical===t.vertical?a.bottom:a.top);e.maxHeight=Math.min(i,y),e.top=Math.max(0,y-i)}else e.top=Math.max(0,r.vertical==="center"?a.center:r.vertical===t.vertical?a.top:a.bottom),e.maxHeight=Math.min(i,S-e.top);if(e.left<0||e.left+d>v)if(e.maxWidth=Math.min(d,v),t.horizontal==="middle")e.left=a[r.horizontal]>v/2?Math.max(0,v-d):0;else if(a[r.horizontal]>v/2){const y=Math.min(v,r.horizontal==="middle"?a.middle:r.horizontal===t.horizontal?a.right:a.left);e.maxWidth=Math.min(d,y),e.left=Math.max(0,y-e.maxWidth)}else e.left=Math.max(0,r.horizontal==="middle"?a.middle:r.horizontal===t.horizontal?a.left:a.right),e.maxWidth=Math.min(d,v-e.left)}const Jn=dt({name:"QMenu",inheritAttrs:!1,props:{...zn,...Kl,...qt,...Wl,persistent:Boolean,autoClose:Boolean,separateClosePopup:Boolean,noEscDismiss:Boolean,noRouteDismiss:Boolean,noRefocus:Boolean,noFocus:Boolean,fit:Boolean,cover:Boolean,square:Boolean,anchor:{type:String,validator:al},self:{type:String,validator:al},offset:{type:Array,validator:jn},scrollTarget:Pn,touchPosition:Boolean,maxHeight:{type:String,default:null},maxWidth:{type:String,default:null}},emits:[...Ul,"click","escapeKey"],setup(e,{slots:a,emit:l,attrs:r}){let t=null,i,d,h;const S=Je(),{proxy:v}=S,{$q:y}=v,A=j(null),b=j(!1),n=p(()=>e.persistent!==!0&&e.noRouteDismiss!==!0),s=Mt(e,y),{registerTick:f,removeTick:m}=Jl(),{registerTimeout:_}=Ql(),{transitionProps:F,transitionStyle:V}=Xl(e),{localScrollTarget:C,changeScrollEvent:P,unconfigureScrollTarget:E}=Hn(e,W),{anchorEl:I,canShow:z}=Dn({showing:b}),{hide:J}=Yl({showing:b,canShow:z,handleShow:pe,handleHide:g,hideOnRouteChange:n,processOnMount:!0}),{showPortal:X,hidePortal:se,renderPortal:H}=Gl(S,A,Z,"menu"),oe={anchorEl:I,innerRef:A,onClickOutside(k){if(e.persistent!==!0&&b.value===!0)return J(k),(k.type==="touchstart"||k.target.classList.contains("q-dialog__backdrop"))&&Me(k),!0}},Y=p(()=>il(e.anchor||(e.cover===!0?"center middle":"bottom start"),y.lang.rtl)),me=p(()=>e.cover===!0?Y.value:il(e.self||"top start",y.lang.rtl)),fe=p(()=>(e.square===!0?" q-menu--square":"")+(s.value===!0?" q-menu--dark q-dark":"")),_e=p(()=>e.autoClose===!0?{onClick:G}:{}),ue=p(()=>b.value===!0&&e.persistent!==!0);ge(ue,k=>{k===!0?(nn(U),Nn(oe)):(Zt(U),ll(oe))});function he(){tn(()=>{let k=A.value;k&&k.contains(document.activeElement)!==!0&&(k=k.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||k.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||k.querySelector("[autofocus], [data-autofocus]")||k,k.focus({preventScroll:!0}))})}function pe(k){if(t=e.noRefocus===!1?document.activeElement:null,Zl(te),X(),W(),i=void 0,k!==void 0&&(e.touchPosition||e.contextMenu)){const ce=yt(k);if(ce.left!==void 0){const{top:ye,left:Pe}=I.value.getBoundingClientRect();i={left:ce.left-Pe,top:ce.top-ye}}}d===void 0&&(d=ge(()=>y.screen.width+"|"+y.screen.height+"|"+e.self+"|"+e.anchor+"|"+y.lang.rtl,N)),e.noFocus!==!0&&document.activeElement.blur(),f(()=>{N(),e.noFocus!==!0&&he()}),_(()=>{y.platform.is.ios===!0&&(h=e.autoClose,A.value.click()),N(),X(!0),l("show",k)},e.transitionDuration)}function g(k){m(),se(),M(!0),t!==null&&(k===void 0||k.qClickOutside!==!0)&&(((k?.type.indexOf("key")===0?t.closest('[tabindex]:not([tabindex^="-"])'):void 0)||t).focus(),t=null),_(()=>{se(!0),l("hide",k)},e.transitionDuration)}function M(k){i=void 0,d!==void 0&&(d(),d=void 0),(k===!0||b.value===!0)&&(en(te),E(),ll(oe),Zt(U)),k!==!0&&(t=null)}function W(){(I.value!==null||e.scrollTarget!==void 0)&&(C.value=$n(I.value,e.scrollTarget),P(C.value,N))}function G(k){h!==!0?(ln(v,k),l("click",k)):h=!1}function te(k){ue.value===!0&&e.noFocus!==!0&&hn(A.value,k.target)!==!0&&he()}function U(k){e.noEscDismiss!==!0&&(l("escapeKey"),J(k))}function N(){Tl({targetEl:A.value,offset:e.offset,anchorEl:I.value,anchorOrigin:Y.value,selfOrigin:me.value,absoluteOffset:i,fit:e.fit,cover:e.cover,maxHeight:e.maxHeight,maxWidth:e.maxWidth})}function Z(){return B(yn,F.value,()=>b.value===!0?B("div",{role:"menu",...r,ref:A,tabindex:-1,class:["q-menu q-position-engine scroll"+fe.value,r.class],style:[r.style,V.value],..._e.value},wl(a.default)):null)}return ft(M),Object.assign(v,{focus:he,updatePosition:N}),H}});let Vt=!1;{const e=document.createElement("div");e.setAttribute("dir","rtl"),Object.assign(e.style,{width:"1px",height:"1px",overflow:"auto"});const a=document.createElement("div");Object.assign(a.style,{width:"1000px",height:"1px"}),document.body.appendChild(e),e.appendChild(a),e.scrollLeft=-1e3,Vt=e.scrollLeft>=0,e.remove()}const Ee=1e3,Qn=["start","center","end","start-force","center-force","end-force"],Ol=Array.prototype.filter,Xn=window.getComputedStyle(document.body).overflowAnchor===void 0?Vl:function(e,a){e!==null&&(e._qOverflowAnimationFrame!==void 0&&cancelAnimationFrame(e._qOverflowAnimationFrame),e._qOverflowAnimationFrame=requestAnimationFrame(()=>{if(e===null)return;e._qOverflowAnimationFrame=void 0;const l=e.children||[];Ol.call(l,t=>t.dataset&&t.dataset.qVsAnchor!==void 0).forEach(t=>{delete t.dataset.qVsAnchor});const r=l[a];r?.dataset&&(r.dataset.qVsAnchor="")}))};function ct(e,a){return e+a}function Rt(e,a,l,r,t,i,d,h){const S=e===window?document.scrollingElement||document.documentElement:e,v=t===!0?"offsetWidth":"offsetHeight",y={scrollStart:0,scrollViewSize:-d-h,scrollMaxSize:0,offsetStart:-d,offsetEnd:-h};if(t===!0?(e===window?(y.scrollStart=window.pageXOffset||window.scrollX||document.body.scrollLeft||0,y.scrollViewSize+=document.documentElement.clientWidth):(y.scrollStart=S.scrollLeft,y.scrollViewSize+=S.clientWidth),y.scrollMaxSize=S.scrollWidth,i===!0&&(y.scrollStart=(Vt===!0?y.scrollMaxSize-y.scrollViewSize:0)-y.scrollStart)):(e===window?(y.scrollStart=window.pageYOffset||window.scrollY||document.body.scrollTop||0,y.scrollViewSize+=document.documentElement.clientHeight):(y.scrollStart=S.scrollTop,y.scrollViewSize+=S.clientHeight),y.scrollMaxSize=S.scrollHeight),l!==null)for(let A=l.previousElementSibling;A!==null;A=A.previousElementSibling)A.classList.contains("q-virtual-scroll--skip")===!1&&(y.offsetStart+=A[v]);if(r!==null)for(let A=r.nextElementSibling;A!==null;A=A.nextElementSibling)A.classList.contains("q-virtual-scroll--skip")===!1&&(y.offsetEnd+=A[v]);if(a!==e){const A=S.getBoundingClientRect(),b=a.getBoundingClientRect();t===!0?(y.offsetStart+=b.left-A.left,y.offsetEnd-=b.width):(y.offsetStart+=b.top-A.top,y.offsetEnd-=b.height),e!==window&&(y.offsetStart+=y.scrollStart),y.offsetEnd+=y.scrollMaxSize-y.offsetStart}return y}function ul(e,a,l,r){a==="end"&&(a=(e===window?document.body:e)[l===!0?"scrollWidth":"scrollHeight"]),e===window?l===!0?(r===!0&&(a=(Vt===!0?document.body.scrollWidth-document.documentElement.clientWidth:0)-a),window.scrollTo(a,window.pageYOffset||window.scrollY||document.body.scrollTop||0)):window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,a):l===!0?(r===!0&&(a=(Vt===!0?e.scrollWidth-e.offsetWidth:0)-a),e.scrollLeft=a):e.scrollTop=a}function ht(e,a,l,r){if(l>=r)return 0;const t=a.length,i=Math.floor(l/Ee),d=Math.floor((r-1)/Ee)+1;let h=e.slice(i,d).reduce(ct,0);return l%Ee!==0&&(h-=a.slice(i*Ee,l).reduce(ct,0)),r%Ee!==0&&r!==t&&(h-=a.slice(r,d*Ee).reduce(ct,0)),h}const Yn={virtualScrollSliceSize:{type:[Number,String],default:10},virtualScrollSliceRatioBefore:{type:[Number,String],default:1},virtualScrollSliceRatioAfter:{type:[Number,String],default:1},virtualScrollItemSize:{type:[Number,String],default:24},virtualScrollStickySizeStart:{type:[Number,String],default:0},virtualScrollStickySizeEnd:{type:[Number,String],default:0},tableColspan:[Number,String]},sl={virtualScrollHorizontal:Boolean,onVirtualScroll:Function,...Yn};function Gn({virtualScrollLength:e,getVirtualScrollTarget:a,getVirtualScrollEl:l,virtualScrollItemSizeComputed:r}){const t=Je(),{props:i,emit:d,proxy:h}=t,{$q:S}=h;let v,y,A,b=[],n;const s=j(0),f=j(0),m=j({}),_=j(null),F=j(null),V=j(null),C=j({from:0,to:0}),P=p(()=>i.tableColspan!==void 0?i.tableColspan:100);r===void 0&&(r=p(()=>i.virtualScrollItemSize));const E=p(()=>r.value+";"+i.virtualScrollHorizontal),I=p(()=>E.value+";"+i.virtualScrollSliceRatioBefore+";"+i.virtualScrollSliceRatioAfter);ge(I,()=>{fe()}),ge(E,z);function z(){me(y,!0)}function J(g){me(g===void 0?y:g)}function X(g,M){const W=a();if(W==null||W.nodeType===8)return;const G=Rt(W,l(),_.value,F.value,i.virtualScrollHorizontal,S.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd);A!==G.scrollViewSize&&fe(G.scrollViewSize),H(W,G,Math.min(e.value-1,Math.max(0,parseInt(g,10)||0)),0,Qn.indexOf(M)!==-1?M:y!==-1&&g>y?"end":"start")}function se(){const g=a();if(g==null||g.nodeType===8)return;const M=Rt(g,l(),_.value,F.value,i.virtualScrollHorizontal,S.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd),W=e.value-1,G=M.scrollMaxSize-M.offsetStart-M.offsetEnd-f.value;if(v===M.scrollStart)return;if(M.scrollMaxSize<=0){H(g,M,0,0);return}A!==M.scrollViewSize&&fe(M.scrollViewSize),oe(C.value.from);const te=Math.floor(M.scrollMaxSize-Math.max(M.scrollViewSize,M.offsetEnd)-Math.min(n[W],M.scrollViewSize/2));if(te>0&&Math.ceil(M.scrollStart)>=te){H(g,M,W,M.scrollMaxSize-M.offsetEnd-b.reduce(ct,0));return}let U=0,N=M.scrollStart-M.offsetStart,Z=N;if(N<=G&&N+M.scrollViewSize>=s.value)N-=s.value,U=C.value.from,Z=N;else for(let k=0;N>=b[k]&&U<W;k++)N-=b[k],U+=Ee;for(;N>0&&U<W;)N-=n[U],N>-M.scrollViewSize?(U++,Z=N):Z=n[U]+N;H(g,M,U,Z)}function H(g,M,W,G,te){const U=typeof te=="string"&&te.indexOf("-force")!==-1,N=U===!0?te.replace("-force",""):te,Z=N!==void 0?N:"start";let k=Math.max(0,W-m.value[Z]),ce=k+m.value.total;ce>e.value&&(ce=e.value,k=Math.max(0,ce-m.value.total)),v=M.scrollStart;const ye=k!==C.value.from||ce!==C.value.to;if(ye===!1&&N===void 0){ue(W);return}const{activeElement:Pe}=document,xe=V.value;ye===!0&&xe!==null&&xe!==Pe&&xe.contains(Pe)===!0&&(xe.addEventListener("focusout",Y),setTimeout(()=>{xe?.removeEventListener("focusout",Y)})),Xn(xe,W-k);const Se=N!==void 0?n.slice(k,W).reduce(ct,0):0;if(ye===!0){const Ve=ce>=C.value.from&&k<=C.value.to?C.value.to:ce;C.value={from:k,to:Ve},s.value=ht(b,n,0,k),f.value=ht(b,n,ce,e.value),requestAnimationFrame(()=>{C.value.to!==ce&&v===M.scrollStart&&(C.value={from:C.value.from,to:ce},f.value=ht(b,n,ce,e.value))})}requestAnimationFrame(()=>{if(v!==M.scrollStart)return;ye===!0&&oe(k);const Ve=n.slice(k,W).reduce(ct,0),we=Ve+M.offsetStart+s.value,Le=we+n[W];let Re=we+G;if(N!==void 0){const $=Ve-Se,u=M.scrollStart+$;Re=U!==!0&&u<we&&Le<u+M.scrollViewSize?u:N==="end"?Le-M.scrollViewSize:we-(N==="start"?0:Math.round((M.scrollViewSize-n[W])/2))}v=Re,ul(g,Re,i.virtualScrollHorizontal,S.lang.rtl),ue(W)})}function oe(g){const M=V.value;if(M){const W=Ol.call(M.children,k=>k.classList&&k.classList.contains("q-virtual-scroll--skip")===!1),G=W.length,te=i.virtualScrollHorizontal===!0?k=>k.getBoundingClientRect().width:k=>k.offsetHeight;let U=g,N,Z;for(let k=0;k<G;){for(N=te(W[k]),k++;k<G&&W[k].classList.contains("q-virtual-scroll--with-prev")===!0;)N+=te(W[k]),k++;Z=N-n[U],Z!==0&&(n[U]+=Z,b[Math.floor(U/Ee)]+=Z),U++}}}function Y(){V.value?.focus()}function me(g,M){const W=1*r.value;(M===!0||Array.isArray(n)===!1)&&(n=[]);const G=n.length;n.length=e.value;for(let U=e.value-1;U>=G;U--)n[U]=W;const te=Math.floor((e.value-1)/Ee);b=[];for(let U=0;U<=te;U++){let N=0;const Z=Math.min((U+1)*Ee,e.value);for(let k=U*Ee;k<Z;k++)N+=n[k];b.push(N)}y=-1,v=void 0,s.value=ht(b,n,0,C.value.from),f.value=ht(b,n,C.value.to,e.value),g>=0?(oe(C.value.from),He(()=>{X(g)})):he()}function fe(g){if(g===void 0&&typeof window<"u"){const N=a();N!=null&&N.nodeType!==8&&(g=Rt(N,l(),_.value,F.value,i.virtualScrollHorizontal,S.lang.rtl,i.virtualScrollStickySizeStart,i.virtualScrollStickySizeEnd).scrollViewSize)}A=g;const M=parseFloat(i.virtualScrollSliceRatioBefore)||0,W=parseFloat(i.virtualScrollSliceRatioAfter)||0,G=1+M+W,te=g===void 0||g<=0?1:Math.ceil(g/r.value),U=Math.max(1,te,Math.ceil((i.virtualScrollSliceSize>0?i.virtualScrollSliceSize:10)/G));m.value={total:Math.ceil(U*G),start:Math.ceil(U*M),center:Math.ceil(U*(.5+M)),end:Math.ceil(U*(1+M)),view:te}}function _e(g,M){const W=i.virtualScrollHorizontal===!0?"width":"height",G={["--q-virtual-scroll-item-"+W]:r.value+"px"};return[g==="tbody"?B(g,{class:"q-virtual-scroll__padding",key:"before",ref:_},[B("tr",[B("td",{style:{[W]:`${s.value}px`,...G},colspan:P.value})])]):B(g,{class:"q-virtual-scroll__padding",key:"before",ref:_,style:{[W]:`${s.value}px`,...G}}),B(g,{class:"q-virtual-scroll__content",key:"content",ref:V,tabindex:-1},M.flat()),g==="tbody"?B(g,{class:"q-virtual-scroll__padding",key:"after",ref:F},[B("tr",[B("td",{style:{[W]:`${f.value}px`,...G},colspan:P.value})])]):B(g,{class:"q-virtual-scroll__padding",key:"after",ref:F,style:{[W]:`${f.value}px`,...G}})]}function ue(g){y!==g&&(i.onVirtualScroll!==void 0&&d("virtualScroll",{index:g,from:C.value.from,to:C.value.to-1,direction:g<y?"decrease":"increase",ref:h}),y=g)}fe();const he=_n(se,S.platform.is.ios===!0?120:35);xn(()=>{fe()});let pe=!1;return Sn(()=>{pe=!0}),wn(()=>{if(pe!==!0)return;const g=a();v!==void 0&&g!==void 0&&g!==null&&g.nodeType!==8?ul(g,v,i.virtualScrollHorizontal,S.lang.rtl):X(y)}),ft(()=>{he.cancel()}),Object.assign(h,{scrollTo:X,reset:z,refresh:J}),{virtualScrollSliceRange:C,virtualScrollSliceSizeComputed:m,setVirtualScrollSize:fe,onVirtualScrollEvt:he,localResetVirtualScroll:me,padVirtualScroll:_e,scrollTo:X,reset:z,refresh:J}}function st(e,a,l){return l<=a?a:Math.min(l,Math.max(a,e))}function cl(e,a,l){if(l<=a)return a;const r=l-a+1;let t=a+(e-a)%r;return t<a&&(t=r+t),t===0?0:t}const dl=e=>["add","add-unique","toggle"].includes(e),Zn=".*+?^${}()|[]\\",eo=Object.keys(Ht);function Bt(e,a){if(typeof e=="function")return e;const l=e!==void 0?e:a;return r=>r!==null&&typeof r=="object"&&l in r?r[l]:r}const to=dt({name:"QSelect",inheritAttrs:!1,props:{...sl,...Nt,...Ht,modelValue:{required:!0},multiple:Boolean,displayValue:[String,Number],displayValueHtml:Boolean,dropdownIcon:String,options:{type:Array,default:()=>[]},optionValue:[Function,String],optionLabel:[Function,String],optionDisable:[Function,String],hideSelected:Boolean,hideDropdownIcon:Boolean,fillInput:Boolean,maxValues:[Number,String],optionsDense:Boolean,optionsDark:{type:Boolean,default:null},optionsSelectedClass:String,optionsHtml:Boolean,optionsCover:Boolean,menuShrink:Boolean,menuAnchor:String,menuSelf:String,menuOffset:Array,popupContentClass:String,popupContentStyle:[String,Array,Object],popupNoRouteDismiss:Boolean,useInput:Boolean,useChips:Boolean,newValueMode:{type:String,validator:dl},mapOptions:Boolean,emitValue:Boolean,disableTabSelection:Boolean,inputDebounce:{type:[Number,String],default:500},inputClass:[Array,String,Object],inputStyle:[Array,String,Object],tabindex:{type:[String,Number],default:0},autocomplete:String,transitionShow:{},transitionHide:{},transitionDuration:{},behavior:{type:String,validator:e=>["default","menu","dialog"].includes(e),default:"default"},virtualScrollItemSize:sl.virtualScrollItemSize.type,onNewValue:Function,onFilter:Function},emits:[...hl,"add","remove","inputValue","keyup","keypress","keydown","popupShow","popupHide","filterAbort"],setup(e,{slots:a,emit:l}){const{proxy:r}=Je(),{$q:t}=r,i=j(!1),d=j(!1),h=j(-1),S=j(""),v=j(!1),y=j(!1);let A=null,b=null,n,s,f,m=null,_,F,V,C;const P=j(null),E=j(null),I=j(null),z=j(null),J=j(null),X=on(e),se=cn(Kt),H=p(()=>Array.isArray(e.options)?e.options.length:0),oe=p(()=>e.virtualScrollItemSize===void 0?e.optionsDense===!0?24:48:e.virtualScrollItemSize),{virtualScrollSliceRange:Y,virtualScrollSliceSizeComputed:me,localResetVirtualScroll:fe,padVirtualScroll:_e,onVirtualScrollEvt:ue,scrollTo:he,setVirtualScrollSize:pe}=Gn({virtualScrollLength:H,getVirtualScrollTarget:El,getVirtualScrollEl:et,virtualScrollItemSizeComputed:oe}),g=bl(),M=p(()=>{const o=e.mapOptions===!0&&e.multiple!==!0,L=e.modelValue!==void 0&&(e.modelValue!==null||o===!0)?e.multiple===!0&&Array.isArray(e.modelValue)?e.modelValue:[e.modelValue]:[];if(e.mapOptions===!0&&Array.isArray(e.options)===!0){const R=e.mapOptions===!0&&n!==void 0?n:[],Q=L.map(ie=>x(ie,R));return e.modelValue===null&&o===!0?Q.filter(ie=>ie!==null):Q}return L}),W=p(()=>{const o={};return eo.forEach(L=>{const R=e[L];R!==void 0&&(o[L]=R)}),o}),G=p(()=>e.optionsDark===null?g.isDark.value:e.optionsDark),te=p(()=>el(M.value)),U=p(()=>{let o="q-field__input q-placeholder col";return e.hideSelected===!0||M.value.length===0?[o,e.inputClass]:(o+=" q-field__input--padding",e.inputClass===void 0?o:[o,e.inputClass])}),N=p(()=>(e.virtualScrollHorizontal===!0?"q-virtual-scroll--horizontal":"")+(e.popupContentClass?" "+e.popupContentClass:"")),Z=p(()=>H.value===0),k=p(()=>M.value.map(o=>O.value(o)).join(", ")),ce=p(()=>e.displayValue!==void 0?e.displayValue:k.value),ye=p(()=>e.optionsHtml===!0?()=>!0:o=>o?.html===!0),Pe=p(()=>e.displayValueHtml===!0||e.displayValue===void 0&&(e.optionsHtml===!0||M.value.some(ye.value))),xe=p(()=>g.focused.value===!0?e.tabindex:-1),Se=p(()=>{const o={tabindex:e.tabindex,role:"combobox","aria-label":e.label,"aria-readonly":e.readonly===!0?"true":"false","aria-autocomplete":e.useInput===!0?"list":"none","aria-expanded":i.value===!0?"true":"false","aria-controls":`${g.targetUid.value}_lb`};return h.value>=0&&(o["aria-activedescendant"]=`${g.targetUid.value}_${h.value}`),o}),Ve=p(()=>({id:`${g.targetUid.value}_lb`,role:"listbox","aria-multiselectable":e.multiple===!0?"true":"false"})),we=p(()=>M.value.map((o,L)=>({index:L,opt:o,html:ye.value(o),selected:!0,removeAtIndex:je,toggleOption:Te,tabindex:xe.value}))),Le=p(()=>{if(H.value===0)return[];const{from:o,to:L}=Y.value;return e.options.slice(o,L).map((R,Q)=>{const ie=q.value(R)===!0,le=K(R)===!0,be=o+Q,de={clickable:!0,active:le,activeClass:u.value,manualFocus:!0,focused:!1,disable:ie,tabindex:-1,dense:e.optionsDense,dark:G.value,role:"option","aria-selected":le===!0?"true":"false",id:`${g.targetUid.value}_${be}`,onClick:()=>{Te(R)}};return ie!==!0&&(h.value===be&&(de.focused=!0),t.platform.is.desktop===!0&&(de.onMousemove=()=>{i.value===!0&&$e(be)})),{index:be,opt:R,html:ye.value(R),label:O.value(R),selected:de.active,focused:de.focused,toggleOption:Te,setOptionIndex:$e,itemProps:de}})}),Re=p(()=>e.dropdownIcon!==void 0?e.dropdownIcon:t.iconSet.arrow.dropdown),$=p(()=>e.optionsCover===!1&&e.outlined!==!0&&e.standout!==!0&&e.borderless!==!0&&e.rounded!==!0),u=p(()=>e.optionsSelectedClass!==void 0?e.optionsSelectedClass:e.color!==void 0?`text-${e.color}`:""),c=p(()=>Bt(e.optionValue,"value")),O=p(()=>Bt(e.optionLabel,"label")),q=p(()=>Bt(e.optionDisable,"disable")),D=p(()=>M.value.map(c.value)),Be=p(()=>{const o={onInput:Kt,onChange:se,onKeydown:Ze,onKeyup:ve,onKeypress:Oe,onFocus:ee,onClick(L){s===!0&&Ne(L)}};return o.onCompositionstart=o.onCompositionupdate=o.onCompositionend=se,o});ge(M,o=>{n=o,e.useInput===!0&&e.fillInput===!0&&e.multiple!==!0&&g.innerLoading.value!==!0&&(d.value!==!0&&i.value!==!0||te.value!==!0)&&(f!==!0&&ot(),(d.value===!0||i.value===!0)&&tt(""))},{immediate:!0}),ge(()=>e.fillInput,ot),ge(i,Tt),ge(H,jl);function Ce(o){return e.emitValue===!0?c.value(o):o}function ke(o){if(o!==-1&&o<M.value.length)if(e.multiple===!0){const L=e.modelValue.slice();l("remove",{index:o,value:L.splice(o,1)[0]}),l("update:modelValue",L)}else l("update:modelValue",null)}function je(o){ke(o),g.focus()}function vt(o,L){const R=Ce(o);if(e.multiple!==!0){e.fillInput===!0&&mt(O.value(o),!0,!0),l("update:modelValue",R);return}if(M.value.length===0){l("add",{index:0,value:R}),l("update:modelValue",e.multiple===!0?[R]:R);return}if(L===!0&&K(o)===!0||e.maxValues!==void 0&&e.modelValue.length>=e.maxValues)return;const Q=e.modelValue.slice();l("add",{index:Q.length,value:R}),Q.push(R),l("update:modelValue",Q)}function Te(o,L){if(g.editable.value!==!0||o===void 0||q.value(o)===!0)return;const R=c.value(o);if(e.multiple!==!0){L!==!0&&(mt(e.fillInput===!0?O.value(o):"",!0,!0),Qe()),E.value?.focus(),(M.value.length===0||gt(c.value(M.value[0]),R)!==!0)&&l("update:modelValue",e.emitValue===!0?R:o);return}if((s!==!0||v.value===!0)&&g.focus(),ee(),M.value.length===0){const le=e.emitValue===!0?R:o;l("add",{index:0,value:le}),l("update:modelValue",e.multiple===!0?[le]:le);return}const Q=e.modelValue.slice(),ie=D.value.findIndex(le=>gt(le,R));if(ie!==-1)l("remove",{index:ie,value:Q.splice(ie,1)[0]});else{if(e.maxValues!==void 0&&Q.length>=e.maxValues)return;const le=e.emitValue===!0?R:o;l("add",{index:Q.length,value:le}),Q.push(le)}l("update:modelValue",Q)}function $e(o){if(t.platform.is.desktop!==!0)return;const L=o!==-1&&o<H.value?o:-1;h.value!==L&&(h.value=L)}function Ge(o=1,L){if(i.value===!0){let R=h.value;do R=cl(R+o,-1,H.value-1);while(R!==-1&&R!==h.value&&q.value(e.options[R])===!0);h.value!==R&&($e(R),he(R),L!==!0&&e.useInput===!0&&e.fillInput===!0&&_t(R>=0?O.value(e.options[R]):_,!0))}}function x(o,L){const R=Q=>gt(c.value(Q),o);return e.options.find(R)||L.find(R)||o}function K(o){const L=c.value(o);return D.value.find(R=>gt(R,L))!==void 0}function ee(o){e.useInput===!0&&E.value!==null&&(o===void 0||E.value===o.target&&o.target.value===k.value)&&E.value.select()}function ae(o){kl(o,27)===!0&&i.value===!0&&(Ne(o),Qe(),ot()),l("keyup",o)}function ve(o){const{value:L}=o.target;if(o.keyCode!==void 0){ae(o);return}if(o.target.value="",A!==null&&(clearTimeout(A),A=null),b!==null&&(clearTimeout(b),b=null),ot(),typeof L=="string"&&L.length!==0){const R=L.toLocaleLowerCase(),Q=le=>{const be=e.options.find(de=>String(le.value(de)).toLocaleLowerCase()===R);return be===void 0?!1:(M.value.indexOf(be)===-1?Te(be):Qe(),!0)},ie=le=>{Q(c)!==!0&&le!==!0&&Q(O)!==!0&&tt(L,!0,()=>ie(!0))};ie()}else g.clearValue(o)}function Oe(o){l("keypress",o)}function Ze(o){if(l("keydown",o),Vn(o)===!0)return;const L=S.value.length!==0&&(e.newValueMode!==void 0||e.onNewValue!==void 0),R=o.shiftKey!==!0&&e.disableTabSelection!==!0&&e.multiple!==!0&&(h.value!==-1||L===!0);if(o.keyCode===27){Xe(o);return}if(o.keyCode===9&&R===!1){lt();return}if(o.target===void 0||o.target.id!==g.targetUid.value||g.editable.value!==!0)return;if(o.keyCode===40&&g.innerLoading.value!==!0&&i.value===!1){Me(o),nt();return}if(o.keyCode===8&&(e.useChips===!0||e.clearable===!0)&&e.hideSelected!==!0&&S.value.length===0){e.multiple===!0&&Array.isArray(e.modelValue)===!0?ke(e.modelValue.length-1):e.multiple!==!0&&e.modelValue!==null&&l("update:modelValue",null);return}(o.keyCode===35||o.keyCode===36)&&(typeof S.value!="string"||S.value.length===0)&&(Me(o),h.value=-1,Ge(o.keyCode===36?1:-1,e.multiple)),(o.keyCode===33||o.keyCode===34)&&me.value!==void 0&&(Me(o),h.value=Math.max(-1,Math.min(H.value,h.value+(o.keyCode===33?-1:1)*me.value.view)),Ge(o.keyCode===33?1:-1,e.multiple)),(o.keyCode===38||o.keyCode===40)&&(Me(o),Ge(o.keyCode===38?-1:1,e.multiple));const Q=H.value;if((V===void 0||C<Date.now())&&(V=""),Q>0&&e.useInput!==!0&&o.key!==void 0&&o.key.length===1&&o.altKey===!1&&o.ctrlKey===!1&&o.metaKey===!1&&(o.keyCode!==32||V.length!==0)){i.value!==!0&&nt(o);const ie=o.key.toLocaleLowerCase(),le=V.length===1&&V[0]===ie;C=Date.now()+1500,le===!1&&(Me(o),V+=ie);const be=new RegExp("^"+V.split("").map(Ot=>Zn.indexOf(Ot)!==-1?"\\"+Ot:Ot).join(".*"),"i");let de=h.value;if(le===!0||de<0||be.test(O.value(e.options[de]))!==!0)do de=cl(de+1,-1,Q-1);while(de!==h.value&&(q.value(e.options[de])===!0||be.test(O.value(e.options[de]))!==!0));h.value!==de&&He(()=>{$e(de),he(de),de>=0&&e.useInput===!0&&e.fillInput===!0&&_t(O.value(e.options[de]),!0)});return}if(!(o.keyCode!==13&&(o.keyCode!==32||e.useInput===!0||V!=="")&&(o.keyCode!==9||R===!1))){if(o.keyCode!==9&&Me(o),h.value!==-1&&h.value<Q){Te(e.options[h.value]);return}if(L===!0){const ie=(le,be)=>{if(be){if(dl(be)!==!0)return}else be=e.newValueMode;if(mt("",e.multiple!==!0,!0),le==null)return;(be==="toggle"?Te:vt)(le,be==="add-unique"),e.multiple!==!0&&(E.value?.focus(),Qe())};if(e.onNewValue!==void 0?l("newValue",S.value,ie):ie(S.value),e.multiple!==!0)return}i.value===!0?lt():g.innerLoading.value!==!0&&nt()}}function et(){return s===!0?J.value:I.value!==null&&I.value.contentEl!==null?I.value.contentEl:void 0}function El(){return et()}function Pl(){return e.hideSelected===!0?[]:a["selected-item"]!==void 0?we.value.map(o=>a["selected-item"](o)).slice():a.selected!==void 0?[].concat(a.selected()):e.useChips===!0?we.value.map((o,L)=>B(Bn,{key:"option-"+L,removable:g.editable.value===!0&&q.value(o.opt)!==!0,dense:!0,textColor:e.color,tabindex:xe.value,onRemove(){o.removeAtIndex(L)}},()=>B("span",{class:"ellipsis",[o.html===!0?"innerHTML":"textContent"]:O.value(o.opt)}))):[B("span",{class:"ellipsis",[Pe.value===!0?"innerHTML":"textContent"]:ce.value})]}function Wt(){if(Z.value===!0)return a["no-option"]!==void 0?a["no-option"]({inputValue:S.value}):void 0;const o=a.option!==void 0?a.option:R=>B(sn,{key:R.index,...R.itemProps},()=>B(rn,()=>B(un,()=>B("span",{[R.html===!0?"innerHTML":"textContent"]:R.label}))));let L=_e("div",Le.value.map(o));return a["before-options"]!==void 0&&(L=a["before-options"]().concat(L)),Cl(a["after-options"],L)}function $l(o,L){const R=L===!0?{...Se.value,...g.splitAttrs.attributes.value}:void 0,Q={ref:L===!0?E:void 0,key:"i_t",class:U.value,style:e.inputStyle,value:S.value!==void 0?S.value:"",type:"search",...R,id:L===!0?g.targetUid.value:void 0,maxlength:e.maxlength,autocomplete:e.autocomplete,"data-autofocus":o===!0||e.autofocus===!0||void 0,disabled:e.disable===!0,readonly:e.readonly===!0,...Be.value};return o!==!0&&s===!0&&(Array.isArray(Q.class)===!0?Q.class=[...Q.class,"no-pointer-events"]:Q.class+=" no-pointer-events"),B("input",Q)}function Kt(o){A!==null&&(clearTimeout(A),A=null),b!==null&&(clearTimeout(b),b=null),!(o&&o.target&&o.target.qComposing===!0)&&(_t(o.target.value||""),f=!0,_=S.value,g.focused.value!==!0&&(s!==!0||v.value===!0)&&g.focus(),e.onFilter!==void 0&&(A=setTimeout(()=>{A=null,tt(S.value)},e.inputDebounce)))}function _t(o,L){S.value!==o&&(S.value=o,L===!0||e.inputDebounce===0||e.inputDebounce==="0"?l("inputValue",o):b=setTimeout(()=>{b=null,l("inputValue",o)},e.inputDebounce))}function mt(o,L,R){f=R!==!0,e.useInput===!0&&(_t(o,!0),(L===!0||R!==!0)&&(_=o),L!==!0&&tt(o))}function tt(o,L,R){if(e.onFilter===void 0||L!==!0&&g.focused.value!==!0)return;g.innerLoading.value===!0?l("filterAbort"):(g.innerLoading.value=!0,y.value=!0),o!==""&&e.multiple!==!0&&M.value.length!==0&&f!==!0&&o===O.value(M.value[0])&&(o="");const Q=setTimeout(()=>{i.value===!0&&(i.value=!1)},10);m!==null&&clearTimeout(m),m=Q,l("filter",o,(ie,le)=>{(L===!0||g.focused.value===!0)&&m===Q&&(clearTimeout(m),typeof ie=="function"&&ie(),y.value=!1,He(()=>{g.innerLoading.value=!1,g.editable.value===!0&&(L===!0?i.value===!0&&Qe():i.value===!0?Tt(!0):i.value=!0),typeof le=="function"&&He(()=>{le(r)}),typeof R=="function"&&He(()=>{R(r)})}))},()=>{g.focused.value===!0&&m===Q&&(clearTimeout(m),g.innerLoading.value=!1,y.value=!1),i.value===!0&&(i.value=!1)})}function Fl(){return B(Jn,{ref:I,class:N.value,style:e.popupContentStyle,modelValue:i.value,fit:e.menuShrink!==!0,cover:e.optionsCover===!0&&Z.value!==!0&&e.useInput!==!0,anchor:e.menuAnchor,self:e.menuSelf,offset:e.menuOffset,dark:G.value,noParentEvent:!0,noRefocus:!0,noFocus:!0,noRouteDismiss:e.popupNoRouteDismiss,square:$.value,transitionShow:e.transitionShow,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,separateClosePopup:!0,...Ve.value,onScrollPassive:ue,onBeforeShow:Qt,onBeforeHide:Ll,onShow:Rl},Wt)}function Ll(o){Xt(o),lt()}function Rl(){pe()}function Bl(o){Ne(o),E.value?.focus(),v.value=!0,window.scrollTo(window.pageXOffset||window.scrollX||document.body.scrollLeft||0,0)}function Il(o){Ne(o),He(()=>{v.value=!1})}function zl(){const o=[B(Ln,{class:`col-auto ${g.fieldClass.value}`,...W.value,for:g.targetUid.value,dark:G.value,square:!0,loading:y.value,itemAligned:!1,filled:!0,stackLabel:S.value.length!==0,...g.splitAttrs.listeners.value,onFocus:Bl,onBlur:Il},{...a,rawControl:()=>g.getControl(!0),before:void 0,after:void 0})];return i.value===!0&&o.push(B("div",{ref:J,class:N.value+" scroll",style:e.popupContentStyle,...Ve.value,onClick:Xe,onScrollPassive:ue},Wt())),B(an,{ref:z,modelValue:d.value,position:e.useInput===!0?"top":void 0,transitionShow:F,transitionHide:e.transitionHide,transitionDuration:e.transitionDuration,noRouteDismiss:e.popupNoRouteDismiss,onBeforeShow:Qt,onBeforeHide:Dl,onHide:Hl,onShow:Nl},()=>B("div",{class:"q-select__dialog"+(G.value===!0?" q-select__dialog--dark q-dark":"")+(v.value===!0?" q-select__dialog--focused":"")},o))}function Dl(o){Xt(o),z.value!==null&&z.value.__updateRefocusTarget(g.rootRef.value.querySelector(".q-field__native > [tabindex]:last-child")),g.focused.value=!1}function Hl(o){Qe(),g.focused.value===!1&&l("blur",o),ot()}function Nl(){const o=document.activeElement;(o===null||o.id!==g.targetUid.value)&&E.value!==null&&E.value!==o&&E.value.focus(),pe()}function lt(){d.value!==!0&&(h.value=-1,i.value===!0&&(i.value=!1),g.focused.value===!1&&(m!==null&&(clearTimeout(m),m=null),g.innerLoading.value===!0&&(l("filterAbort"),g.innerLoading.value=!1,y.value=!1)))}function nt(o){g.editable.value===!0&&(s===!0?(g.onControlFocusin(o),d.value=!0,He(()=>{g.focus()})):g.focus(),e.onFilter!==void 0?tt(S.value):(Z.value!==!0||a["no-option"]!==void 0)&&(i.value=!0))}function Qe(){d.value=!1,lt()}function ot(){e.useInput===!0&&mt(e.multiple!==!0&&e.fillInput===!0&&M.value.length!==0&&O.value(M.value[0])||"",!0,!0)}function Tt(o){let L=-1;if(o===!0){if(M.value.length!==0){const R=c.value(M.value[0]);L=e.options.findIndex(Q=>gt(c.value(Q),R))}fe(L)}$e(L)}function jl(o,L){i.value===!0&&g.innerLoading.value===!1&&(fe(-1,!0),He(()=>{i.value===!0&&g.innerLoading.value===!1&&(o>L?fe():Tt(!0))}))}function Jt(){d.value===!1&&I.value!==null&&I.value.updatePosition()}function Qt(o){o!==void 0&&Ne(o),l("popupShow",o),g.hasPopupOpen=!0,g.onControlFocusin(o)}function Xt(o){o!==void 0&&Ne(o),l("popupHide",o),g.hasPopupOpen=!1,g.onControlFocusout(o)}function Yt(){s=t.platform.is.mobile!==!0&&e.behavior!=="dialog"?!1:e.behavior!=="menu"&&(e.useInput===!0?a["no-option"]!==void 0||e.onFilter!==void 0||Z.value===!1:!0),F=t.platform.is.ios===!0&&s===!0&&e.useInput===!0?"fade":e.transitionShow}return Cn(Yt),kn(Jt),Yt(),ft(()=>{A!==null&&clearTimeout(A),b!==null&&clearTimeout(b)}),Object.assign(r,{showPopup:nt,hidePopup:Qe,removeAtIndex:ke,add:vt,toggleOption:Te,getOptionIndex:()=>h.value,setOptionIndex:$e,moveOptionSelection:Ge,filter:tt,updateMenuPosition:Jt,updateInputValue:mt,isOptionSelected:K,getEmittingOptionValue:Ce,isOptionDisabled:(...o)=>q.value.apply(null,o)===!0,getOptionValue:(...o)=>c.value.apply(null,o),getOptionLabel:(...o)=>O.value.apply(null,o)}),Object.assign(g,{innerValue:M,fieldClass:p(()=>`q-select q-field--auto-height q-select--with${e.useInput!==!0?"out":""}-input q-select--with${e.useChips!==!0?"out":""}-chips q-select--${e.multiple===!0?"multiple":"single"}`),inputRef:P,targetRef:E,hasValue:te,showPopup:nt,floatingLabel:p(()=>e.hideSelected!==!0&&te.value===!0||typeof S.value=="number"||S.value.length!==0||el(e.displayValue)),getControlChild:()=>{if(g.editable.value!==!1&&(d.value===!0||Z.value!==!0||a["no-option"]!==void 0))return s===!0?zl():Fl();g.hasPopupOpen===!0&&(g.hasPopupOpen=!1)},controlEvents:{onFocusin(o){g.onControlFocusin(o)},onFocusout(o){g.onControlFocusout(o,()=>{ot(),lt()})},onClick(o){if(Xe(o),s!==!0&&i.value===!0){lt(),E.value?.focus();return}nt(o)}},getControl:o=>{const L=Pl(),R=o===!0||d.value!==!0||s!==!0;if(e.useInput===!0)L.push($l(o,R));else if(g.editable.value===!0){const ie=R===!0?Se.value:void 0;L.push(B("input",{ref:R===!0?E:void 0,key:"d_t",class:"q-select__focus-target",id:R===!0?g.targetUid.value:void 0,value:ce.value,readonly:!0,"data-autofocus":o===!0||e.autofocus===!0||void 0,...ie,onKeydown:Ze,onKeyup:ae,onKeypress:Oe})),R===!0&&typeof e.autocomplete=="string"&&e.autocomplete.length!==0&&L.push(B("input",{class:"q-select__autocomplete-input",autocomplete:e.autocomplete,tabindex:-1,onKeyup:ve}))}if(X.value!==void 0&&e.disable!==!0&&D.value.length!==0){const ie=D.value.map(le=>B("option",{value:le,selected:!0}));L.push(B("select",{class:"hidden",name:X.value,multiple:e.multiple},ie))}const Q=e.useInput===!0||R!==!0?void 0:g.splitAttrs.attributes.value;return B("div",{class:"q-field__native row items-center",...Q,...g.splitAttrs.listeners.value},L)},getInnerAppend:()=>e.loading!==!0&&y.value!==!0&&e.hideDropdownIcon!==!0?[B(bt,{class:"q-select__dropdown-icon"+(i.value===!0?" rotate-180":""),name:Re.value})]:null}),pl(g)}}),Ut={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},lo=Object.keys(Ut);Ut.all=!0;function fl(e){const a={};for(const l of lo)e[l]===!0&&(a[l]=!0);return Object.keys(a).length===0?Ut:(a.horizontal===!0?a.left=a.right=!0:a.left===!0&&a.right===!0&&(a.horizontal=!0),a.vertical===!0?a.up=a.down=!0:a.up===!0&&a.down===!0&&(a.vertical=!0),a.horizontal===!0&&a.vertical===!0&&(a.all=!0),a)}const no=["INPUT","TEXTAREA"];function vl(e,a){return a.event===void 0&&e.target!==void 0&&e.target.draggable!==!0&&typeof a.handler=="function"&&no.includes(e.target.nodeName.toUpperCase())===!1&&(e.qClonedBy===void 0||e.qClonedBy.indexOf(a.uid)===-1)}function It(e,a,l){const r=yt(e);let t,i=r.left-a.event.x,d=r.top-a.event.y,h=Math.abs(i),S=Math.abs(d);const v=a.direction;v.horizontal===!0&&v.vertical!==!0?t=i<0?"left":"right":v.horizontal!==!0&&v.vertical===!0?t=d<0?"up":"down":v.up===!0&&d<0?(t="up",h>S&&(v.left===!0&&i<0?t="left":v.right===!0&&i>0&&(t="right"))):v.down===!0&&d>0?(t="down",h>S&&(v.left===!0&&i<0?t="left":v.right===!0&&i>0&&(t="right"))):v.left===!0&&i<0?(t="left",h<S&&(v.up===!0&&d<0?t="up":v.down===!0&&d>0&&(t="down"))):v.right===!0&&i>0&&(t="right",h<S&&(v.up===!0&&d<0?t="up":v.down===!0&&d>0&&(t="down")));let y=!1;if(t===void 0&&l===!1){if(a.event.isFirst===!0||a.event.lastDir===void 0)return{};t=a.event.lastDir,y=!0,t==="left"||t==="right"?(r.left-=i,h=0,i=0):(r.top-=d,S=0,d=0)}return{synthetic:y,payload:{evt:e,touch:a.event.mouse!==!0,mouse:a.event.mouse===!0,position:r,direction:t,isFirst:a.event.isFirst,isFinal:l===!0,duration:Date.now()-a.event.time,distance:{x:h,y:S},offset:{x:i,y:d},delta:{x:r.left-a.event.lastX,y:r.top-a.event.lastY}}}}let oo=0;const ao=qn({name:"touch-pan",beforeMount(e,{value:a,modifiers:l}){if(l.mouse!==!0&&rt.has.touch!==!0)return;function r(i,d){l.mouse===!0&&d===!0?Me(i):(l.stop===!0&&Ne(i),l.prevent===!0&&Xe(i))}const t={uid:"qvtp_"+oo++,handler:a,modifiers:l,direction:fl(l),noop:Vl,mouseStart(i){vl(i,t)&&Mn(i)&&(ut(t,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),t.start(i,!0))},touchStart(i){if(vl(i,t)){const d=i.target;ut(t,"temp",[[d,"touchmove","move","notPassiveCapture"],[d,"touchcancel","end","passiveCapture"],[d,"touchend","end","passiveCapture"]]),t.start(i)}},start(i,d){if(rt.is.firefox===!0&&At(e,!0),t.lastEvt=i,d===!0||l.stop===!0){if(t.direction.all!==!0&&(d!==!0||t.modifiers.mouseAllDir!==!0&&t.modifiers.mousealldir!==!0)){const v=i.type.indexOf("mouse")!==-1?new MouseEvent(i.type,i):new TouchEvent(i.type,i);i.defaultPrevented===!0&&Xe(v),i.cancelBubble===!0&&Ne(v),Object.assign(v,{qKeyEvent:i.qKeyEvent,qClickOutside:i.qClickOutside,qAnchorHandled:i.qAnchorHandled,qClonedBy:i.qClonedBy===void 0?[t.uid]:i.qClonedBy.concat(t.uid)}),t.initialEvent={target:i.target,event:v}}Ne(i)}const{left:h,top:S}=yt(i);t.event={x:h,y:S,time:Date.now(),mouse:d===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:h,lastY:S}},move(i){if(t.event===void 0)return;const d=yt(i),h=d.left-t.event.x,S=d.top-t.event.y;if(h===0&&S===0)return;t.lastEvt=i;const v=t.event.mouse===!0,y=()=>{r(i,v);let n;l.preserveCursor!==!0&&l.preservecursor!==!0&&(n=document.documentElement.style.cursor||"",document.documentElement.style.cursor="grabbing"),v===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),Ml(),t.styleCleanup=s=>{if(t.styleCleanup=void 0,n!==void 0&&(document.documentElement.style.cursor=n),document.body.classList.remove("non-selectable"),v===!0){const f=()=>{document.body.classList.remove("no-pointer-events--children")};s!==void 0?setTimeout(()=>{f(),s()},50):f()}else s!==void 0&&s()}};if(t.event.detected===!0){t.event.isFirst!==!0&&r(i,t.event.mouse);const{payload:n,synthetic:s}=It(i,t,!1);n!==void 0&&(t.handler(n)===!1?t.end(i):(t.styleCleanup===void 0&&t.event.isFirst===!0&&y(),t.event.lastX=n.position.left,t.event.lastY=n.position.top,t.event.lastDir=s===!0?void 0:n.direction,t.event.isFirst=!1));return}if(t.direction.all===!0||v===!0&&(t.modifiers.mouseAllDir===!0||t.modifiers.mousealldir===!0)){y(),t.event.detected=!0,t.move(i);return}const A=Math.abs(h),b=Math.abs(S);A!==b&&(t.direction.horizontal===!0&&A>b||t.direction.vertical===!0&&A<b||t.direction.up===!0&&A<b&&S<0||t.direction.down===!0&&A<b&&S>0||t.direction.left===!0&&A>b&&h<0||t.direction.right===!0&&A>b&&h>0?(t.event.detected=!0,t.move(i)):t.end(i,!0))},end(i,d){if(t.event!==void 0){if(St(t,"temp"),rt.is.firefox===!0&&At(e,!1),d===!0)t.styleCleanup?.(),t.event.detected!==!0&&t.initialEvent!==void 0&&t.initialEvent.target.dispatchEvent(t.initialEvent.event);else if(t.event.detected===!0){t.event.isFirst===!0&&t.handler(It(i===void 0?t.lastEvt:i,t).payload);const{payload:h}=It(i===void 0?t.lastEvt:i,t,!0),S=()=>{t.handler(h)};t.styleCleanup!==void 0?t.styleCleanup(S):S()}t.event=void 0,t.initialEvent=void 0,t.lastEvt=void 0}}};if(e.__qtouchpan=t,l.mouse===!0){const i=l.mouseCapture===!0||l.mousecapture===!0?"Capture":"";ut(t,"main",[[e,"mousedown","mouseStart",`passive${i}`]])}rt.has.touch===!0&&ut(t,"main",[[e,"touchstart","touchStart",`passive${l.capture===!0?"Capture":""}`],[e,"touchmove","noop","notPassiveCapture"]])},updated(e,a){const l=e.__qtouchpan;l!==void 0&&(a.oldValue!==a.value&&(typeof value!="function"&&l.end(),l.handler=a.value),l.direction=fl(a.modifiers))},beforeUnmount(e){const a=e.__qtouchpan;a!==void 0&&(a.event!==void 0&&a.end(),St(a,"main"),St(a,"temp"),rt.is.firefox===!0&&At(e,!1),a.styleCleanup?.(),delete e.__qtouchpan)}}),ml="q-slider__marker-labels",io=e=>({value:e}),ro=({marker:e})=>B("div",{key:e.value,style:e.style,class:e.classes},e.label),Al=[34,37,40,33,39,38],uo={...qt,...Nt,min:{type:Number,default:0},max:{type:Number,default:100},innerMin:Number,innerMax:Number,step:{type:Number,default:1,validator:e=>e>=0},snap:Boolean,vertical:Boolean,reverse:Boolean,color:String,markerLabelsClass:String,label:Boolean,labelColor:String,labelTextColor:String,labelAlways:Boolean,switchLabelSide:Boolean,markers:[Boolean,Number],markerLabels:[Boolean,Array,Object,Function],switchMarkerLabelsSide:Boolean,trackImg:String,trackColor:String,innerTrackImg:String,innerTrackColor:String,selectionColor:String,selectionImg:String,thumbSize:{type:String,default:"20px"},trackSize:{type:String,default:"4px"},disable:Boolean,readonly:Boolean,dense:Boolean,tabindex:[String,Number],thumbColor:String,thumbPath:{type:String,default:"M 4, 10 a 6,6 0 1,0 12,0 a 6,6 0 1,0 -12,0"}},so=["pan","update:modelValue","change"];function co({updateValue:e,updatePosition:a,getDragging:l,formAttrs:r}){const{props:t,emit:i,slots:d,proxy:{$q:h}}=Je(),S=Mt(t,h),v=yl(r),y=j(!1),A=j(!1),b=j(!1),n=j(!1),s=p(()=>t.vertical===!0?"--v":"--h"),f=p(()=>"-"+(t.switchLabelSide===!0?"switched":"standard")),m=p(()=>t.vertical===!0?t.reverse===!0:t.reverse!==(h.lang.rtl===!0)),_=p(()=>isNaN(t.innerMin)===!0||t.innerMin<t.min?t.min:t.innerMin),F=p(()=>isNaN(t.innerMax)===!0||t.innerMax>t.max?t.max:t.innerMax),V=p(()=>t.disable!==!0&&t.readonly!==!0&&_.value<F.value),C=p(()=>{if(t.step===0)return K=>K;const x=(String(t.step).trim().split(".")[1]||"").length;return K=>parseFloat(K.toFixed(x))}),P=p(()=>t.step===0?1:t.step),E=p(()=>V.value===!0?t.tabindex||0:-1),I=p(()=>t.max-t.min),z=p(()=>F.value-_.value),J=p(()=>ye(_.value)),X=p(()=>ye(F.value)),se=p(()=>t.vertical===!0?m.value===!0?"bottom":"top":m.value===!0?"right":"left"),H=p(()=>t.vertical===!0?"height":"width"),oe=p(()=>t.vertical===!0?"width":"height"),Y=p(()=>t.vertical===!0?"vertical":"horizontal"),me=p(()=>{const x={role:"slider","aria-valuemin":_.value,"aria-valuemax":F.value,"aria-orientation":Y.value,"data-step":t.step};return t.disable===!0?x["aria-disabled"]="true":t.readonly===!0&&(x["aria-readonly"]="true"),x}),fe=p(()=>`q-slider q-slider${s.value} q-slider--${y.value===!0?"":"in"}active inline no-wrap `+(t.vertical===!0?"row":"column")+(t.disable===!0?" disabled":" q-slider--enabled"+(V.value===!0?" q-slider--editable":""))+(b.value==="both"?" q-slider--focus":"")+(t.label||t.labelAlways===!0?" q-slider--label":"")+(t.labelAlways===!0?" q-slider--label-always":"")+(S.value===!0?" q-slider--dark":"")+(t.dense===!0?" q-slider--dense q-slider--dense"+s.value:""));function _e(x){const K="q-slider__"+x;return`${K} ${K}${s.value} ${K}${s.value}${f.value}`}function ue(x){const K="q-slider__"+x;return`${K} ${K}${s.value}`}const he=p(()=>{const x=t.selectionColor||t.color;return"q-slider__selection absolute"+(x!==void 0?` text-${x}`:"")}),pe=p(()=>ue("markers")+" absolute overflow-hidden"),g=p(()=>ue("track-container")),M=p(()=>_e("pin")),W=p(()=>_e("label")),G=p(()=>_e("text-container")),te=p(()=>_e("marker-labels-container")+(t.markerLabelsClass!==void 0?` ${t.markerLabelsClass}`:"")),U=p(()=>"q-slider__track relative-position no-outline"+(t.trackColor!==void 0?` bg-${t.trackColor}`:"")),N=p(()=>{const x={[oe.value]:t.trackSize};return t.trackImg!==void 0&&(x.backgroundImage=`url(${t.trackImg}) !important`),x}),Z=p(()=>"q-slider__inner absolute"+(t.innerTrackColor!==void 0?` bg-${t.innerTrackColor}`:"")),k=p(()=>{const x=X.value-J.value,K={[se.value]:`${100*J.value}%`,[H.value]:x===0?"2px":`${100*x}%`};return t.innerTrackImg!==void 0&&(K.backgroundImage=`url(${t.innerTrackImg}) !important`),K});function ce(x){const{min:K,max:ee,step:ae}=t;let ve=K+x*(ee-K);if(ae>0){const Oe=(ve-_.value)%ae;ve+=(Math.abs(Oe)>=ae/2?(Oe<0?-1:1)*ae:0)-Oe}return ve=C.value(ve),st(ve,_.value,F.value)}function ye(x){return I.value===0?0:(x-t.min)/I.value}function Pe(x,K){const ee=yt(x),ae=t.vertical===!0?st((ee.top-K.top)/K.height,0,1):st((ee.left-K.left)/K.width,0,1);return st(m.value===!0?1-ae:ae,J.value,X.value)}const xe=p(()=>Tn(t.markers)===!0?t.markers:P.value),Se=p(()=>{const x=[],K=xe.value,ee=t.max;let ae=t.min;do x.push(ae),ae+=K;while(ae<ee);return x.push(ee),x}),Ve=p(()=>{const x=` ${ml}${s.value}-`;return ml+`${x}${t.switchMarkerLabelsSide===!0?"switched":"standard"}${x}${m.value===!0?"rtl":"ltr"}`}),we=p(()=>t.markerLabels===!1?null:$(t.markerLabels).map((x,K)=>({index:K,value:x.value,label:x.label||x.value,classes:Ve.value+(x.classes!==void 0?" "+x.classes:""),style:{...u(x.value),...x.style||{}}}))),Le=p(()=>({markerList:we.value,markerMap:c.value,classes:Ve.value,getStyle:u})),Re=p(()=>{const x=z.value===0?"2px":100*xe.value/z.value;return{...k.value,backgroundSize:t.vertical===!0?`2px ${x}%`:`${x}% 2px`}});function $(x){if(x===!1)return null;if(x===!0)return Se.value.map(io);if(typeof x=="function")return Se.value.map(ee=>{const ae=x(ee);return Et(ae)===!0?{...ae,value:ee}:{value:ee,label:ae}});const K=({value:ee})=>ee>=t.min&&ee<=t.max;return Array.isArray(x)===!0?x.map(ee=>Et(ee)===!0?ee:{value:ee}).filter(K):Object.keys(x).map(ee=>{const ae=x[ee],ve=Number(ee);return Et(ae)===!0?{...ae,value:ve}:{value:ve,label:ae}}).filter(K)}function u(x){return{[se.value]:`${100*(x-t.min)/I.value}%`}}const c=p(()=>{if(t.markerLabels===!1)return null;const x={};return we.value.forEach(K=>{x[K.value]=K}),x});function O(){if(d["marker-label-group"]!==void 0)return d["marker-label-group"](Le.value);const x=d["marker-label"]||ro;return we.value.map(K=>x({marker:K,...Le.value}))}const q=p(()=>[[ao,D,void 0,{[Y.value]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function D(x){x.isFinal===!0?(n.value!==void 0&&(a(x.evt),x.touch===!0&&e(!0),n.value=void 0,i("pan","end")),y.value=!1,b.value=!1):x.isFirst===!0?(n.value=l(x.evt),a(x.evt),e(),y.value=!0,i("pan","start")):(a(x.evt),e())}function Be(){b.value=!1}function Ce(x){a(x,l(x)),e(),A.value=!0,y.value=!0,document.addEventListener("mouseup",ke,!0)}function ke(){A.value=!1,y.value=!1,e(!0),Be(),document.removeEventListener("mouseup",ke,!0)}function je(x){a(x,l(x)),e(!0)}function vt(x){Al.includes(x.keyCode)&&e(!0)}function Te(x){if(t.vertical===!0)return null;const K=h.lang.rtl!==t.reverse?1-x:x;return{transform:`translateX(calc(${2*K-1} * ${t.thumbSize} / 2 + ${50-100*K}%))`}}function $e(x){const K=p(()=>A.value===!1&&(b.value===x.focusValue||b.value==="both")?" q-slider--focus":""),ee=p(()=>`q-slider__thumb q-slider__thumb${s.value} q-slider__thumb${s.value}-${m.value===!0?"rtl":"ltr"} absolute non-selectable`+K.value+(x.thumbColor.value!==void 0?` text-${x.thumbColor.value}`:"")),ae=p(()=>({width:t.thumbSize,height:t.thumbSize,[se.value]:`${100*x.ratio.value}%`,zIndex:b.value===x.focusValue?2:void 0})),ve=p(()=>x.labelColor.value!==void 0?` text-${x.labelColor.value}`:""),Oe=p(()=>Te(x.ratio.value)),Ze=p(()=>"q-slider__text"+(x.labelTextColor.value!==void 0?` text-${x.labelTextColor.value}`:""));return()=>{const et=[B("svg",{class:"q-slider__thumb-shape absolute-full",viewBox:"0 0 20 20","aria-hidden":"true"},[B("path",{d:t.thumbPath})]),B("div",{class:"q-slider__focus-ring fit"})];return(t.label===!0||t.labelAlways===!0)&&(et.push(B("div",{class:M.value+" absolute fit no-pointer-events"+ve.value},[B("div",{class:W.value,style:{minWidth:t.thumbSize}},[B("div",{class:G.value,style:Oe.value},[B("span",{class:Ze.value},x.label.value)])])])),t.name!==void 0&&t.disable!==!0&&v(et,"push")),B("div",{class:ee.value,style:ae.value,...x.getNodeData()},et)}}function Ge(x,K,ee,ae){const ve=[];t.innerTrackColor!=="transparent"&&ve.push(B("div",{key:"inner",class:Z.value,style:k.value})),t.selectionColor!=="transparent"&&ve.push(B("div",{key:"selection",class:he.value,style:x.value})),t.markers!==!1&&ve.push(B("div",{key:"marker",class:pe.value,style:Re.value})),ae(ve);const Oe=[Sl("div",{key:"trackC",class:g.value,tabindex:K.value,...ee.value},[B("div",{class:U.value,style:N.value},ve)],"slide",V.value,()=>q.value)];if(t.markerLabels!==!1){const Ze=t.switchMarkerLabelsSide===!0?"unshift":"push";Oe[Ze](B("div",{key:"markerL",class:te.value},O()))}return Oe}return ft(()=>{document.removeEventListener("mouseup",ke,!0)}),{state:{active:y,focus:b,preventFocus:A,dragging:n,editable:V,classes:fe,tabindex:E,attributes:me,roundValueFn:C,keyStep:P,trackLen:I,innerMin:_,innerMinRatio:J,innerMax:F,innerMaxRatio:X,positionProp:se,sizeProp:H,isReversed:m},methods:{onActivate:Ce,onMobileClick:je,onBlur:Be,onKeyup:vt,getContent:Ge,getThumbRenderFn:$e,convertRatioToModel:ce,convertModelToRatio:ye,getDraggingRatio:Pe}}}const fo=()=>({}),xt=dt({name:"QSlider",props:{...uo,modelValue:{required:!0,default:null,validator:e=>typeof e=="number"||e===null},labelValue:[String,Number]},emits:so,setup(e,{emit:a}){const{proxy:{$q:l}}=Je(),{state:r,methods:t}=co({updateValue:s,updatePosition:m,getDragging:f,formAttrs:dn(e)}),i=j(null),d=j(0),h=j(0);function S(){h.value=e.modelValue===null?r.innerMin.value:st(e.modelValue,r.innerMin.value,r.innerMax.value)}ge(()=>`${e.modelValue}|${r.innerMin.value}|${r.innerMax.value}`,S),S();const v=p(()=>t.convertModelToRatio(h.value)),y=p(()=>r.active.value===!0?d.value:v.value),A=p(()=>{const V={[r.positionProp.value]:`${100*r.innerMinRatio.value}%`,[r.sizeProp.value]:`${100*(y.value-r.innerMinRatio.value)}%`};return e.selectionImg!==void 0&&(V.backgroundImage=`url(${e.selectionImg}) !important`),V}),b=t.getThumbRenderFn({focusValue:!0,getNodeData:fo,ratio:y,label:p(()=>e.labelValue!==void 0?e.labelValue:h.value),thumbColor:p(()=>e.thumbColor||e.color),labelColor:p(()=>e.labelColor),labelTextColor:p(()=>e.labelTextColor)}),n=p(()=>r.editable.value!==!0?{}:l.platform.is.mobile===!0?{onClick:t.onMobileClick}:{onMousedown:t.onActivate,onFocus:_,onBlur:t.onBlur,onKeydown:F,onKeyup:t.onKeyup});function s(V){h.value!==e.modelValue&&a("update:modelValue",h.value),V===!0&&a("change",h.value)}function f(){return i.value.getBoundingClientRect()}function m(V,C=r.dragging.value){const P=t.getDraggingRatio(V,C);h.value=t.convertRatioToModel(P),d.value=e.snap!==!0||e.step===0?P:t.convertModelToRatio(h.value)}function _(){r.focus.value=!0}function F(V){if(Al.includes(V.keyCode)===!1)return;Me(V);const C=([34,33].includes(V.keyCode)?10:1)*r.keyStep.value,P=([34,37,40].includes(V.keyCode)?-1:1)*(r.isReversed.value===!0?-1:1)*(e.vertical===!0?-1:1)*C;h.value=st(r.roundValueFn.value(h.value+P),r.innerMin.value,r.innerMax.value),s()}return()=>{const V=t.getContent(A,r.tabindex,n,C=>{C.push(b())});return B("div",{ref:i,class:r.classes.value+(e.modelValue===null?" q-slider--no-value":""),...r.attributes.value,"aria-valuenow":e.modelValue},V)}}});function vo(e,a){const l=j(null),r=p(()=>e.disable===!0?null:B("span",{ref:l,class:"no-outline",tabindex:-1}));function t(i){const d=a.value;i?.qAvoidFocus!==!0&&(i?.type.indexOf("key")===0?document.activeElement!==d&&d?.contains(document.activeElement)===!0&&d.focus():l.value!==null&&(i===void 0||d?.contains(i.target)===!0)&&l.value.focus())}return{refocusTargetEl:r,refocusTarget:t}}const mo={xs:30,sm:35,md:40,lg:50,xl:60},go={...qt,..._l,...Nt,modelValue:{required:!0,default:null},val:{},trueValue:{default:!0},falseValue:{default:!1},indeterminateValue:{default:null},checkedIcon:String,uncheckedIcon:String,indeterminateIcon:String,toggleOrder:{type:String,validator:e=>e==="tf"||e==="ft"},toggleIndeterminate:Boolean,label:String,leftLabel:Boolean,color:String,keepColor:Boolean,dense:Boolean,disable:Boolean,tabindex:[String,Number]},ho=["update:modelValue"];function po(e,a){const{props:l,slots:r,emit:t,proxy:i}=Je(),{$q:d}=i,h=Mt(l,d),S=j(null),{refocusTargetEl:v,refocusTarget:y}=vo(l,S),A=xl(l,mo),b=p(()=>l.val!==void 0&&Array.isArray(l.modelValue)),n=p(()=>{const H=at(l.val);return b.value===!0?l.modelValue.findIndex(oe=>at(oe)===H):-1}),s=p(()=>b.value===!0?n.value!==-1:at(l.modelValue)===at(l.trueValue)),f=p(()=>b.value===!0?n.value===-1:at(l.modelValue)===at(l.falseValue)),m=p(()=>s.value===!1&&f.value===!1),_=p(()=>l.disable===!0?-1:l.tabindex||0),F=p(()=>`q-${e} cursor-pointer no-outline row inline no-wrap items-center`+(l.disable===!0?" disabled":"")+(h.value===!0?` q-${e}--dark`:"")+(l.dense===!0?` q-${e}--dense`:"")+(l.leftLabel===!0?" reverse":"")),V=p(()=>{const H=s.value===!0?"truthy":f.value===!0?"falsy":"indet",oe=l.color!==void 0&&(l.keepColor===!0||f.value!==!0)?` text-${l.color}`:"";return`q-${e}__inner relative-position non-selectable q-${e}__inner--${H}${oe}`}),C=p(()=>{const H={type:"checkbox"};return l.name!==void 0&&Object.assign(H,{".checked":s.value,"^checked":s.value===!0?"checked":void 0,name:l.name,value:b.value===!0?l.val:l.trueValue}),H}),P=yl(C),E=p(()=>{const H={tabindex:_.value,role:"checkbox","aria-label":l.label,"aria-checked":m.value===!0?"mixed":s.value===!0?"true":"false"};return l.disable===!0&&(H["aria-disabled"]="true"),H});function I(H){H!==void 0&&(Me(H),y(H)),l.disable!==!0&&t("update:modelValue",z(),H)}function z(){if(b.value===!0){if(s.value===!0){const H=l.modelValue.slice();return H.splice(n.value,1),H}return l.modelValue.concat([l.val])}if(s.value===!0){if(l.toggleOrder!=="ft"||l.toggleIndeterminate===!1)return l.falseValue}else if(f.value===!0){if(l.toggleOrder==="ft"||l.toggleIndeterminate===!1)return l.trueValue}else return l.toggleOrder!=="ft"?l.trueValue:l.falseValue;return l.indeterminateValue}function J(H){(H.keyCode===13||H.keyCode===32)&&Me(H)}function X(H){(H.keyCode===13||H.keyCode===32)&&I(H)}const se=a(s,m);return Object.assign(i,{toggle:I}),()=>{const H=se();l.disable!==!0&&P(H,"unshift",` q-${e}__native absolute q-ma-none q-pa-none`);const oe=[B("div",{class:V.value,style:A.value,"aria-hidden":"true"},H)];v.value!==null&&oe.push(v.value);const Y=l.label!==void 0?Cl(r.default,[l.label]):wl(r.default);return Y!==void 0&&oe.push(B("div",{class:`q-${e}__label q-anchor--skip`},Y)),B("div",{ref:S,class:F.value,...E.value,onClick:I,onKeydown:J,onKeyup:X},oe)}}const bo=()=>B("div",{key:"svg",class:"q-checkbox__bg absolute"},[B("svg",{class:"q-checkbox__svg fit absolute-full",viewBox:"0 0 24 24"},[B("path",{class:"q-checkbox__truthy",fill:"none",d:"M1.73,12.91 8.1,19.28 22.79,4.59"}),B("path",{class:"q-checkbox__indet",d:"M4,14H20V10H4"})])]),pt=dt({name:"QCheckbox",props:go,emits:ho,setup(e){const a=bo();function l(r,t){const i=p(()=>(r.value===!0?e.checkedIcon:t.value===!0?e.indeterminateIcon:e.uncheckedIcon)||null);return()=>i.value!==null?[B("div",{key:"icon",class:"q-checkbox__icon-container absolute-full flex flex-center no-wrap"},[B(bt,{class:"q-checkbox__icon",name:i.value})])]:[a]}return po("checkbox",l)}}),yo={class:"q-pa-sm",style:{height:"300px"}},_o=ql({__name:"CurveChart",props:{points:{},currentDistance:{},currentPixelHeight:{}},setup(e){const a=e,l=j(null);let r=null;jt(()=>{if(!l.value)return;const i={type:"line",data:{labels:a.points.map(d=>d.x),datasets:[{label:"拟合曲线",data:a.points.map(d=>d.y),fill:!1,borderColor:"rgb(54, 162, 235)",backgroundColor:"rgba(54, 162, 235, 0.2)",pointRadius:4,pointHoverRadius:6}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{title:{display:!0,text:"距离 (m)"}},y:{title:{display:!0,text:"像素高度 (px)"}}},plugins:{legend:{display:!0}}}};r=new Fn(l.value,i),t()});function t(){if(!r||!a.currentDistance||a.currentDistance<=0){r&&r.data.datasets.length>1&&(r.data.datasets.splice(1,1),r.update("none"));return}const i=a.currentDistance,d=a.currentPixelHeight||0;console.log(`Chart update: distance=${i.toFixed(3)}m, pixel=${d}px`);const h=a.points||[],S=Math.min(...h.map(n=>n.x)),v=Math.max(...h.map(n=>n.x));if(i<S-.1||i>v+.1){const n=Math.min(S,i-.1),s=Math.max(v,i+.1);r.config.options?.scales?.x&&(r.config.options.scales.x.min=n,r.config.options.scales.x.max=s),console.log(`Adjusting X-axis range: ${n.toFixed(2)} to ${s.toFixed(2)}`)}const y=r.config.options?.scales?.x?.min||S,A=r.config.options?.scales?.x?.max||v,b={label:`当前距离: ${(i*100).toFixed(1)} cm`,data:[{x:y,y:d},{x:A,y:d}],fill:!1,borderColor:"rgba(255, 0, 0, 0.8)",backgroundColor:"rgba(255, 0, 0, 0.8)",borderWidth:3,borderDash:[5,5],pointRadius:0,pointHoverRadius:0,showLine:!0,tension:0};r.data.datasets.length>1?r.data.datasets[1]=b:r.data.datasets.push(b),r.update("none")}return ge(()=>a.points,i=>{r&&(r.data.labels=i.map(d=>d.x),r.data.datasets[0].data=i.map(d=>d.y),r.update("none"),t())},{deep:!0}),ge(()=>[a.currentDistance,a.currentPixelHeight],()=>{t()}),(i,d)=>(Ae(),Fe("div",yo,[w("canvas",{ref_key:"canvasRef",ref:l},null,512)]))}});function xo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var wt={exports:{}},So=wt.exports,gl;function wo(){return gl||(gl=1,function(e,a){(function(l,r){r(e)})(So,function(l){function r(b,n,s){return n in b?Object.defineProperty(b,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):b[n]=s,b}var t=Object.assign||function(b){for(var n=1;n<arguments.length;n++){var s=arguments[n];for(var f in s)Object.prototype.hasOwnProperty.call(s,f)&&(b[f]=s[f])}return b};function i(b){if(Array.isArray(b)){for(var n=0,s=Array(b.length);n<b.length;n++)s[n]=b[n];return s}else return Array.from(b)}var d={order:2,precision:2,period:null};function h(b,n){var s=[],f=[];b.forEach(function(C,P){C[1]!==null&&(f.push(C),s.push(n[P]))});var m=f.reduce(function(C,P){return C+P[1]},0),_=m/f.length,F=f.reduce(function(C,P){var E=P[1]-_;return C+E*E},0),V=f.reduce(function(C,P,E){var I=s[E],z=P[1]-I[1];return C+z*z},0);return 1-V/F}function S(b,n){for(var s=b,f=b.length-1,m=[n],_=0;_<f;_++){for(var F=_,V=_+1;V<f;V++)Math.abs(s[_][V])>Math.abs(s[_][F])&&(F=V);for(var C=_;C<f+1;C++){var P=s[C][_];s[C][_]=s[C][F],s[C][F]=P}for(var E=_+1;E<f;E++)for(var I=f;I>=_;I--)s[I][E]-=s[I][_]*s[_][E]/s[_][_]}for(var z=f-1;z>=0;z--){for(var J=0,X=z+1;X<f;X++)J+=s[X][z]*m[X];m[z]=(s[f][z]-J)/s[z][z]}return m}function v(b,n){var s=Math.pow(10,n);return Math.round(b*s)/s}var y={linear:function(n,s){for(var f=[0,0,0,0,0],m=0,_=0;_<n.length;_++)n[_][1]!==null&&(m++,f[0]+=n[_][0],f[1]+=n[_][1],f[2]+=n[_][0]*n[_][0],f[3]+=n[_][0]*n[_][1],f[4]+=n[_][1]*n[_][1]);var F=m*f[2]-f[0]*f[0],V=m*f[3]-f[0]*f[1],C=F===0?0:v(V/F,s.precision),P=v(f[1]/m-C*f[0]/m,s.precision),E=function(J){return[v(J,s.precision),v(C*J+P,s.precision)]},I=n.map(function(z){return E(z[0])});return{points:I,predict:E,equation:[C,P],r2:v(h(n,I),s.precision),string:P===0?"y = "+C+"x":"y = "+C+"x + "+P}},exponential:function(n,s){for(var f=[0,0,0,0,0,0],m=0;m<n.length;m++)n[m][1]!==null&&(f[0]+=n[m][0],f[1]+=n[m][1],f[2]+=n[m][0]*n[m][0]*n[m][1],f[3]+=n[m][1]*Math.log(n[m][1]),f[4]+=n[m][0]*n[m][1]*Math.log(n[m][1]),f[5]+=n[m][0]*n[m][1]);var _=f[1]*f[2]-f[5]*f[5],F=Math.exp((f[2]*f[3]-f[5]*f[4])/_),V=(f[1]*f[4]-f[5]*f[3])/_,C=v(F,s.precision),P=v(V,s.precision),E=function(J){return[v(J,s.precision),v(C*Math.exp(P*J),s.precision)]},I=n.map(function(z){return E(z[0])});return{points:I,predict:E,equation:[C,P],string:"y = "+C+"e^("+P+"x)",r2:v(h(n,I),s.precision)}},logarithmic:function(n,s){for(var f=[0,0,0,0],m=n.length,_=0;_<m;_++)n[_][1]!==null&&(f[0]+=Math.log(n[_][0]),f[1]+=n[_][1]*Math.log(n[_][0]),f[2]+=n[_][1],f[3]+=Math.pow(Math.log(n[_][0]),2));var F=(m*f[1]-f[2]*f[0])/(m*f[3]-f[0]*f[0]),V=v(F,s.precision),C=v((f[2]-V*f[0])/m,s.precision),P=function(z){return[v(z,s.precision),v(v(C+V*Math.log(z),s.precision),s.precision)]},E=n.map(function(I){return P(I[0])});return{points:E,predict:P,equation:[C,V],string:"y = "+C+" + "+V+" ln(x)",r2:v(h(n,E),s.precision)}},power:function(n,s){for(var f=[0,0,0,0,0],m=n.length,_=0;_<m;_++)n[_][1]!==null&&(f[0]+=Math.log(n[_][0]),f[1]+=Math.log(n[_][1])*Math.log(n[_][0]),f[2]+=Math.log(n[_][1]),f[3]+=Math.pow(Math.log(n[_][0]),2));var F=(m*f[1]-f[0]*f[2])/(m*f[3]-Math.pow(f[0],2)),V=(f[2]-F*f[0])/m,C=v(Math.exp(V),s.precision),P=v(F,s.precision),E=function(J){return[v(J,s.precision),v(v(C*Math.pow(J,P),s.precision),s.precision)]},I=n.map(function(z){return E(z[0])});return{points:I,predict:E,equation:[C,P],string:"y = "+C+"x^"+P,r2:v(h(n,I),s.precision)}},polynomial:function(n,s){for(var f=[],m=[],_=0,F=0,V=n.length,C=s.order+1,P=0;P<C;P++){for(var E=0;E<V;E++)n[E][1]!==null&&(_+=Math.pow(n[E][0],P)*n[E][1]);f.push(_),_=0;for(var I=[],z=0;z<C;z++){for(var J=0;J<V;J++)n[J][1]!==null&&(F+=Math.pow(n[J][0],P+z));I.push(F),F=0}m.push(I)}m.push(f);for(var X=S(m,C).map(function(me){return v(me,s.precision)}),se=function(fe){return[v(fe,s.precision),v(X.reduce(function(_e,ue,he){return _e+ue*Math.pow(fe,he)},0),s.precision)]},H=n.map(function(me){return se(me[0])}),oe="y = ",Y=X.length-1;Y>=0;Y--)Y>1?oe+=X[Y]+"x^"+Y+" + ":Y===1?oe+=X[Y]+"x + ":oe+=X[Y];return{string:oe,points:H,predict:se,equation:[].concat(i(X)).reverse(),r2:v(h(n,H),s.precision)}}};function A(){var b=function(s,f){return t({_round:v},s,r({},f,function(m,_){return y[f](m,t({},d,_))}))};return Object.keys(y).reduce(b,{})}l.exports=A()})}(wt)),wt.exports}var Co=wo();const qe=xo(Co),ko={class:"row no-wrap",style:{gap:"16px","align-items":"flex-start"}},Vo={style:{width:"50%",display:"flex","flex-direction":"column"}},qo={style:{display:"flex","flex-direction":"column",gap:"16px"}},Mo={style:{display:"flex","flex-direction":"column"}},To=["src"],Oo={style:{width:"50%",display:"flex","flex-direction":"column",gap:"16px"}},Ao={key:0,class:"text-center q-pa-md"},Eo={key:1},Po={class:"row items-center q-col-gutter-md q-mb-md"},$o={class:"col"},Fo={key:0,class:"col-auto"},Lo={class:"col-auto"},Ro={class:"col-auto"},Bo={class:"q-my-md text-subtitle2"},Io={class:"text-primary"},zo={class:"text-primary"},Do={class:"text-caption text-grey-6"},Ho={class:"q-mt-lg",style:{"min-height":"200px"}},No={key:0,class:"q-mt-sm text-subtitle2 text-center"},jo={class:"text-info"},Uo={class:"text-primary"},Wo={class:"text-primary"},Ko={class:"q-mt-md"},Jo={class:"q-col-gutter-sm"},Qo={class:"row q-gutter-sm items-end"},Xo={class:"q-mt-sm"},Yo={class:"text-caption"},Go={class:"q-mt-lg"},Zo={key:0,class:"q-mt-sm"},ea={class:"text-caption"},ta={class:"q-mt-lg"},la={class:"q-mt-sm"},na={class:"text-caption"},oa={class:"q-mt-sm"},aa={class:"text-caption"},ia={class:"row q-col-gutter-md"},ra={class:"col-6"},ua={class:"col-6"},sa={class:"q-mt-md"},ca={class:"q-mt-md"},da={class:"row q-col-gutter-md q-mt-md"},fa={class:"col-6"},va={class:"col-6"},ma={class:"row q-col-gutter-md q-mt-md"},ga={class:"col-6"},ha={class:"col-6"},pa={class:"q-mb-md"},ba={class:"row q-col-gutter-md"},ya={class:"col-6"},_a={class:"col-6"},xa={class:"row q-col-gutter-md q-mt-md"},Sa={class:"col-6"},wa={class:"col-6"},Ca={class:"row q-col-gutter-md"},ka={class:"col-4"},Va={class:"col-4"},qa={class:"col-4"},Ma={class:"row q-col-gutter-md q-mt-md"},Ta={class:"col-4"},Oa={class:"col-4"},Aa={class:"col-4"},Ea={class:"q-mt-md"},Pa={class:"row q-col-gutter-md"},$a={class:"col-4"},Fa={class:"col-4"},La={class:"col-4"},Ra={class:"row q-col-gutter-md"},Ba={class:"col-6"},Ia={class:"col-6"},za={class:"row q-col-gutter-md q-mt-md"},Da={class:"col-6"},Ha={class:"col-6"},Na=5,ja=ql({__name:"SettingsPage",setup(e){const a=[{label:"线性 (Linear)",value:"Linear"},{label:"对数 (Logarithmic)",value:"Logarithmic"},{label:"指数 (Exponential)",value:"Exponential"},{label:"幂 (Power)",value:"Power"},{label:"多项式 (Polynomial)",value:"Polynomial"}],l=j("Power"),r=j(2),t=j("((524.38/x)**(1/1.003))*100"),i=j(1.0261),d=it({h1_min:0,h1_max:179,s1_min:0,s1_max:255,v1_min:0,v1_max:85,use_range2:!1,h2_min:0,h2_max:179,s2_min:0,s2_max:255,v2_min:0,v2_max:85}),h=it({min_area:200,canny_min:50,canny_max:150}),S=j(!1),v=j(!1),y=j(!1),A=j(!1),b=j([]),n=it({min_crop_area:2e4,max_crop_area:52e5,enable_area_filter:!0,a4_ratio_tolerance:.3,max_circularity:.7,min_solidity:.8,max_vertices:8,enable_a4_check:!0}),s=it({enable:!0,target_width:210,target_height:297,a4_ratio:1.414285714285714,use_short_edge_for_measurement:!0}),f=it({lower_h:0,lower_s:0,lower_v:0,upper_h:255,upper_s:255,upper_v:80,morph_kernel_size:3}),m=it({index:0,width:1920,height:1080}),_=[{x:1,y:524.9},{x:1.1,y:477.2},{x:1.2,y:435.4},{x:1.3,y:402.7},{x:1.4,y:373.9},{x:1.5,y:349.6},{x:1.6,y:327.5},{x:1.7,y:307.6},{x:1.8,y:291.5},{x:1.9,y:275.5},{x:2,y:261.2}],F=j([]),V=j(!0),C=p(()=>[...F.value].sort(($,u)=>$.x-u.x)),P=j([]),E=j(""),I=j(0),z=j(0),J=j(0),X=j([]);let se=null;function H(){se!==null&&(clearInterval(se),se=null,console.log("实时监控已停止"))}function oe($){return{Linear:"线性",Logarithmic:"对数",Exponential:"指数",Power:"幂函数",Polynomial:"多项式"}[$]||$}function Y(){try{if(console.log("开始计算拟合..."),console.log("当前点数据:",F.value),console.log("拟合类型:",l.value),!Array.isArray(F.value)||F.value.length===0){console.error("点数据无效，无法进行拟合"),E.value="Error: No data points",I.value=0;return}const $=F.value.filter(O=>O&&typeof O.x=="number"&&typeof O.y=="number"&&!isNaN(O.x)&&!isNaN(O.y)&&O.x>0&&O.y>0);if($.length<2){console.error("有效数据点不足，需要至少2个点"),E.value="Error: Insufficient valid data points",I.value=0;return}console.log("有效数据点:",$.length,"个");const u=$.map(O=>[O.x,O.y]);let c;switch(console.log("准备进行",l.value,"拟合"),l.value){case"Linear":c=qe.linear(u,{precision:15});break;case"Logarithmic":c=qe.logarithmic(u,{precision:15});break;case"Exponential":c=qe.exponential(u,{precision:15});break;case"Power":c=qe.power(u,{precision:15});break;case"Polynomial":c=qe.polynomial(u,{order:r.value,precision:15});break;default:c=qe.power(u,{precision:15});break}if(!c||typeof c.string!="string"||typeof c.r2!="number")throw new Error("拟合结果无效");E.value=c.string,I.value=c.r2,P.value=$.map(O=>{try{const q=c.predict(O.x)[1];return{x:O.x,y:q}}catch{return console.warn("预测点计算失败，使用原始值"),{x:O.x,y:O.y}}}),console.log("✓ 拟合计算成功:",{type:l.value,equation:c.string,r2:c.r2,dataPoints:u.length,validPoints:$.length}),he()}catch($){console.error("Regression calculation error:",$);try{console.log("尝试基础拟合计算...");const u=F.value.filter(q=>q&&typeof q.x=="number"&&typeof q.y=="number"&&!isNaN(q.x)&&!isNaN(q.y)&&q.x>0&&q.y>0);if(u.length<2)throw new Error("有效数据点不足");const c=u.map(q=>[q.x,q.y]);let O;switch(l.value){case"Linear":O=qe.linear(c);break;case"Logarithmic":O=qe.logarithmic(c);break;case"Exponential":O=qe.exponential(c);break;case"Power":O=qe.power(c);break;case"Polynomial":O=qe.polynomial(c,{order:r.value});break;default:O=qe.power(c);break}E.value=O.string,I.value=O.r2,P.value=u.map(q=>{try{const D=O.predict(q.x)[1];return{x:q.x,y:D}}catch{return{x:q.x,y:q.y}}}),console.log("✓ 基础拟合计算成功"),he()}catch(u){console.error("基础拟合计算也失败:",u),E.value="Error: Calculation failed",I.value=0,P.value=[]}}}async function me(){try{const u=await(await fetch("/api/physical_measurements")).json();if(u&&u.success&&u.measurements&&u.measurements.length>0){const O=u.measurements[0].target?.new_long_px;if(O&&E.value){J.value=O;const q=E.value,D=q.match(/y\s*=\s*([0-9.-]+)(?:\s*\*\s*)?x\^?([0-9.-]+)/);if(D&&D[1]&&D[2]){const Be=parseFloat(D[1]),Ce=parseFloat(D[2]);console.log(`Equation parsing: coefficient=${Be}, exponent=${Ce}`),console.log(`Current pixel height: ${O}px`),console.log(`Equation: ${q}`);const ke=Math.pow(O/Be,1/Ce);if(console.log(`Raw calculation: (${O} / ${Be})^(1 / ${Ce}) = ${ke}`),isFinite(ke)&&ke>0){X.value.push(ke),X.value.length>Na&&X.value.shift();const je=X.value.reduce((Te,$e)=>Te+$e,0)/X.value.length;(Math.abs(je-z.value)>.01||z.value===0)&&(z.value=je,console.log(`✓ Smoothed distance: ${je.toFixed(3)}m (${(je*100).toFixed(1)}cm) [history: ${X.value.length} samples]`))}else console.warn("Invalid distance calculation result:",ke),X.value.length===0&&(z.value=0)}else console.warn("Failed to parse equation for distance calculation:",q),z.value=0}}}catch($){console.error("Failed to fetch current distance:",$),z.value=0,J.value=0}}function fe(){H(),me(),se=window.setInterval(()=>{me()},1e3),console.log("实时监控已启动")}async function _e(){try{V.value=!0,console.log("开始加载配置...");const $=await fetch("/config");if(!$.ok)throw new Error(`Config API failed: ${$.status}`);const u=await $.json(),c=await fetch("/config/custom_string");if(!c.ok)throw new Error(`Custom config API failed: ${c.status}`);const O=await c.json();console.log("Config API Response:",u),console.log("Custom Config API Response:",O);const q=O.success&&O.custom_config?O.custom_config:{};if(q.trendType&&(l.value=q.trendType,console.log("加载趋势类型:",q.trendType)),q.polyDegree&&(r.value=parseInt(q.polyDegree),console.log("加载多项式阶数:",q.polyDegree)),q.distancePoints)try{const D=JSON.parse(q.distancePoints);if(Array.isArray(D)&&D.length>0)F.value=D,console.log("加载测距点数据:",D.length,"个点");else throw new Error("解析的点数据无效")}catch(D){console.error("解析测距点数据失败:",D),F.value=[..._],await pe()}else console.log("使用默认测距点数据"),F.value=[..._],await pe();if((!Array.isArray(F.value)||F.value.length===0)&&(console.warn("点数据无效，使用默认值"),F.value=[..._]),b.value=new Array(F.value.length).fill(!1),q.distance_formula?t.value=q.distance_formula:q.Formula?t.value=q.Formula:q.formula&&(q.formula.includes("y = ")||(t.value=q.formula)),q.correction_factor){const D=parseFloat(q.correction_factor);!isNaN(D)&&D>0&&(i.value=D,console.log("加载边长修正系数:",D))}if(q.hsv_settings){const D=JSON.parse(q.hsv_settings);Object.assign(d,D)}else if(u.detection_params){const D=u.detection_params;Object.assign(d,{h1_min:D.h1_min||0,h1_max:D.h1_max||179,s1_min:D.s1_min||0,s1_max:D.s1_max||255,v1_min:D.v1_min||0,v1_max:D.v1_max||85,h2_min:D.h2_min||0,h2_max:D.h2_max||179,s2_min:D.s2_min||0,s2_max:D.s2_max||255,v2_min:D.v2_min||0,v2_max:D.v2_max||85,use_range2:D.use_range2||!1})}if(q.control_settings){const D=JSON.parse(q.control_settings);Object.assign(h,D)}else if(u.detection_params){const D=u.detection_params;Object.assign(h,{min_area:D.min_area||200,canny_min:D.canny_min||50,canny_max:D.canny_max||150})}if(q.area_filter_settings){const D=JSON.parse(q.area_filter_settings);Object.assign(n,D)}else u.area_filter_params&&Object.assign(n,u.area_filter_params);if(q.perspective_settings){const D=JSON.parse(q.perspective_settings);Object.assign(s,D)}else u.perspective_params&&Object.assign(s,u.perspective_params);if(q.black_detection_settings){const D=JSON.parse(q.black_detection_settings);Object.assign(f,D)}else u.black_detection_params&&Object.assign(f,u.black_detection_params);if(q.camera_settings){const D=JSON.parse(q.camera_settings);Object.assign(m,D)}else u.camera_params&&Object.assign(m,u.camera_params);q.fitting_equation?(E.value=q.fitting_equation,console.log("加载保存的拟合公式:",q.fitting_equation)):(console.log("没有保存的拟合公式，开始重新计算..."),Y()),console.log("配置加载完成")}catch($){console.error("Failed to load config:",$),console.log("加载配置失败，使用默认值"),F.value=[..._],b.value=new Array(F.value.length).fill(!1);try{Y()}catch(u){console.error("默认拟合计算也失败:",u),E.value="y = 524.38x^-1.003",I.value=0}}finally{V.value=!1,console.log("配置加载状态重置为false")}}async function ue($,u){try{await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:$,value:u})})}catch(c){console.error(`Failed to save config ${$}:`,c)}}async function he(){await ue("fitting_equation",E.value)}async function pe(){await ue("distancePoints",JSON.stringify(F.value))}async function g(){await ue("trendType",l.value)}async function M(){await ue("polyDegree",r.value.toString())}async function W(){await ue("distance_formula",t.value)}async function G(){await ue("correction_factor",i.value.toString())}async function te(){try{await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"hsv_settings",value:JSON.stringify(d)})}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"control_settings",value:JSON.stringify(h)})}),await W()}catch($){console.error("Error saving configurations:",$)}}async function U(){try{await fetch("/config/area_filter",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"area_filter_settings",value:JSON.stringify(n)})}),console.log("Area filter settings updated")}catch($){console.error("Error updating area filter:",$)}}async function N(){try{await fetch("/config/perspective",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"perspective_settings",value:JSON.stringify(s)})}),console.log("Perspective settings updated")}catch($){console.error("Error updating perspective:",$)}}async function Z(){try{await fetch("/config/black_detection",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(f)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"black_detection_settings",value:JSON.stringify(f)})}),console.log("Black detection settings updated")}catch($){console.error("Error updating black detection:",$)}}async function k(){try{await fetch("/config/camera",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(m)}),await fetch("/config/custom_string",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({key:"camera_settings",value:JSON.stringify(m)})}),console.log("Camera settings updated")}catch($){console.error("Error updating camera:",$)}}async function ce(){v.value=!0;try{await Promise.all([te(),U(),N(),Z(),k(),pe(),g(),M(),W(),G()]),console.log("All configurations saved successfully"),alert("所有配置已保存成功")}catch($){console.error("Error saving all configs:",$),alert("保存配置时出错，请检查控制台")}finally{v.value=!1}}async function ye(){y.value=!0;try{const u=await(await fetch("/config")).json();u.area_filter_params&&Object.assign(n,u.area_filter_params),u.perspective_params&&Object.assign(s,u.perspective_params),u.black_detection_params&&Object.assign(f,u.black_detection_params),u.camera_params&&Object.assign(m,u.camera_params),console.log("All configurations loaded successfully"),alert("所有配置已加载成功")}catch($){console.error("Error loading all configs:",$),alert("加载配置时出错，请检查控制台")}finally{y.value=!1}}async function Pe(){S.value=!0;try{Object.assign(n,{min_crop_area:2e4,max_crop_area:52e5,enable_area_filter:!0,a4_ratio_tolerance:.3,max_circularity:.7,min_solidity:.8,max_vertices:8,enable_a4_check:!0}),Object.assign(s,{enable:!0,target_width:210,target_height:297,a4_ratio:1.414285714285714,use_short_edge_for_measurement:!0}),Object.assign(f,{lower_h:0,lower_s:0,lower_v:0,upper_h:255,upper_s:255,upper_v:80,morph_kernel_size:3}),Object.assign(m,{index:0,width:1920,height:1080}),t.value="((524.38/x)**(1/1.003))*100",i.value=1.0261,Object.assign(d,{h1_min:0,h1_max:179,s1_min:0,s1_max:255,v1_min:0,v1_max:85,use_range2:!1,h2_min:0,h2_max:179,s2_min:0,s2_max:255,v2_min:0,v2_max:85}),Object.assign(h,{min_area:200,canny_min:50,canny_max:150}),l.value="Power",r.value=2,F.value=[..._],b.value=new Array(_.length).fill(!1),Y(),await Promise.all([ue("fitting_equation",""),ue("Formula","")]),await ce(),console.log("All settings reset to default values"),alert("所有设置已重置为默认值")}catch($){console.error("Error resetting to default:",$),alert("重置设置时出错，请检查控制台")}finally{S.value=!1}}async function xe(){A.value=!0;try{const c=(await(await fetch("/control/show_rectangles")).json()).show_all_rectangles;await fetch("/control/show_rectangles",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({show:!c})}),console.log(`Rectangle display toggled to: ${!c}`),alert(`矩形显示已${c?"关闭":"开启"}`)}catch($){console.error("Error toggling show rectangles:",$),alert("切换矩形显示时出错，请检查控制台")}finally{A.value=!1}}function Se(){fetch("/control/hsv",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(d)}),fetch("/control/canny",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(h)}),te()}async function Ve(){F.value.push({x:1,y:0}),b.value.push(!1),await pe(),Y()}async function we($){F.value.splice($,1),b.value.splice($,1),await pe(),Y()}async function Le($){try{b.value[$]=!0;const c=await(await fetch("/api/physical_measurements")).json();if(console.log("API Response:",c),c&&c.success&&c.measurements&&c.measurements.length>0){const O=c.measurements[0],q=O.target?.new_long_px;q&&F.value[$]?(F.value[$].y=q,await pe(),Y(),console.log(`Point ${$} calibrated: x=${F.value[$].x}, y=${q}`)):console.error("Failed to get new_long_px from measurement target:",O)}else console.error("Invalid API response structure:",c)}catch(u){console.error("Failed to calibrate point:",u)}finally{b.value[$]=!1}}async function Re(){try{const $=E.value,u=$.match(/y\s*=\s*([0-9.-]+)(?:\s*\*\s*)?x\^?([0-9.-]+)/);if(u&&u[1]&&u[2]){const c=parseFloat(u[1]),O=parseFloat(u[2]);if(console.log(`Parsed equation: coefficient=${c}, exponent=${O}`),O<0){const q=c,D=Math.abs(O),Ce=`((${q.toFixed(2)}/x)**(1/${D.toFixed(3)}))*1`;await ue("distance_formula",Ce),t.value=Ce,console.log(`Original equation: ${$}`),console.log(`Coefficient: ${c}, Exponent: ${O}`),console.log(`Converted formula: ${Ce}`),alert(`矫正曲线已保存：${Ce}`)}else console.error("Cannot convert positive exponent to distance formula format"),alert("无法转换正指数公式，请使用幂函数拟合")}else console.error("Failed to parse equation:",$),alert("无法解析拟合公式，请确保公式格式正确")}catch($){console.error("Failed to save calibration curve:",$),alert("保存矫正曲线失败")}}return ge(l,async()=>{await g(),Y()}),ge(r,async()=>{await M(),Y()}),ge(F,async()=>{await pe(),Y()},{deep:!0}),jt(()=>{console.log("SettingsPage 组件挂载"),V.value=!0,E.value="",I.value=0,P.value=[],_e().then(()=>{console.log("配置加载完成，开始实时监控"),fe()}).catch($=>{console.error("配置加载失败:",$),V.value=!1})}),On(()=>{console.log("SettingsPage 组件卸载，清理资源"),H()}),($,u)=>(Ae(),An(fn,{padding:""},{default:ne(()=>[u[51]||(u[51]=w("div",{class:"text-h5 q-mb-md"},"曲线拟合设置",-1)),w("div",ko,[w("div",Vo,[T(ze,{flat:"",bordered:"",style:{"min-height":"400px"}},{default:ne(()=>[T(Ie,{style:{display:"flex","flex-direction":"column"}},{default:ne(()=>[u[33]||(u[33]=w("div",{class:"text-h6 q-mb-md"},"视频流预览",-1)),w("div",qo,[w("div",Mo,[u[31]||(u[31]=w("div",{class:"text-subtitle2 q-mb-xs"},"Processed Stream",-1)),w("img",{src:`/video/processed?formula=${encodeURIComponent(E.value)}`,width:"100%",alt:"Processed",style:{border:"1px solid #ddd","border-radius":"4px","object-fit":"contain"}},null,8,To)]),u[32]||(u[32]=w("div",{style:{display:"flex","flex-direction":"column"}},[w("div",{class:"text-subtitle2 q-mb-xs"},"Mask Stream"),w("img",{src:"/video/mask",width:"100%",alt:"Mask",style:{border:"1px solid #ddd","border-radius":"4px","object-fit":"contain"}})],-1))])]),_:1,__:[33]})]),_:1})]),w("div",Oo,[T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{"default-opened":"",icon:"show_chart",label:"曲线拟合设置","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[V.value?(Ae(),Fe("div",Ao,[T(pn,{color:"primary",size:"2em"}),u[34]||(u[34]=w("div",{class:"q-mt-sm"},"Loading configuration...",-1))])):(Ae(),Fe("div",Eo,[w("div",Po,[w("div",$o,[T(to,{modelValue:l.value,"onUpdate:modelValue":u[0]||(u[0]=c=>l.value=c),options:a,label:"趋势类型",dense:"","emit-value":"","map-options":"",style:{"min-width":"150px"}},null,8,["modelValue"])]),l.value==="Polynomial"?(Ae(),Fe("div",Fo,[T(re,{modelValue:r.value,"onUpdate:modelValue":u[1]||(u[1]=c=>r.value=c),modelModifiers:{number:!0},label:"多项式阶数",type:"number",dense:"",style:{width:"100px"}},null,8,["modelValue"])])):Pt("",!0),w("div",Lo,[T(De,{label:"重新计算",color:"primary",dense:"",onClick:Y})]),w("div",Ro,[T(De,{label:"保存矫正曲线",color:"secondary",dense:"",onClick:Re})])]),T(tl),w("div",Bo,[w("div",null,[u[35]||(u[35]=We(" 拟合公式：",-1)),w("span",Io,Ke(E.value),1)]),w("div",null,[u[36]||(u[36]=We(" R²: ",-1)),w("span",zo,Ke(I.value.toFixed(8)),1)]),w("div",Do," 数据点数: "+Ke(C.value.length)+" | 拟合类型: "+Ke(oe(l.value)),1)]),w("div",Ho,[T(_o,{points:P.value,currentDistance:z.value,currentPixelHeight:J.value},null,8,["points","currentDistance","currentPixelHeight"])]),z.value>0?(Ae(),Fe("div",No,[w("div",jo,[u[37]||(u[37]=We(" 当前实时距离: ",-1)),w("span",Uo,Ke((z.value*100).toFixed(1))+" cm",1),u[38]||(u[38]=We(" | 像素高度: ",-1)),w("span",Wo,Ke(J.value.toFixed(0))+" px",1)])])):Pt("",!0),w("div",Ko,[u[39]||(u[39]=w("div",{class:"text-subtitle2 q-mb-sm"},"数据点管理",-1)),w("div",Jo,[(Ae(!0),Fe($t,null,Ft(C.value,(c,O)=>(Ae(),Fe("div",{key:O,class:"q-mb-sm"},[w("div",Qo,[T(re,{modelValue:c.x,"onUpdate:modelValue":q=>c.x=q,modelModifiers:{number:!0},label:"距离 (m)",type:"number",dense:""},null,8,["modelValue","onUpdate:modelValue"]),T(re,{modelValue:c.y,"onUpdate:modelValue":q=>c.y=q,modelModifiers:{number:!0},label:"像素高度",type:"number",dense:""},null,8,["modelValue","onUpdate:modelValue"]),T(De,{icon:"tune",flat:"",dense:"",color:"primary",onClick:q=>Le(O),loading:b.value[O],size:"sm",title:"矫正此点"},null,8,["onClick","loading"]),T(De,{icon:"delete",flat:"",dense:"",color:"negative",onClick:q=>we(O),size:"sm"},null,8,["onClick"])])]))),128)),w("div",Xo,[T(De,{icon:"add",label:"添加数据点",color:"primary",dense:"",onClick:Ve})])])])]))]),_:1})]),_:1})]),_:1}),T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{icon:"tune",label:"修正系数设置","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[u[40]||(u[40]=w("div",{class:"text-subtitle2 q-mb-sm"},"距离公式",-1)),T(re,{modelValue:t.value,"onUpdate:modelValue":[u[2]||(u[2]=c=>t.value=c),W],label:"公式",dense:"",clearable:""},null,8,["modelValue"]),u[41]||(u[41]=w("div",{class:"text-caption text-grey-6 q-mt-xs"}," 用于距离计算的公式，格式如：((524.38/x)**(1/1.003))*100 ",-1)),T(tl,{class:"q-my-md"}),u[42]||(u[42]=w("div",{class:"text-subtitle2 q-mb-sm"},"边长修正系数",-1)),T(re,{modelValue:i.value,"onUpdate:modelValue":[u[3]||(u[3]=c=>i.value=c),G],modelModifiers:{number:!0},label:"边长修正系数",type:"number",step:"0.0001",dense:""},null,8,["modelValue"]),u[43]||(u[43]=w("div",{class:"text-caption text-grey-6 q-mt-xs"}," 用于修正物理边长测量的系数，默认值：1.0261 ",-1))]),_:1,__:[40,41,42,43]})]),_:1})]),_:1}),T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{icon:"palette",label:"HSV颜色检测设置","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[u[48]||(u[48]=w("div",{class:"text-subtitle2"},"HSV 范围 1",-1)),(Ae(),Fe($t,null,Ft(["h1_min","h1_max","s1_min","s1_max","v1_min","v1_max"],c=>w("div",{key:c,class:"q-mt-sm"},[w("label",Yo,[We(Ke(c.toUpperCase())+": ",1),T(xt,{"model-value":d[c],"onUpdate:modelValue":O=>{O!==null&&(d[c]=O,Se())},min:(c.startsWith("h"),0),max:c.startsWith("h")?179:255,label:"","label-always":""},null,8,["model-value","onUpdate:modelValue","min","max"])])])),64)),w("div",Go,[T(pt,{modelValue:d.use_range2,"onUpdate:modelValue":[u[4]||(u[4]=c=>d.use_range2=c),Se],label:"启用第二个HSV范围"},null,8,["modelValue"])]),d.use_range2?(Ae(),Fe("div",Zo,[u[44]||(u[44]=w("div",{class:"text-subtitle2"},"HSV 范围 2",-1)),(Ae(),Fe($t,null,Ft(["h2_min","h2_max","s2_min","s2_max","v2_min","v2_max"],c=>w("div",{key:c,class:"q-mt-sm"},[w("label",ea,[We(Ke(c.toUpperCase())+": ",1),T(xt,{"model-value":d[c],"onUpdate:modelValue":O=>{O!==null&&(d[c]=O,Se())},min:(c.startsWith("h"),0),max:c.startsWith("h")?179:255,label:"","label-always":""},null,8,["model-value","onUpdate:modelValue","min","max"])])])),64))])):Pt("",!0),w("div",ta,[u[45]||(u[45]=w("div",{class:"text-subtitle2"},"最小检测面积",-1)),T(re,{modelValue:h.min_area,"onUpdate:modelValue":[u[5]||(u[5]=c=>h.min_area=c),Se],modelModifiers:{number:!0},type:"number",label:"最小面积",dense:""},null,8,["modelValue"])]),u[49]||(u[49]=w("div",{class:"text-subtitle2 q-mt-lg"},"Canny边缘检测",-1)),w("div",la,[w("label",na,[u[46]||(u[46]=We(" Canny 低阈值: ",-1)),T(xt,{modelValue:h.canny_min,"onUpdate:modelValue":[u[6]||(u[6]=c=>h.canny_min=c),Se],min:0,max:255,label:"","label-always":""},null,8,["modelValue"])])]),w("div",oa,[w("label",aa,[u[47]||(u[47]=We(" Canny 高阈值: ",-1)),T(xt,{modelValue:h.canny_max,"onUpdate:modelValue":[u[7]||(u[7]=c=>h.canny_max=c),Se],min:0,max:255,label:"","label-always":""},null,8,["modelValue"])])])]),_:1,__:[48,49]})]),_:1})]),_:1}),T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{icon:"filter_list",label:"面积过滤设置","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[w("div",ia,[w("div",ra,[T(re,{modelValue:n.min_crop_area,"onUpdate:modelValue":[u[8]||(u[8]=c=>n.min_crop_area=c),U],modelModifiers:{number:!0},type:"number",label:"最小裁剪面积",dense:""},null,8,["modelValue"])]),w("div",ua,[T(re,{modelValue:n.max_crop_area,"onUpdate:modelValue":[u[9]||(u[9]=c=>n.max_crop_area=c),U],modelModifiers:{number:!0},type:"number",label:"最大裁剪面积",dense:""},null,8,["modelValue"])])]),w("div",sa,[T(pt,{modelValue:n.enable_area_filter,"onUpdate:modelValue":[u[10]||(u[10]=c=>n.enable_area_filter=c),U],label:"启用面积过滤"},null,8,["modelValue"])]),w("div",ca,[T(pt,{modelValue:n.enable_a4_check,"onUpdate:modelValue":[u[11]||(u[11]=c=>n.enable_a4_check=c),U],label:"启用A4比例检查"},null,8,["modelValue"])]),w("div",da,[w("div",fa,[T(re,{modelValue:n.a4_ratio_tolerance,"onUpdate:modelValue":[u[12]||(u[12]=c=>n.a4_ratio_tolerance=c),U],modelModifiers:{number:!0},type:"number",step:"0.1",label:"A4比例容差",dense:""},null,8,["modelValue"])]),w("div",va,[T(re,{modelValue:n.max_circularity,"onUpdate:modelValue":[u[13]||(u[13]=c=>n.max_circularity=c),U],modelModifiers:{number:!0},type:"number",step:"0.1",label:"最大圆形度",dense:""},null,8,["modelValue"])])]),w("div",ma,[w("div",ga,[T(re,{modelValue:n.min_solidity,"onUpdate:modelValue":[u[14]||(u[14]=c=>n.min_solidity=c),U],modelModifiers:{number:!0},type:"number",step:"0.1",label:"最小实心度",dense:""},null,8,["modelValue"])]),w("div",ha,[T(re,{modelValue:n.max_vertices,"onUpdate:modelValue":[u[15]||(u[15]=c=>n.max_vertices=c),U],modelModifiers:{number:!0},type:"number",label:"最大顶点数",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{icon:"crop",label:"梯形校正设置","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[w("div",pa,[T(pt,{modelValue:s.enable,"onUpdate:modelValue":[u[16]||(u[16]=c=>s.enable=c),N],label:"启用梯形校正"},null,8,["modelValue"])]),w("div",ba,[w("div",ya,[T(re,{modelValue:s.target_width,"onUpdate:modelValue":[u[17]||(u[17]=c=>s.target_width=c),N],modelModifiers:{number:!0},type:"number",label:"目标宽度 (mm)",dense:""},null,8,["modelValue"])]),w("div",_a,[T(re,{modelValue:s.target_height,"onUpdate:modelValue":[u[18]||(u[18]=c=>s.target_height=c),N],modelModifiers:{number:!0},type:"number",label:"目标高度 (mm)",dense:""},null,8,["modelValue"])])]),w("div",xa,[w("div",Sa,[T(re,{modelValue:s.a4_ratio,"onUpdate:modelValue":[u[19]||(u[19]=c=>s.a4_ratio=c),N],modelModifiers:{number:!0},type:"number",step:"0.1",label:"A4比例",dense:""},null,8,["modelValue"])]),w("div",wa,[T(pt,{modelValue:s.use_short_edge_for_measurement,"onUpdate:modelValue":[u[20]||(u[20]=c=>s.use_short_edge_for_measurement=c),N],label:"使用短边测量"},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{icon:"contrast",label:"黑色检测设置","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[u[50]||(u[50]=w("div",{class:"text-subtitle2 q-mb-sm"},"HSV阈值设置",-1)),w("div",Ca,[w("div",ka,[T(re,{modelValue:f.lower_h,"onUpdate:modelValue":[u[21]||(u[21]=c=>f.lower_h=c),Z],modelModifiers:{number:!0},type:"number",label:"色调下限",dense:""},null,8,["modelValue"])]),w("div",Va,[T(re,{modelValue:f.lower_s,"onUpdate:modelValue":[u[22]||(u[22]=c=>f.lower_s=c),Z],modelModifiers:{number:!0},type:"number",label:"饱和度下限",dense:""},null,8,["modelValue"])]),w("div",qa,[T(re,{modelValue:f.lower_v,"onUpdate:modelValue":[u[23]||(u[23]=c=>f.lower_v=c),Z],modelModifiers:{number:!0},type:"number",label:"明度下限",dense:""},null,8,["modelValue"])])]),w("div",Ma,[w("div",Ta,[T(re,{modelValue:f.upper_h,"onUpdate:modelValue":[u[24]||(u[24]=c=>f.upper_h=c),Z],modelModifiers:{number:!0},type:"number",label:"色调上限",dense:""},null,8,["modelValue"])]),w("div",Oa,[T(re,{modelValue:f.upper_s,"onUpdate:modelValue":[u[25]||(u[25]=c=>f.upper_s=c),Z],modelModifiers:{number:!0},type:"number",label:"饱和度上限",dense:""},null,8,["modelValue"])]),w("div",Aa,[T(re,{modelValue:f.upper_v,"onUpdate:modelValue":[u[26]||(u[26]=c=>f.upper_v=c),Z],modelModifiers:{number:!0},type:"number",label:"明度上限",dense:""},null,8,["modelValue"])])]),w("div",Ea,[T(re,{modelValue:f.morph_kernel_size,"onUpdate:modelValue":[u[27]||(u[27]=c=>f.morph_kernel_size=c),Z],modelModifiers:{number:!0},type:"number",label:"形态学核大小",dense:""},null,8,["modelValue"])])]),_:1,__:[50]})]),_:1})]),_:1}),T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{icon:"videocam",label:"摄像头设置","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[w("div",Pa,[w("div",$a,[T(re,{modelValue:m.index,"onUpdate:modelValue":[u[28]||(u[28]=c=>m.index=c),k],modelModifiers:{number:!0},type:"number",label:"摄像头索引",dense:""},null,8,["modelValue"])]),w("div",Fa,[T(re,{modelValue:m.width,"onUpdate:modelValue":[u[29]||(u[29]=c=>m.width=c),k],modelModifiers:{number:!0},type:"number",label:"分辨率宽度",dense:""},null,8,["modelValue"])]),w("div",La,[T(re,{modelValue:m.height,"onUpdate:modelValue":[u[30]||(u[30]=c=>m.height=c),k],modelModifiers:{number:!0},type:"number",label:"分辨率高度",dense:""},null,8,["modelValue"])])])]),_:1})]),_:1})]),_:1}),T(ze,{flat:"",bordered:""},{default:ne(()=>[T(Ue,{icon:"settings",label:"全局操作","header-class":"text-primary"},{default:ne(()=>[T(Ie,null,{default:ne(()=>[w("div",Ra,[w("div",Ba,[T(De,{color:"warning",outline:"",label:"重置为默认值",onClick:Pe,loading:S.value,icon:"refresh",class:"full-width"},null,8,["loading"])]),w("div",Ia,[T(De,{color:"positive",label:"保存所有配置",onClick:ce,loading:v.value,icon:"save",class:"full-width"},null,8,["loading"])])]),w("div",za,[w("div",Da,[T(De,{color:"info",outline:"",label:"加载配置",onClick:ye,loading:y.value,icon:"download",class:"full-width"},null,8,["loading"])]),w("div",Ha,[T(De,{color:"secondary",outline:"",label:"显示状态",onClick:xe,loading:A.value,icon:"visibility",class:"full-width"},null,8,["loading"])])])]),_:1})]),_:1})]),_:1})])])]),_:1,__:[51]}))}}),Xa=vn(ja,[["__scopeId","data-v-c0426cef"]]);export{Xa as default};
